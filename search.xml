<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>异步处理的通用模型</title>
      <link href="web/js-promise/"/>
      <url>web/js-promise/</url>
      
        <content type="html"><![CDATA[<p>ES官方参考了大量的异步场景，总结出了一套异步的通用模型，该模型可以覆盖几乎所有的异步场景，甚至是同步场景。</p><p>值得注意的是，为了兼容旧系统，ES6 并不打算抛弃掉过去的做法，只是基于该模型推出一个全新的 API，使用该API，会让异步处理更加的简洁优雅。</p><p>理解该 API，最重要的，是理解它的异步模型</p><h2 id="两个阶段"><a href="#两个阶段" class="headerlink" title="两个阶段"></a>两个阶段</h2><p>ES6 将某一件可能发生异步操作的事情，分为两个阶段：<strong>unsettled</strong> 和 <strong>settled</strong></p><p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="两个阶段"></p><ol><li><strong>unsettled</strong><br>未决阶段，表示事情还在进行前期的处理，并没有发生通向结果的那件事</li><li><strong>settled</strong><br>已决阶段，事情已经有了一个结果，不管这个结果是好是坏，整件事情无法逆转</li></ol><p>事情总是从 未决阶段 逐步发展到 已决阶段的。并且，未决阶段拥有控制何时通向已决阶段的能力。</p><h2 id="三种状态"><a href="#三种状态" class="headerlink" title="三种状态"></a>三种状态</h2><p>ES6将事情划分为三种状态： <strong>pending</strong>、<strong>resolved</strong>、<strong>rejected</strong></p><ol><li><strong>pending</strong><br>挂起，处于未决阶段，则表示这件事情还在挂起（最终的结果还没出来）</li><li><strong>resolved</strong><br>已处理，已决阶段的一种状态，表示整件事情已经出现结果，并是一个可以按照正常逻辑进行下去的结果</li><li><strong>rejected</strong><br>已拒绝，已决阶段的一种状态，表示整件事情已经出现结果，并是一个无法按照正常逻辑进行下去的结果，通常用于表示有一个错误</li></ol><p>既然未决阶段有权力决定事情的走向，因此，未决阶段可以决定事情最终的状态！</p><h3 id="两个已决状态过程"><a href="#两个已决状态过程" class="headerlink" title="两个已决状态过程"></a>两个已决状态过程</h3><p>我们将 把事情变为resolved状态的过程叫做：<strong>resolve</strong>，推向该状态时，可能会传递一些数据</p><p>我们将 把事情变为rejected状态的过程叫做：<strong>reject</strong>，推向该状态时，同样可能会传递一些数据，通常为错误信息</p><div class="note warning"><p>始终记住，无论是阶段，还是状态，是不可逆的！</p></div><p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/06.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="状态"></p><p>当事情达到已决阶段后，通常需要进行后续处理，不同的已决状态，决定了不同的后续处理。</p><ol><li><strong>resolved</strong> 状态<br>这是一个正常的已决状态，后续处理表示为 thenable</li><li><strong>rejected</strong> 状态<br>这是一个非正常的已决状态，后续处理表示为 catchable</li></ol><p>后续处理可能有多个，因此会形成作业队列，这些后续处理会按照顺序，当状态到达后依次执行。</p><p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/08.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Promise"></p><div class="note success"><p>整件事称之为Promise，理解概念，对学习Promise至关重要！</p></div><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ol><li>未决阶段的处理函数是 <strong>同步</strong> 的，会立即执行</li><li>thenable和catchaable函数 是 <strong>异步</strong> 的，就算是立即执行，也会加到事件队列中等待执行，并且是微队列</li><li>promise.then 可以只添加thenable函数，promise.catch可以单独添加catchable函数</li><li>在未决阶段的处理函数中，如果发生未捕获的错误，会将状态推向 rejected，并会被catchable捕获</li><li>一旦状态推向已决状态，无法更改</li><li><strong>Promise没有消除回调，只是变得可控</strong></li><li>不设置回调函数，Promise内部跑出的错误，不会反映到外部</li><li>当处于Pending状态时，无法得知目前进展到哪一个阶段</li></ol><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 未决阶段的处理</span></span><br><span class="line">    <span class="comment">// resolve函数将状态推向已决阶段的resolved状态</span></span><br><span class="line">    <span class="comment">// reject函数将状态推向已决阶段的rejected状态</span></span><br><span class="line">    <span class="comment">// 函数，均可传递最多一个参数，表示推向状态的数据 </span></span><br><span class="line">&#125;)</span><br><span class="line">promise.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// thenable函数，data为状态数据</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// catchable函数，err为状态数据</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Promise的串联"><a href="#Promise的串联" class="headerlink" title="Promise的串联"></a>Promise的串联</h3><p>后续的promise需要 前面promise实例的结果</p><p>Promise对象中，无论是then，还是catch方法，都是具有返回值的，返回值为 新的promise对象，满足规则如下：</p><table><thead><tr><th>当前Promise状态</th><th>新的Promise状态</th></tr></thead><tbody><tr><td>挂起状态</td><td>挂起状态</td></tr><tr><td>已决状态，运行相应的后续处理函数</td><td>后续处理后的结果作为resolved(rejected)数据，用到Promise</td></tr></tbody></table><blockquote><p>后续Promise 一定会等到前面的Promise有了后续处理结果后，才会变成已决状态</p></blockquote><h3 id="Promise-的其他api"><a href="#Promise-的其他api" class="headerlink" title="Promise 的其他api"></a>Promise 的其他api</h3><h4 id="原型成员-实例成员"><a href="#原型成员-实例成员" class="headerlink" title="原型成员 (实例成员)"></a>原型成员 (实例成员)</h4><ul><li>then</li><li>catch</li><li>finally<ul><li>[ES2018]注册一个后续处理函数（无参），当Promise为已决时运行该函数</li></ul></li></ul><h4 id="构造函数成员-（静态成员）"><a href="#构造函数成员-（静态成员）" class="headerlink" title="构造函数成员 （静态成员）"></a>构造函数成员 （静态成员）</h4><h5 id="resolve-数据"><a href="#resolve-数据" class="headerlink" title="resolve(数据)"></a>resolve(数据)</h5><p>该方法返回一个resolved状态的Promise，传递的数据作为状态数据。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pro = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(pro)   <span class="comment">// resolved状态，且数据为 1  </span></span><br></pre></td></tr></table></figure><div class="note warning"><p>特殊情况：如果传递的数据是Promise，则直接返回传递的Promise对象</p></div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> pro = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.resolve(pro);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p === pro)   <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reject()  也是 true</span></span><br></pre></td></tr></table></figure><h5 id="reject-数据"><a href="#reject-数据" class="headerlink" title="reject(数据)"></a>reject(数据)</h5><p>该方法返回一个rejected状态的Promise，传递的数据作为状态数据。</p><h5 id="all-iterable"><a href="#all-iterable" class="headerlink" title="all(iterable)"></a>all(iterable)</h5><p>这个方法返回一个新的promise对象，该promise对象在iterable参数对象里所有的promise对象都成功的时候才会触发成功，一旦有任何一个iterable里面的promise对象失败则立即触发该promise对象的失败。</p><p>这个新的promise对象在触发成功状态以后，会把一个包含iterable里所有promise返回值的数组作为成功回调的返回值，顺序跟iterable的顺序保持一致。</p><p>如果这个新的promise对象触发了失败状态，它会把iterable里第一个触发失败的promise对象的错误信息作为它的失败错误信息。</p><div class="note success"><p>Promise.all方法常被用于处理多个promise对象的状态集合</p></div><h5 id="race-iterable"><a href="#race-iterable" class="headerlink" title="race(iterable)"></a>race(iterable)</h5><p>当iterable参数里的任意一个子promise被成功或失败后，父promise马上也会用子promise的成功返回值或失败详情作为参数调用父promise绑定的相应句柄，并返回该promise对象。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flex布局深究</title>
      <link href="web/flex/"/>
      <url>web/flex/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对于 基础布局知识，阅读 <a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">flex布局教程 - 阮一峰</a></p><h2 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h2><p>属性定义项目的放大比例，<strong>默认为0</strong>，即如果存在剩余空间，也不放大（瓜分剩余空间）。<br><strong>假设有三个子项</strong></p><p>如果设置子项的 <code>flex-grow: 1;</code>， 则它们将按照比例  <code>1 ：1 ：1</code> 等分剩余空间。</p><p>如果设置<br>第 <strong>一</strong> 个子项的<code>flex-grow: 1;</code>，<br>第 <strong>二</strong> 个子项的<code>flex-grow: 2;</code>，<br>第 <strong>三</strong> 个子项的<code>flex-grow: 3;</code>，<br>则它们将按照比例  <code>1 ：2 ：3</code> 等分剩余空间。</p><h2 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h2><p>我们都知道，<code>flex-shrink</code>属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p><p>但是与<code>flex-grow</code>的放大比例有着完全不同的计算方式。</p><p>当设置了<code>flex-shrink</code> ，则 <code>flex-grow</code> 属性无效。</p><p>我们设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">3</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">300px</span>;  <span class="comment">/*优先于width*/</span></span><br><span class="line">  </span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid green;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时，三个子项的大小总共是 <strong>900</strong>，超过了 盒子<strong>600</strong>的大小，同时对三个子项设置了 <code>flex-shrink</code>，前两个盒子为<strong>1</strong>，第三个值为<strong>3</strong></p><p>我们按照 <code>flex-grow</code>的扩展的计算方式进行测试，可以得到</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901100817210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901100817210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试"></p>            </div><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901101048178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901101048178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="实际测试图"></p>            </div><p>而实际结果也是如此，但真的是这样么？<strong>当然不是！！！</strong>，主要原因在于  <code>三个子项的宽度是相等的</code>，然后误导将<code>shrink</code>的比例当做了缩减的比例。</p><p>我们<strong>再</strong>设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">3</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>去掉子项边框，让其为整数值，方便计算！</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时，三个子项的大小总共是 <strong>800</strong>，超过了 盒子<strong>600</strong>的大小 200，同时对三个子项设置了 <code>flex-shrink</code>，前两个盒子为<strong>1</strong>，第三个值为<strong>3</strong>。</p><p>按照刚刚测试的算法，<strong>1：1：3</strong> 对超出的 <strong>200</strong> 进行压缩可以得到<br>第一个宽度为 200 - 40 = 160，<br>第一个宽度为 200 - 40 = 160，<br>第三个宽度为 400 -120 = 280</p><p>但实际测试结果为<strong>175   175  250</strong>，<br><strong>如此便可以验证压缩的计算方式，并不是扩展的计算方式</strong></p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901102933940.gif#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901102933940.gif#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试2"></p>            </div><p>真实的计算方式则是所有子项的    真实<strong>（内容区）</strong>宽度  shrink值    相加，作为权值，为分母。</p><p>然后每个子项的真实宽度 shrink值/ 权值  再乘以多出来的部分，得到 压缩部分。再减去压缩部分得到实际宽度大小。</p><p>拿上述例子来计算。</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901105549195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901105549195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="计算方式"></p>            </div><p>这里就有一个值得注意的地方。在图片中  计算压缩大小的试子中，分子上是  <strong>真实宽度</strong>为啥呢？</p><p>我们<strong>接着</strong>设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">3</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>这次加上子项边框</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以得到实际结果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901110414219.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901110414219.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="真实宽度测试"></p>            </div><p>惊奇的发现，宽度竟然变成了小数，而且，加上<code>padding</code>的值也不等于计算出来的结果，虽然差不多。</p><p>但是如果<strong>将 border 去掉</strong>，就会发现和原来的一样，不同的地方，就是<code>padding</code>的值没了。</p><p>细心的可以知道：这个真实宽度就是指<strong>内容区的真实宽度</strong>。</p><p>我们<strong>再接着</strong>设置一个容器，包裹三个子项盒子<br><strong>去掉子项内容区的内容</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>加上颜色</strong><br><strong>这次前两个盒子 不设置width，用padding代替宽度大小，去掉边框</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;  </span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#0ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以得到实际结果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901111906418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901111906418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="实际结果图"></p>            </div><p>惊奇的发现，它们宽度竟然一样。其实可以猜测，第一个和第二个都没有压缩，只有第三个压缩了。</p><p>相当于 第一个和第二个的 <code>shrink</code>值，都是 0 。</p><p>其权重 计算可以为  <code>0 * 1 + 0 * 1 + xxx * 3</code>。这样一来，只能在第三个上面压缩。</p><p>我们<strong>再再接着</strong>设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>加上颜色</strong><br><strong>这次设置80的padding</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;  </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#0ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推测结果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901114702456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901114702456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="推测结果图"></p>            </div><p>真实效果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901115054351.gif#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901115054351.gif#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="真实效果图"></p>            </div><p>当设置了 <code>flex-shrink</code>属性同时遇到 <code>box-sizing:border-box</code> ， <code>border</code>或者<code>padding</code>，加权值在计算的时候，不是真实盒子宽度，而是内容区的宽度。</p><h2 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h2><p>当子项同时设置了 <code>width</code>和<code>flex-basis</code>，basis的优先级更高。</p><p>不做测试，直接结论！</p><ol><li><p>就是子项的<code>width</code>。权重高于width。</p></li><li><p>添加内容，当是英语单词的时候，</p><ol><li>只写basis ，就代表width的最小值，即min-width</li><li>同时设置了basis和 width。<ol><li>basis &lt; width   basis是下限，width代表上限</li><li>basis &gt; width  则width无效了</li></ol></li></ol></li><li><p>当不换行内容撑开容器，设置了shrink，不参与压缩<code>flex-shrink</code></p><ol><li>可以设置中文</li><li><code>word-break:break-word</code>强制换行</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> flex布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>css中的基线</title>
      <link href="web/css-lineheight/"/>
      <url>web/css-lineheight/</url>
      
        <content type="html"><![CDATA[<h2 id="Line-height"><a href="#Line-height" class="headerlink" title="Line-height"></a>Line-height</h2><h3 id="行距、行间距"><a href="#行距、行间距" class="headerlink" title="行距、行间距"></a>行距、行间距</h3><p>行距： 相邻文本行间  <strong>上一个文本行基线</strong>  和  <strong>下一个文本行基线</strong> 之间的距离。</p><p>行间距： 相邻文本行间 <strong>上一个文本行下行线</strong> 和 <strong>下一个文本行上行线</strong> 之间的距离。</p><div class="note info"><p>行距 = 行间距 + 字体大小</p></div><p>在CSS中，CSS属性line-height则是用于设置真实的行距。从W3C Rec中看出，<strong>line-height就是行距</strong>, 而line-height的字面意思即为“行高”，推导结果CSS中行高即是行距。</p><p>了解了行高，行距，行间距。那么接下来介绍line-height的重要属性–垂直居中。</p><p>我们知道，<span class='p red'>行距(leading) = 行间距(line-space) + 字体大小(font-size)</span>。</p><p>行间距与字体大小都可以通过相应CSS属性设置，问题是行间距所占的空间是怎么分配的呢？</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="行间距分配"></p>            </div><p>CSS采用的是将行间距对半开，然后分配到上下两端，这里引用了<span class='p '>Half-leading</span>的概念， <strong>Half-leading = 行距/2</strong></p><p>由于行距可能为负值，可以知道行间距可能为负数，那么垂直居中还有效么？</p><p>答案是<strong>肯定的</strong>，行间距为负数时，Half-leading 自然也是负数，只是上下两端从增加等量空间变为减少等量空间而已。如下例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative;top:100px;font-size:90px;line-height:10px;background:yellow;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;border:solid 1px red;line-height:10px;&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="行间距分配"></p>            </div><h3 id="line-height属性"><a href="#line-height属性" class="headerlink" title="line-height属性"></a>line-height属性</h3><p><a href="https://www.runoob.com/cssref/pr-dim-line-height.html">CSS line-height 属性 | 菜鸟教程</a></p><p><a href="https://www.w3school.com.cn/cssref/pr_dim_line-height.asp">CSS line-height 属性 | W3school</a></p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>可能值</td><td>normal  | &lt;number&gt; | &lt;lenght&gt; | &lt;percentage&gt; | &lt;inherit&gt;</td></tr><tr><td>默认值</td><td>normal</td></tr><tr><td>继承性</td><td>yes</td></tr></tbody></table><h4 id="normal"><a href="#normal" class="headerlink" title="normal"></a>normal</h4><p>对于normal，其实就是一个值，但是由浏览器决定，实际值一般在<strong>1.0~1.2之间（闭区间）</strong></p><p>不同浏览器下，<code>normal</code>  不同；<br>同一浏览器下，<code>font-size</code> 不同，<code>normal</code> 也不同；<br>同一浏览器下，<code>font-size</code> 相同，<code>font-family</code> 不同，<code>normal</code> 也会变化。</p><p>normal 的平均值确实是 1.0~1.2(闭区间)，但是具体到特定浏览器、font-family 和 font-size时，normal值可能会大于1.2。</p><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>指定长度用于计算线盒高度，负值非法。</p><p>设置固定值，单位可以是 px 、pt 。</p><p>好处就是简单，设置是什么，<code>line-height</code>的实际高度就是什么。</p><p>坏处是子元素默认 <strong>继承</strong> 父容器的line-height，若子元素的font-size <strong>大于</strong> 父容器的font-size，那么子元素的文本行会什么密集。</p><p>解决方案，一般是采用 相对 font-size 实际大小 来设置 line-height 值的方式，如默认 <code>normal</code> 方法。</p><h4 id="percentage"><a href="#percentage" class="headerlink" title="percentage(%)"></a>percentage(%)</h4><p>计算值是百分比乘以元素计算字体大小，负值非法。</p><p>值的注意的是，<strong>参考系的确是font-size</strong>，但子元素继承的是父容器的实际 line-height 值，也就是说父容器设置为 <code>font-size:20px;line-height:200%;</code>，子元素继承的line-height值为 <strong>40px</strong>，而不是 200% ，因此又回到了 <em>方式</em>   的问题了。</p><h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><p>属性的使用值是 这个数字 乘以 元素的字体大小，负值非法，计算值与指定值相同。</p><p>和方式一样，<strong>以 font-size 为参考系</strong>，以相对值方式设置 line-height。</p><p>唯一不同的是，<strong>子元素继承的是父容器的值，参考系自动变为子元素的 font-size</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2em</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2</span>;</span><br></pre></td></tr></table></figure><p>上门的两句其实是等价的，若想将参考系 <strong>改</strong> 为根元素的 font-size ， 需要CSS3的新增<code>line-height:1.2rem;</code>。</p><h2 id="深入理解"><a href="#深入理解" class="headerlink" title="深入理解"></a>深入理解</h2><p>根据WCAG2.0(万维网内容可存取性指南)规定 “段落中的行距至少要1.5倍 ”，那么是否在body设置一下，就一劳永逸了呢？</p><div class="tabs" id="页面内不重复的id"><ul class="nav-tabs"><li class="tab active"><a href="#页面内不重复的id-1">CSS代码</a></li><li class="tab"><a href="#页面内不重复的id-2">HTML代码</a></li></ul><div class="tab-content"><div class="tab-pane active" id="页面内不重复的id-1"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"> <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">12px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="页面内不重复的id-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>深入理解 line-height 和 vertical-align<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>In my dual profession as an educator and health care provider, I have worked with numerous children infected with the virus that causes AIDS. The relationships that I have had with these special kids have been gifts in my life. They have taught me so many things, but I have especially learned that great courage can be found in the smallest of packages. Let me tell you about Tyler. <span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>bed and whispered, “I might die soon. I’m not scared. When I die, please dress me in red. Mom promised she’s coming to heaven, too. I’ll be playing when she gets there, and I want to make sure she can find me.”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="效果图"/></div><span class="image-caption">效果图</span></div><p>代码效果呈现如图，不难发现，对于 <code>h1</code> 标题来说，行距有点多，于是可以有如下配置：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line"> line-height:1.5;</span><br><span class="line">&#125;</span><br><span class="line">h1,h2,h3,h4,h5,h6&#123;</span><br><span class="line"> line-height:1.2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/04.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="右边为上图，对比可以发现左图行距确实减少了！"></p>            </div><h3 id="vertical-align如何对齐"><a href="#vertical-align如何对齐" class="headerlink" title="vertical-align如何对齐"></a>vertical-align如何对齐</h3><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p><a href="https://www.w3school.com.cn/css/pr_pos_vertical-align.asp">CSS vertical-align 属性 | W3school</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align">CSS vertical-align 属性 | MDN web docs</a></p><p>它的属性规则还是比较多的，但是也不能都记，或者用的时候挨个查。归纳一下不难发现</p><ol><li>对齐操作必定涉及操作元素和参考系元素，而<code>vertical-align</code>的值全是指的是<strong>参考系</strong>元素的位置，操作元素则以<code>baseline</code>或者<code>linebox</code>上中下作对齐；</li><li>默认对齐方式为<code>baseline</code>，数量值均是相对于<code>baseline</code>而言。</li></ol><div class="note warning"><p>vertical-align 仅对 inline-level 和 table-cell 元素有效。</p></div><h5 id="默认baseline"><a href="#默认baseline" class="headerlink" title="默认baseline"></a>默认baseline</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"></p>            </div><p>这里的<strong>x for reference frame</strong>作为参考系，它的 <code>baseline</code> 就是 <strong>line-height x vertical-align</strong> 要对齐的。</p><p>在此 <code>baseline</code> 的基础上做出如下设置</p><div class="note success"><p>在<code>span</code>中设置 <code>vertical-align: 10px;</code></p></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:10px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/06.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vertical-align:10px;"></p>            </div><div class="note success"><p>在<code>span</code>中设置 <code>vertical-align: -10px;</code></p></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:-10px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/07.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vertical-align: -10px;"></p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>在<code>div</code>中设置<code>line-height:1;</code>， 同时在<code>span</code>中设置 <code>vertical-align:50%;</code></p>            </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;line-height:1;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:50%;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/08.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"></p>            </div><div class="note success"><p>在<code>div</code>中设置<code>line-height:1;</code>， 同时在<code>span</code>中设置 <code>vertical-align: -50%;</code></p></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;line-height:1;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align: -50%;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/09.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/09.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"></p>            </div><h5 id="top"><a href="#top" class="headerlink" title="top"></a>top</h5><p>把元素 line box 上边框对齐父元素的 line box 上边框</p><h5 id="text-top"><a href="#text-top" class="headerlink" title="text-top"></a>text-top</h5><p>把元素的 line box 上边框对齐父元素的 ascent(即 content top edge)</p><h5 id="middle"><a href="#middle" class="headerlink" title="middle"></a>middle</h5><p>把元素 line box 中垂点与父元素基线 + x-height/2 的高度对齐</p><h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><p>刚刚换了新的markdown标签，用起来比较费劲，码字效率比较低，还在熟悉中。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js的console</title>
      <link href="web/js-console/"/>
      <url>web/js-console/</url>
      
        <content type="html"><![CDATA[<h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><p>第一印象便是<code>console.log</code>，通过它在浏览器控制台进行调试输出。但除此之外还有许多方法。<br>比如在访问百度首页时候的控制台，会有以下的内容。但是仔细一看，你会发现，<strong>它有颜色</strong>。怎么做到的呢？</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="百度首页控制台"></p>            </div><p>其实不难发现，输入<code>console</code>，可知它是一个对象，里面有着高达14个方法，而我们最常用只有一个<code>log()</code>，可怕。</p><div class="tag link"><a class="link-card" title="Console - Web API 接口参考 | MDN" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Console - Web API 接口参考 | MDN</p><p class="url">https://developer.mozilla.org/zh-CN/docs/Web/API/Console</p></div></a></div><div class="tag link"><a class="link-card" title="JavaScript Console对象 | 菜鸟教程" href="https://www.runoob.com/w3cnote/javascript-console-object.html"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">JavaScript Console对象 | 菜鸟教程</p><p class="url">https://www.runoob.com/w3cnote/javascript-console-object.html</p></div></a></div><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="console方法"></p>            </div><p>通过文档我们清晰的知道各个方法的作用，以及使用方法。</p><p>通过占位符，可以改变输出的内容和样式。其中 <code>%c</code> 被称为 CSS占位符。</p><h2 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h2><h3 id="console-log"><a href="#console-log" class="headerlink" title="console.log()"></a>console.log()</h3><p>首先，除了<code>console.log(object)</code>这种语法，还有 <code>console.log(object, otherObject, string)</code> 将所有东西都整齐的打印出来。另外，还有 <code>console.log(msg, value)</code>，通过占位符来输出，执行方式与 <strong>C 语言</strong>的输出类似。</p><p>对于 <code>%c</code>，输出样式。</p><p>一个 <code>%c</code> 是将此后所有内容都进行渲染</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton&#x27;</span>, <span class="string">&#x27;color: white; background-color: orange; padding:2px 5px; border-radius: 2px&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="一个%c"></p>            </div><p><strong>两个</strong> <code>%c</code> 则是对其中间内容渲染。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton%c not a div&#x27;</span>, <span class="string">&#x27;color: white; background-color:orange; padding: 2px 5px; border-radius: 2px&#x27;</span>,<span class="string">&#x27;color: &quot;auto&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/04.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="两个%c"></p>            </div><p>当然渲染的只是样式，没有实质性的功能（按钮，点击事件等）</p><p>如果想 <code>%c</code> <strong>展示</strong>出来呢? 与 <code>\</code> 类似，写两个即可，比如将上述的语句展示出来。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton%%c not a div&#x27;</span>, <span class="string">&#x27;color: white; background-color:orange; padding: 2px 5px; border-radius: 2px&#x27;</span>,<span class="string">&#x27;color: &quot;auto&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="显示%c"></p>            </div><h3 id="console-dir"><a href="#console-dir" class="headerlink" title="console.dir()"></a>console.dir()</h3><p>通常看，它与 <code>log()</code> 的功能非常类似，但也有略微不同，主要在对文档结构的输出方面。</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/06.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="log()与dir()"></p>            </div><p>展开来看，<code>log</code> 只是输出了文档结构的内容，怎么写的怎么输出。清晰展示DOM节点，当我们选中时候，还可以跳转子DOM节点。</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/07.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="dir()指向dom节点"></p>            </div><p>而 <code>dir()</code> 却是一种更对象化的输出方式观察元素节点，在监测元素节点方面，这种结果无疑是最好的。</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/08.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="dir()输出"></p>            </div><h3 id="console-warn"><a href="#console-warn" class="headerlink" title="console.warn()"></a>console.warn()</h3><p>它可能是 <code>log()</code> 最直接明显的替换产生的方法，它的级别是<strong>warn级别</strong>而不是一个info级别，你可以将所有的 <code>console.log()</code> 过滤掉只留下  <code>console.warn()</code>。</p><p>在Vue的部分源码中也是使用 <code>console.warn()</code> 来操作的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;vue.js</span><br><span class="line">tip &#x3D; function (msg, vm) &#123;</span><br><span class="line"> if (hasConsole &amp;&amp; (!config.silent)) &#123;</span><br><span class="line">  console.warn(&quot;[Vue tip]: &quot; + msg + (vm ? generateComponentTrace(vm) : &#39;&#39;));</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="console-table"><a href="#console-table" class="headerlink" title="console.table()"></a>console.table()</h3><p>这个，就是将对象数组展示为列表的数据方法，变得更加简洁可观。例如对一个对象数组使用此方法。</p><p>对于 <code>log()</code> 输出结果是一个小箭头的省略形式，展开来看，可以清晰的查看对象。</p><p>而 <code>table()</code> 的输出更加简洁，更直观展示。并且值得一提的是，可以通过第一行的右上角箭头可以进行排序。<code>table()</code> 最多只处理1000行的数据能力，不适用所有数据集合。</p><p>当然如果只想要某一列展示，可以通过第二个参数进行传递。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.table(transactions,[<span class="string">&quot;id&quot;</span>,<span class="string">&quot;price&quot;</span>])</span><br></pre></td></tr></table></figure><div class="tabs" id="log与table"><ul class="nav-tabs"><li class="tab active"><a href="#log与table-1">log()输出</a></li><li class="tab"><a href="#log与table-2">table()输出</a></li></ul><div class="tab-content"><div class="tab-pane active" id="log与table-1"><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/09.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/09.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="log()输出"></p>            </div></div><div class="tab-pane" id="log与table-2"><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/10.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/10.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="table输出结果"></p>            </div></div></div></div><h3 id="console-assert"><a href="#console-assert" class="headerlink" title="console.assert()"></a>console.assert()</h3><p>它的第一个参数是 <code>falsey</code> 时，与 <code>log()</code> 函数无异。当第一个参数是真值的时候什么都不做。</p><div class="note warning"><p>牢记，它的作用是判断，而不是过滤。</p></div><p>它的使用场景与 循环时候要显示特殊的 数据相似。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(obj.num === <span class="number">3</span>)&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设我们上面的值在时间戳里有一个 <code>null</code> 或者 <code>0</code>，这会破坏代码日期格式。</p><p>当和任何有效的事物对象一起使用时会跳过。但是有一个触发了我们的日志记录，因为时间戳在 <code>0</code> 和 <code>null</code> 时为假值。</p><p>有时候，想实现更加复杂的场景，举例，对于上述表格中看到了关于用户<em>WAL2025</em>的数据，并想展示来自它们的事务。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(transactions.buyer === <span class="string">&#x27;WAL2025&#x27;</span>, transactions);</span><br></pre></td></tr></table></figure><p>看起来没毛病，但是并没有用，<strong>牢记，场景必须是否定态，它的作用是判断，而不是过滤。</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(transactions.buyer !== <span class="string">&#x27;WAL2025&#x27;</span>, transactions);</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>剩下的方法，演示过于困难或者简单，还是看文档理解比较好。</p><div class="tag link"><a class="link-card" title="Console - Web API 接口参考 | MDN" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Console - Web API 接口参考 | MDN</p><p class="url">https://developer.mozilla.org/zh-CN/docs/Web/API/Console</p></div></a></div><div class="tag link"><a class="link-card" title="JavaScript Console 对象 | 菜鸟教程" href="https://www.runoob.com/w3cnote/javascript-console-object.html"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">JavaScript Console 对象 | 菜鸟教程</p><p class="url">https://www.runoob.com/w3cnote/javascript-console-object.html</p></div></a></div><p>其他方法的存在，让我们可以得到比 <code>log()</code> 的信息更多一些，并且不需要调试器的情况下，这些工具还是很有用的。</p><h2 id="附图"><a href="#附图" class="headerlink" title="附图"></a>附图</h2><p>简洁直观的理解使用 <code>console</code></p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/11.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/11.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="console cheatsheet,图片来源：B站Zhangyaing"></p>            </div>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>try-catch监听多线程</title>
      <link href="web/js-trycatch/"/>
      <url>web/js-trycatch/</url>
      
        <content type="html"><![CDATA[<h2 id="try-catch-函数"><a href="#try-catch-函数" class="headerlink" title="try-catch 函数"></a>try-catch 函数</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p><strong>当 JavaScript 引擎执行 JavaScript 代码时，可能会发生各种错误</strong>，可能是语法错误，通常是程序员造成的编码错误或错别字。可能是拼写错误或语言中缺少的功能（可能由于浏览器差异）。可能是由于来自服务器或用户的错误输出而导致的错误。当然，也可能是由于许多其他不可预知的因素。当错误发生时，<strong>当事情出问题时，JavaScript 引擎通常会停止，并生成一个错误消息。这种情况被称为：JavaScript 抛出异常</strong>。对于可能出现的问题的代码我们需要预判，这就涉及到异常的测试与捕获。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">//在这里运行代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (err) &#123;</span><br><span class="line"> <span class="comment">//在这里处理错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>try 语句允许我们定义在执行时进行错误测试的代码块。<br>catch 语句允许我们定义当 try 代码块发生错误时，所执行的代码块。<br>JavaScript 语句 try 和 catch 是成对出现的。</p><p>有一个运行代码的函数 <code>runCode</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runCode</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">eval</span>(code);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们执行 runCode(‘1+1’) 可以得到 2，这里利用 <strong>eval 函数特性</strong>，可以执行字符串。eval 并不是我们这篇文章的主要内容。对于 code 是用户输入，当用户输入的内容是一段错误代码，我们的函数，就会报错，进而影响之后的逻辑执行。这是我们需要利用 try-catch 进行捕获。代码改写如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runCode</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">// 接下来执行的 eval(code)可能会出错</span></span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">eval</span>(code);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="comment">// 上面的部分报错，会对外输出错误信息，并不会终止程序</span></span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;代码存在错误&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我执行 runCode(‘aaaaa’), 会给我们提示信息： 代码存在错误，这样我们的错误就成功捕获，并不影响后面的逻辑执行。</p><h3 id="使用-try-catch-的建议"><a href="#使用-try-catch-的建议" class="headerlink" title="使用 try-catch 的建议"></a>使用 try-catch 的建议</h3><p>try catch 的使用，<strong>永远应该放在你的控制范围之内，而不应该防范未知的错误</strong>。也就是说你很清楚知道这里是有可能”出错“的，而且你很清楚知道什么前提下会出错，你就是要故意利用报错信息来区分错误，后续的程序会解决所有的出错，让程序继续执行。如果让用户先发现你根本没预料到的错误，而不是你先发现错误，你是失职的。</p><h2 id="try-catch-与多线程"><a href="#try-catch-与多线程" class="headerlink" title="try-catch 与多线程"></a>try-catch 与多线程</h2><h3 id="JS-中的“多线程”"><a href="#JS-中的“多线程”" class="headerlink" title="JS 中的“多线程”"></a>JS 中的“多线程”</h3><p>浏览器中的 JavaScript 确实是以单线程的方式执行的，也就是说 JavaScript 执行使用一个主线程，但是 JavaScript 提供了异步操作，比如定时器(setTimeout、setInterval)事件、Ajax 请求、Promise, I/O 等。它们将会被放入浏览器的事件任务队列（event loop）中去，等到 JavaScript 运行时执行线程空闲时候，事件队列才会按照先进先出的原则被一一执行。但是对于以上的异步操作过程中，能进行的计时，发送请求，I/O 操作都是其他的线程在做的事情，所以说是“多线程”。</p><h3 id="多线程不等于异步"><a href="#多线程不等于异步" class="headerlink" title="多线程不等于异步"></a>多线程不等于异步</h3><p>异步和多线程并不是一个同等关系,<strong>异步是最终目的,多线程只是我们实现异步的一种手段</strong>。异步是当一个调用请求发送给被调用者,而调用者不用等待其结果的返回而可以做其它的事情。实现异步可以采用多线程技术或则交给另外的进程来处理。</p><h4 id="setTimeout-函数"><a href="#setTimeout-函数" class="headerlink" title="setTimeout 函数"></a>setTimeout 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a.b)</span><br><span class="line"> &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制台报错： <code>a is not defined.</code>，并没有被捕获。得出结论， try-catch 无法监听 setTime 函数中的错误。</p><h4 id="Promise-函数"><a href="#Promise-函数" class="headerlink" title="Promise 函数"></a>Promise 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">   a.b</span><br><span class="line"> &#125;)</span><br><span class="line">&#125;<span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制台报错： <code>a is not defined.</code>，并没有被捕获。得出结论， try-catch 无法监听 Promise 函数中的错误。</p><h4 id="Ajax-函数"><a href="#Ajax-函数" class="headerlink" title="Ajax 函数"></a>Ajax 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> xhr = <span class="built_in">window</span>.XMLHttpRequest ? <span class="keyword">new</span> XMLHttpRequest() :</span><br><span class="line"> ActiveXObject(<span class="string">&quot;microsoft.XMLHttp&quot;</span>)</span><br><span class="line"> xhr.open(<span class="string">&quot;get&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line"> xhr.send();</span><br><span class="line"> xhr.onreadystatechange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (xhr.readystate == <span class="number">4</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">     <span class="keyword">var</span> data = xhr.responseTEXT;</span><br><span class="line">     <span class="keyword">return</span> data;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> ajax(<span class="string">&#x27;someurl&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ajax 中的请求出错，并未被捕获。得出结论 try-catch 无法监听 Ajax 函数中的错误。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于以上几种异步操作，我们看的出来 try-catch 并未帮我们监听的到里面的错误。原因是：<strong>javaScript 擎对异步方法进行 try/catch 操作只能捕获当次事件循环内的异常，对 call back 执行时抛出的异常将无能为力</strong>。但是对于异步操作，只要是代码逻辑没有问题，我们在适当的问题出口把问题暴露出去就可以了，比如 Promise 的 then，Ajax 的状态判断等等。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP相关知识</title>
      <link href="web/http/"/>
      <url>web/http/</url>
      
        <content type="html"><![CDATA[<h2 id="http-与-https"><a href="#http-与-https" class="headerlink" title="http 与 https"></a>http 与 https</h2><ol><li>http是超文本传输协议，是目前世界上使用最多的协议。</li><li>它是用于从www服务器传输超文本到本地浏览器的传输协议。</li><li>https是安全的http通道，在http下加入了 SSL层。</li><li>https协议需要CA证书，费用高。</li><li>另外，使用不同的链接方式，端口也不一样，一般来说，http协议是80端口，https是443端口</li></ol><h2 id="https的工作原理"><a href="#https的工作原理" class="headerlink" title="https的工作原理"></a>https的工作原理</h2><ol><li>客户使用https url访问，要求web服务器建立ssl链接</li><li>web服务器收到后，会将网站的证书（证书中含公钥）返回给客户端</li><li>客户端与服务器端开始协商ssl链接的安全等级，也就是加密等级。</li><li>协商一致，建立会话秘钥，然后网站加密，web服务器解密，开始通信。</li></ol><h2 id="http请求的方式"><a href="#http请求的方式" class="headerlink" title="http请求的方式"></a>http请求的方式</h2><ol><li><p>http1.0 三种请求：get,post head</p></li><li><p>http1.1 新增6种: options,put,patch,delete,trace,connect</p></li><li><p>get:： 请求页面信息，返回实体主体。</p></li><li><p>head： 类似于get请求，只不过返回的响应中没有具体内容，用户获取报头。</p></li><li><p>post 向指定资源提交数据进行处理请求，数据包含在请求体中</p></li></ol><h2 id="get与post"><a href="#get与post" class="headerlink" title="get与post"></a>get与post</h2><ol><li>get用于获取数据，post用于提交数据</li><li>get参数在url后，post可以在http body中提交</li><li>get在url长度有限制，post数据可以很大</li><li>get提交可以在浏览器缓存，post不会被浏览器缓存</li><li>get不安全，因为参数暴露在url中</li></ol><h2 id="输入URL到页面加载显示完成发生了什么"><a href="#输入URL到页面加载显示完成发生了什么" class="headerlink" title="输入URL到页面加载显示完成发生了什么"></a>输入URL到页面加载显示完成发生了什么</h2><ol><li>DNS解析</li><li>TCP连接</li><li>发送HTTP请求</li><li>服务器处理并返回HTTP报文</li><li>浏览器解析渲染</li><li>连接结束</li></ol><h2 id="一个图片url访问后直接下载怎样实现"><a href="#一个图片url访问后直接下载怎样实现" class="headerlink" title="一个图片url访问后直接下载怎样实现"></a>一个图片url访问后直接下载怎样实现</h2><p>请求的返回头里，用于浏览器解析的重要参数就是OSS的API文档的返回http头，决定用户下载行为的参数。</p><h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><ol><li>400： 请求无效：前端提交数据与后台实体不一致。</li><li>401： 需要用户验证。</li><li>403： 服务器得到请求，拒绝执行。</li><li>304： 未修改   如果客户端发送带条件的get请求且被允许，而文档的内容并没有改变</li></ol><h2 id="fetch发送2次请求的原因"><a href="#fetch发送2次请求的原因" class="headerlink" title="fetch发送2次请求的原因"></a>fetch发送2次请求的原因</h2><p>第一次发送Options请求，询问服务器是否支持修改的请求头，如果支持再发送。</p><h2 id="cookie-sessionStorage和localStorage"><a href="#cookie-sessionStorage和localStorage" class="headerlink" title="cookie,  sessionStorage和localStorage"></a>cookie,  sessionStorage和localStorage</h2><p>共同点： 都是保存在浏览器端，并且同源</p><p>不同点：</p><table><thead><tr><th align="center">比较内容</th><th align="center">cookie</th><th align="center">sessionStorage</th><th align="center">localStorage</th></tr></thead><tbody><tr><td align="center">数据</td><td align="center">始终在同源的http请求中携带（即使不需要）</td><td align="center">仅在本地保存</td><td align="center">仅在本地保存</td></tr><tr><td align="center">传递性</td><td align="center">在浏览器与服务器之间来回传递</td><td align="center">不会自动发送数据给服务器</td><td align="center">不会自动发送数据给服务器</td></tr><tr><td align="center">有效期</td><td align="center">在设置的时间内一直有效，即使浏览器或者窗口关闭</td><td align="center">仅在当前浏览器窗口关闭前有效</td><td align="center">始终有效，窗口或浏览器关闭也一直保存</td></tr><tr><td align="center">共享性</td><td align="center">所有同源窗口共享</td><td align="center"></td><td align="center">在所有同源窗口中都是共享</td></tr></tbody></table><h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h2><table><thead><tr><th align="left">URL</th><th align="left">说明</th><th align="left">是否允许通信</th></tr></thead><tbody><tr><td align="left">&lt;<a href="http://www.a.com/a.js">http://www.a.com/a.js</a><br><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">同一域名下</td><td align="left">允许</td></tr><tr><td align="left"><a href="http://www.a.com/lab/a.js">http://www.a.com/lab/a.js</a><br> <a href="http://www.a.com/script/b.js">http://www.a.com/script/b.js</a></td><td align="left">同一域名下不同文件夹</td><td align="left">允许</td></tr><tr><td align="left"><a href="http://www.a.com:8000/a.js">http://www.a.com:8000/a.js</a> <br><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">同一域名，不同端口</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br><a href="https://www.a.com/b.js">https://www.a.com/b.js</a></td><td align="left">同一域名，不同协议</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a><br> <a href="http://70.32.92.74/b.js">http://70.32.92.74/b.js</a></td><td align="left">域名和域名对应ip</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br><a href="http://script.a.com/b.js">http://script.a.com/b.js</a></td><td align="left">主域相同，子域不同</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br><a href="http://a.com/b.js">http://a.com/b.js</a></td><td align="left">同一域名，不同二级域名（同上）</td><td align="left">不允许（cookie这种情况下也不允许访问）</td></tr><tr><td align="left"><a href="http://www.cnblogs.com/a.js">http://www.cnblogs.com/a.js</a> <br><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">不同域名</td><td align="left">不允许</td></tr></tbody></table><blockquote><p>如果是协议与端口问题，前台是无能为力的</p></blockquote><ol><li>document.domain + iframe(主域相同)</li><li>动态创建script，script标签不受同源策略的限制</li><li>location.hash + iframe:  利用location.hash进行传值</li><li>window.name + iframe:  name值在不同页面加载后依旧存在，最大2M</li><li>postMessage (html5 中XMLHttpRequest level 2中的API)</li><li>CORS（IE中是xdr）: 使用自定义的http头 让浏览器与服务器进行沟通</li><li>JSNP:  回调函数与数据 ，回调函数是当响应到来时要放在当前页面被调用的函数，数据是传入回调函数中的json数据，也就是回调函数的参数。支持get请求，不知道post。</li><li>web sockets： 一种浏览器API，目标是在一个单独的持久连接上提供全双工，双向通信，只有在支持web socket协议的服务器上才能正常工作。</li></ol><h2 id="doctype-作用"><a href="#doctype-作用" class="headerlink" title="doctype 作用"></a>doctype 作用</h2><p>告诉浏览器以何种方式渲染页面，严格模式与混杂模式。</p><h2 id="cookie如何防范XSS攻击"><a href="#cookie如何防范XSS攻击" class="headerlink" title="cookie如何防范XSS攻击"></a>cookie如何防范XSS攻击</h2><p>XSS:  跨站脚本攻击</p><p>httponly- 这个属性可以防止，它可以禁止JavaScript脚本访问cookie。</p><p>secure- 这个属性告诉浏览器仅在请求为https的时候发送cookie。</p><h2 id="一句话概括RESTFUL"><a href="#一句话概括RESTFUL" class="headerlink" title="一句话概括RESTFUL"></a>一句话概括RESTFUL</h2><p>就是用URL定位资源，用HTTP描述操作。</p><h2 id="click在ios上有300ms延迟，原因及如何解决？"><a href="#click在ios上有300ms延迟，原因及如何解决？" class="headerlink" title="click在ios上有300ms延迟，原因及如何解决？"></a>click在ios上有300ms延迟，原因及如何解决？</h2><ol><li>粗暴型，禁用缩放。</li><li>使用fastclick，原理是监测到touchend事件后，立即模拟click事件，并且把浏览器30ms后真正的事件给阻断掉。</li></ol><h2 id="强缓存、协商缓存什么时候用哪个"><a href="#强缓存、协商缓存什么时候用哪个" class="headerlink" title="强缓存、协商缓存什么时候用哪个"></a>强缓存、协商缓存什么时候用哪个</h2><p>因为服务器上的资源不是一直固定不变的，大多数情况下它会更新，这个时候如果我们还访问本地缓存，那么对用户来说，那就相当于资源没有更新，用户看到的还是旧的资源；所以我们希望服务器上的资源更新了浏览器就请求新的资源，没有更新就使用本地的缓存，以最大程度的减少因网络请求而产生的资源浪费。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://uploadfiles.nowcoder.com/images/20190312/311436_1552361773903_9DC69E327B4B3691E94CD9D52D10E2C1" class="lazyload" data-srcset="https://uploadfiles.nowcoder.com/images/20190312/311436_1552361773903_9DC69E327B4B3691E94CD9D52D10E2C1" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="强缓存、协商缓存"/></div><span class="image-caption">强缓存、协商缓存</span></div><p>强缓存是利用http头中的<code>Expires</code>和<code>Cache-Control</code>两个字段来控制的，用来表示资源的缓存时间。</p><p>协商缓存就是由服务器来确定缓存资源是否可用，所以客户端与服务器端要通过某种标识来进行通信，从而让服务器判断请求资源是否可以缓存访问。协商缓存相关字段有Last-Modified/If-Modified-Since，Etag/If-None-Match</p><div class="tag link"><a class="link-card" title="参考链接，'https://segmentfault.com/a/1190000008956069'" href="https://wbig.gitee.io/cdn/img/assets/link.png"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">参考链接，'https://segmentfault.com/a/1190000008956069'</p><p class="url">https://wbig.gitee.io/cdn/img/assets/link.png</p></div></a></div><h2 id="前端优化"><a href="#前端优化" class="headerlink" title="前端优化"></a>前端优化</h2><ol><li>降低请求量： 合并资源，减少http请求数，minify/gzip压缩，webP，lazyLoad</li><li>加快请求速度： 预解析DNS， 减少域名数，并行加载，CDN并发</li><li>缓存： http协议缓存请求，离线缓存，离线数据缓存</li><li>渲染：js/css优化，加载顺序，服务端渲染，pipeline</li></ol><h2 id="csrf和xss的网络攻击及防范"><a href="#csrf和xss的网络攻击及防范" class="headerlink" title="csrf和xss的网络攻击及防范"></a>csrf和xss的网络攻击及防范</h2><p>CSRF：跨站请求伪造，可以理解为攻击者盗用了用户的身份，以用户的名义发送了恶意请求</p><p>XSS：跨站脚本攻击，是说攻击者通过注入恶意的脚本，在用户浏览网页的时候进行攻击，比如获取cookie</p><h2 id="查看网站性能"><a href="#查看网站性能" class="headerlink" title="查看网站性能"></a>查看网站性能</h2><ol><li>插入探针或者脚本</li><li>搭建环境，模拟用户访问请求，采集数据</li><li>第三方工具</li></ol>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> http协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello My Website</title>
      <link href="Hello-My-Website/"/>
      <url>Hello-My-Website/</url>
      
        <content type="html"><![CDATA[<h2 id="关于网站"><a href="#关于网站" class="headerlink" title="关于网站"></a>关于网站</h2><p>这是我的第一个线上网站，历经6天，才像个样子！</p><p>此网站部署在 <strong>Github</strong> ，我曾经尝试过本地服务器，但内网穿透比较难，知识有限，便放弃了！</p><p>使用Hexo和volantis主题配置。</p><p>然后把自己想说的，不想说的，该说的，不该说的，我应该都会在这里写下来。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://7.dusays.com/2020/10/12/9cec64fc316f0.jpg" class="lazyload" data-srcset="https://7.dusays.com/2020/10/12/9cec64fc316f0.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><p>网站暂未提交到百度检索收录！等真正稳定了，文章有内容干货的时候再提交！</p><p>如果您对网站有任何问题以及见解，欢迎斧正！</p><h2 id="鲸落"><a href="#鲸落" class="headerlink" title="鲸落"></a>鲸落</h2><p><strong>鲸落</strong>是我的QQ昵称，也伴随了我大学生活以及现在。一开始只是觉得该换用了很久很久不知道多久的昵称，后面渐渐了解它的含义。</p><p>行吧，就它了！懒得换，就是字数少了点！</p><p>有时回想起某一段时间，还真是五味杂陈。</p><p class='p center code large'>鲸落</p><p class='p center logo small'>A whale falls，all things are born</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Volantis </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
