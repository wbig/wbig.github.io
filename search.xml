<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>css中的基线</title>
      <link href="web/css-lineheight/"/>
      <url>web/css-lineheight/</url>
      
        <content type="html"><![CDATA[<h2 id="Line-height"><a href="#Line-height" class="headerlink" title="Line-height"></a>Line-height</h2><h3 id="行距、行间距"><a href="#行距、行间距" class="headerlink" title="行距、行间距"></a>行距、行间距</h3><p>行距： 相邻文本行间  <strong>上一个文本行基线</strong>  和  <strong>下一个文本行基线</strong> 之间的距离。</p><p>行间距： 相邻文本行间 <strong>上一个文本行下行线</strong> 和 <strong>下一个文本行上行线</strong> 之间的距离。</p><div class="note info"><p>行距 = 行间距 + 字体大小</p></div><p>在CSS中，CSS属性line-height则是用于设置真实的行距。从W3C Rec中看出，<strong>line-height就是行距</strong>, 而line-height的字面意思即为“行高”，推导结果CSS中行高即是行距。</p><p>了解了行高，行距，行间距。那么接下来介绍line-height的重要属性–垂直居中。</p><p>我们知道，<span class='p red'>行距(leading) = 行间距(line-space) + 字体大小(font-size)</span>。</p><p>行间距与字体大小都可以通过相应CSS属性设置，问题是行间距所占的空间是怎么分配的呢？</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200721213450432.png#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200721213450432.png#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="行间距分配"/></div><span class="image-caption">行间距分配</span></div><p>CSS采用的是将行间距对半开，然后分配到上下两端，这里引用了<span class='p '>Half-leading</span>的概念， <strong>Half-leading = 行距/2</strong></p><p>由于行距可能为负值，可以知道行间距可能为负数，那么垂直居中还有效么？</p><p>答案是<strong>肯定的</strong>，行间距为负数时，Half-leading 自然也是负数，只是上下两端从增加等量空间变为减少等量空间而已。如下例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative;top:100px;font-size:90px;line-height:10px;background:yellow;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;border:solid 1px red;line-height:10px;&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/2020072121430330.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/2020072121430330.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><h3 id="line-height属性"><a href="#line-height属性" class="headerlink" title="line-height属性"></a>line-height属性</h3><p><a href="https://www.runoob.com/cssref/pr-dim-line-height.html">CSS line-height 属性 | 菜鸟教程</a></p><p><a href="https://www.w3school.com.cn/cssref/pr_dim_line-height.asp">CSS line-height 属性 | W3school</a></p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>可能值</td><td>normal  | &lt;number&gt; | &lt;lenght&gt; | &lt;percentage&gt; | &lt;inherit&gt;</td></tr><tr><td>默认值</td><td>normal</td></tr><tr><td>继承性</td><td>yes</td></tr></tbody></table><h4 id="normal"><a href="#normal" class="headerlink" title="normal"></a>normal</h4><p>对于normal，其实就是一个值，但是由浏览器决定，实际值一般在<strong>1.0~1.2之间（闭区间）</strong></p><p>不同浏览器下，<code>normal</code>  不同；<br>同一浏览器下，<code>font-size</code> 不同，<code>normal</code> 也不同；<br>同一浏览器下，<code>font-size</code> 相同，<code>font-family</code> 不同，<code>normal</code> 也会变化。</p><p>normal 的平均值确实是 1.0~1.2(闭区间)，但是具体到特定浏览器、font-family 和 font-size时，normal值可能会大于1.2。</p><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>指定长度用于计算线盒高度，负值非法。</p><p>设置固定值，单位可以是 px 、pt 。</p><p>好处就是简单，设置是什么，<code>line-height</code>的实际高度就是什么。</p><p>坏处是子元素默认 <strong>继承</strong> 父容器的line-height，若子元素的font-size <strong>大于</strong> 父容器的font-size，那么子元素的文本行会什么密集。</p><p>解决方案，一般是采用 相对 font-size 实际大小 来设置 line-height 值的方式，如默认 <code>normal</code> 方法。</p><h4 id="percentage"><a href="#percentage" class="headerlink" title="percentage(%)"></a>percentage(%)</h4><p>计算值是百分比乘以元素计算字体大小，负值非法。</p><p>值的注意的是，<strong>参考系的确是font-size</strong>，但子元素继承的是父容器的实际 line-height 值，也就是说父容器设置为 <code>font-size:20px;line-height:200%;</code>，子元素继承的line-height值为 <strong>40px</strong>，而不是 200% ，因此又回到了 <em>方式</em>   的问题了。</p><h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><p>属性的使用值是 这个数字 乘以 元素的字体大小，负值非法，计算值与指定值相同。</p><p>和方式一样，<strong>以 font-size 为参考系</strong>，以相对值方式设置 line-height。</p><p>唯一不同的是，<strong>子元素继承的是父容器的值，参考系自动变为子元素的 font-size</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2em</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2</span>;</span><br></pre></td></tr></table></figure><p>上门的两句其实是等价的，若想将参考系 <strong>改</strong> 为根元素的 font-size ， 需要CSS3的新增<code>line-height:1.2rem;</code>。</p><h2 id="深入理解"><a href="#深入理解" class="headerlink" title="深入理解"></a>深入理解</h2><p>根据WCAG2.0(万维网内容可存取性指南)规定 “段落中的行距至少要1.5倍 ”，那么是否在body设置一下，就一劳永逸了呢？</p><div class="tabs" id="页面内不重复的id"><ul class="nav-tabs"><li class="tab active"><a href="#页面内不重复的id-1">CSS代码</a></li><li class="tab"><a href="#页面内不重复的id-2">HTML代码</a></li></ul><div class="tab-content"><div class="tab-pane active" id="页面内不重复的id-1"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"> <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">12px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="页面内不重复的id-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>深入理解 line-height 和 vertical-align<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>In my dual profession as an educator and health care provider, I have worked with numerous children infected with the virus that causes AIDS. The relationships that I have had with these special kids have been gifts in my life. They have taught me so many things, but I have especially learned that great courage can be found in the smallest of packages. Let me tell you about Tyler. <span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>bed and whispered, “I might die soon. I’m not scared. When I die, please dress me in red. Mom promised she’s coming to heaven, too. I’ll be playing when she gets there, and I want to make sure she can find me.”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724141405583.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724141405583.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="效果图"/></div><span class="image-caption">效果图</span></div><p>代码效果呈现如图，不难发现，对于 <code>h1</code> 标题来说，行距有点多，于是可以有如下配置：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line"> line-height:1.5;</span><br><span class="line">&#125;</span><br><span class="line">h1,h2,h3,h4,h5,h6&#123;</span><br><span class="line"> line-height:1.2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724142025651.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724142025651.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="右边为上图，对比可以发现左图行距确实减少了！"/></div><span class="image-caption">右边为上图，对比可以发现左图行距确实减少了！</span></div><h3 id="vertical-align如何对齐？"><a href="#vertical-align如何对齐？" class="headerlink" title="vertical-align如何对齐？"></a>vertical-align如何对齐？</h3><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p><a href="https://www.w3school.com.cn/css/pr_pos_vertical-align.asp">CSS vertical-align 属性 | W3school</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align">CSS vertical-align 属性 | MDN web docs</a></p><p>它的属性规则还是比较多的，但是也不能都记，或者用的时候挨个查。归纳一下不难发现</p><ol><li>对齐操作必定涉及操作元素和参考系元素，而<code>vertical-align</code>的值全是指的是<strong>参考系</strong>元素的位置，操作元素则以<code>baseline</code>或者<code>linebox</code>上中下作对齐；</li><li>默认对齐方式为<code>baseline</code>，数量值均是相对于<code>baseline</code>而言。</li></ol><div class="note warning"><p>vertical-align 仅对 inline-level 和 table-cell 元素有效。</p></div><h5 id="默认baseline"><a href="#默认baseline" class="headerlink" title="默认baseline"></a>默认baseline</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724143012354.png#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724143012354.png#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"/></div><span class="image-caption">baseline对齐</span></div><p>这里的<strong>x for reference frame</strong>作为参考系，它的 <code>baseline</code> 就是 <strong>line-height x vertical-align</strong> 要对齐的。</p><p>在此 <code>baseline</code> 的基础上做出如下设置</p><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>在<code>span</code>中设置 <code>vertical-align: 10px;</code></p>            </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:10px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724145733526.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724145733526.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vertical-align:10px;"/></div><span class="image-caption">vertical-align:10px;</span></div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>在<code>span</code>中设置 <code>vertical-align: -10px;</code></p>            </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:-10px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724145750426.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724145750426.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vertical-align: -10px;"/></div><span class="image-caption">vertical-align: -10px;</span></div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>在<code>div</code>中设置<code>line-height:1;</code>， 同时在<code>span</code>中设置 <code>vertical-align:50%;</code></p>            </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;line-height:1;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:50%;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724145757959.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724145757959.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>在<code>div</code>中设置<code>line-height:1;</code>， 同时在<code>span</code>中设置 <code>vertical-align: -50%;</code></p>            </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;line-height:1;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align: -50%;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200724145812421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200724145812421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><h5 id="top"><a href="#top" class="headerlink" title="top"></a>top</h5><p>把元素 line box 上边框对齐父元素的 line box 上边框</p><h5 id="text-top"><a href="#text-top" class="headerlink" title="text-top"></a>text-top</h5><p>把元素的 line box 上边框对齐父元素的 ascent(即 content top edge)</p><h5 id="middle"><a href="#middle" class="headerlink" title="middle"></a>middle</h5><p>把元素 line box 中垂点与父元素基线 + x-height/2 的高度对齐</p><h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><p>刚刚换了新的markdown标签，用起来比较费劲，码字效率比较低，还在熟悉中。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js的console</title>
      <link href="web/js-console/"/>
      <url>web/js-console/</url>
      
        <content type="html"><![CDATA[<h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><p>第一印象便是<code>console.log</code>，通过它在浏览器控制台进行调试输出。但除此之外还有许多方法。<br>比如在访问百度首页时候的控制台，会有以下的内容。但是仔细一看，你会发现，<strong>它有颜色</strong>。怎么做到的呢？</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200720204801204.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center ,alt=百度首页控制台" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720204801204.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center ,alt=百度首页控制台" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><p>其实不难发现，输入<code>console</code>，可知它是一个对象，里面有着高达14个方法，而我们最常用只有一个<code>log()</code>，可怕。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console">Console - Web API 接口参考 | MDN</a></p><p><a href="https://www.runoob.com/w3cnote/javascript-console-object.html">JavaScript Console 对象 | 菜鸟教程</a></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/2020072020434388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/2020072020434388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="console方法"/></div><span class="image-caption">console方法</span></div><p>通过文档我们清晰的知道各个方法的作用，以及使用方法。</p><p>通过占位符，可以改变输出的内容和样式。其中 <code>%c</code> 被称为 CSS占位符。</p><h2 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h2><h3 id="console-log"><a href="#console-log" class="headerlink" title="console.log()"></a>console.log()</h3><p>首先，除了<code>console.log(object)</code>这种语法，还有 <code>console.log(object, otherObject, string)</code> 将所有东西都整齐的打印出来。另外，还有 <code>console.log(msg, value)</code>，通过占位符来输出，执行方式与 <strong>C 语言</strong>的输出类似。</p><p>对于 <code>%c</code>，输出样式。</p><p>一个 <code>%c</code> 是将此后所有内容都进行渲染</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton&#x27;</span>, <span class="string">&#x27;color: white; background-color: orange; padding:2px 5px; border-radius: 2px&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200720211026483.png#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720211026483.png#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="一个%c"/></div><span class="image-caption">一个%c</span></div><p><strong>两个</strong> <code>%c</code> 则是对其中间内容渲染。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton%c not a div&#x27;</span>, <span class="string">&#x27;color: white; background-color:orange; padding: 2px 5px; border-radius: 2px&#x27;</span>,<span class="string">&#x27;color: &quot;auto&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200720211045409.png#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720211045409.png#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="两个%c"/></div><span class="image-caption">两个%c</span></div><p>当然渲染的只是样式，没有实质性的功能（按钮，点击事件等）</p><p>如果想 <code>%c</code> <strong>展示</strong>出来呢? 与 <code>\</code> 类似，写两个即可，比如将上述的语句展示出来。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton%%c not a div&#x27;</span>, <span class="string">&#x27;color: white; background-color:orange; padding: 2px 5px; border-radius: 2px&#x27;</span>,<span class="string">&#x27;color: &quot;auto&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://img-blog.csdnimg.cn/20200720211625990.png#pic_center,alt=显示%c" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720211625990.png#pic_center,alt=显示%c" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><h3 id="console-dir"><a href="#console-dir" class="headerlink" title="console.dir()"></a>console.dir()</h3><p>通常看，它与 <code>log()</code> 的功能非常类似，但也有略微不同，主要在对文档结构的输出方面。</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200720212322555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720212322555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="log()与dir()"></p>            </div><p>展开来看，<code>log</code> 只是输出了文档结构的内容，怎么写的怎么输出。清晰展示DOM节点，当我们选中时候，还可以跳转子DOM节点。</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200720212849794.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720212849794.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="dir()指向dom节点"></p>            </div><p>而 <code>dir()</code> 却是一种更对象化的输出方式观察元素节点，在监测元素节点方面，这种结果无疑是最好的。</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200720212627610.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720212627610.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="dir()输出"></p>            </div><h3 id="console-warn"><a href="#console-warn" class="headerlink" title="console.warn()"></a>console.warn()</h3><p>它可能是 <code>log()</code> 最直接明显的替换产生的方法，它的级别是<strong>warn级别</strong>而不是一个info级别，你可以将所有的 <code>console.log()</code> 过滤掉只留下  <code>console.warn()</code>。</p><p>在Vue的部分源码中也是使用 <code>console.warn()</code> 来操作的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;vue.js</span><br><span class="line">tip &#x3D; function (msg, vm) &#123;</span><br><span class="line"> if (hasConsole &amp;&amp; (!config.silent)) &#123;</span><br><span class="line">  console.warn(&quot;[Vue tip]: &quot; + msg + (vm ? generateComponentTrace(vm) : &#39;&#39;));</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="console-table"><a href="#console-table" class="headerlink" title="console.table()"></a>console.table()</h3><p>这个，就是将对象数组展示为列表的数据方法，变得更加简洁可观。例如对一个对象数组使用此方法。</p><p>对于 <code>log()</code> 输出结果是一个小箭头的省略形式，展开来看，可以清晰的查看对象。</p><p>而 <code>table()</code> 的输出更加简洁，更直观展示。并且值得一提的是，可以通过第一行的右上角箭头可以进行排序。<code>table()</code> 最多只处理1000行的数据能力，不适用所有数据集合。</p><p>当然如果只想要某一列展示，可以通过第二个参数进行传递。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.table(transactions,[<span class="string">&quot;id&quot;</span>,<span class="string">&quot;price&quot;</span>])</span><br></pre></td></tr></table></figure><div class="tabs" id="log与table"><ul class="nav-tabs"><li class="tab active"><a href="#log与table-1">log()输出</a></li><li class="tab"><a href="#log与table-2">table()输出</a></li></ul><div class="tab-content"><div class="tab-pane active" id="log与table-1"><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200720213851981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720213851981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="log()输出"></p>            </div></div><div class="tab-pane" id="log与table-2"><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200720214331357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720214331357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="table输出结果"></p>            </div></div></div></div><h3 id="console-assert"><a href="#console-assert" class="headerlink" title="console.assert()"></a>console.assert()</h3><p>它的第一个参数是 <code>falsey</code> 时，与 <code>log()</code> 函数无异。当第一个参数是真值的时候什么都不做。</p><div class="note warning"><p>牢记，它的作用是判断，而不是过滤。</p></div><p>它的使用场景与 循环时候要显示特殊的 数据相似。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(obj.num === <span class="number">3</span>)&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设我们上面的值在时间戳里有一个 <code>null</code> 或者 <code>0</code>，这会破坏代码日期格式。</p><p>当和任何有效的事物对象一起使用时会跳过。但是有一个触发了我们的日志记录，因为时间戳在 <code>0</code> 和 <code>null</code> 时为假值。</p><p>有时候，想实现更加复杂的场景，举例，对于上述表格中看到了关于用户<em>WAL2025</em>的数据，并想展示来自它们的事务。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(transactions.buyer === <span class="string">&#x27;WAL2025&#x27;</span>, transactions);</span><br></pre></td></tr></table></figure><p>看起来没毛病，但是并没有用，<strong>牢记，场景必须是否定态，它的作用是判断，而不是过滤。</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(transactions.buyer !== <span class="string">&#x27;WAL2025&#x27;</span>, transactions);</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>剩下的方法，演示过于困难或者简单，还是看文档理解比较好。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console">Console - Web API 接口参考 | MDN</a></p><p><a href="https://www.runoob.com/w3cnote/javascript-console-object.html">JavaScript Console 对象 | 菜鸟教程</a></p><p>其他方法的存在，让我们可以得到比 <code>log()</code> 的信息更多一些，并且不需要调试器的情况下，这些工具还是很有用的。</p><h2 id="附图"><a href="#附图" class="headerlink" title="附图"></a>附图</h2><p>简洁直观的理解使用 <code>console</code></p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200720193952635.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200720193952635.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_16,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="console cheatsheet,图片来源：B站Zhangyaing"></p>            </div>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>try-catch监听多线程</title>
      <link href="web/js-trycatch/"/>
      <url>web/js-trycatch/</url>
      
        <content type="html"><![CDATA[<h2 id="try-catch-函数"><a href="#try-catch-函数" class="headerlink" title="try-catch 函数"></a>try-catch 函数</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p><strong>当 JavaScript 引擎执行 JavaScript 代码时，可能会发生各种错误</strong>，可能是语法错误，通常是程序员造成的编码错误或错别字。可能是拼写错误或语言中缺少的功能（可能由于浏览器差异）。可能是由于来自服务器或用户的错误输出而导致的错误。当然，也可能是由于许多其他不可预知的因素。当错误发生时，<strong>当事情出问题时，JavaScript 引擎通常会停止，并生成一个错误消息。这种情况被称为：JavaScript 抛出异常</strong>。对于可能出现的问题的代码我们需要预判，这就涉及到异常的测试与捕获。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">//在这里运行代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (err) &#123;</span><br><span class="line"> <span class="comment">//在这里处理错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>try 语句允许我们定义在执行时进行错误测试的代码块。<br>catch 语句允许我们定义当 try 代码块发生错误时，所执行的代码块。<br>JavaScript 语句 try 和 catch 是成对出现的。</p><p>有一个运行代码的函数 <code>runCode</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runCode</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">eval</span>(code);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们执行 runCode(‘1+1’) 可以得到 2，这里利用 <strong>eval 函数特性</strong>，可以执行字符串。eval 并不是我们这篇文章的主要内容。对于 code 是用户输入，当用户输入的内容是一段错误代码，我们的函数，就会报错，进而影响之后的逻辑执行。这是我们需要利用 try-catch 进行捕获。代码改写如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runCode</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">// 接下来执行的 eval(code)可能会出错</span></span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">eval</span>(code);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="comment">// 上面的部分报错，会对外输出错误信息，并不会终止程序</span></span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;代码存在错误&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我执行 runCode(‘aaaaa’), 会给我们提示信息： 代码存在错误，这样我们的错误就成功捕获，并不影响后面的逻辑执行。</p><h3 id="使用-try-catch-的建议"><a href="#使用-try-catch-的建议" class="headerlink" title="使用 try-catch 的建议"></a>使用 try-catch 的建议</h3><p>try catch 的使用，<strong>永远应该放在你的控制范围之内，而不应该防范未知的错误</strong>。也就是说你很清楚知道这里是有可能”出错“的，而且你很清楚知道什么前提下会出错，你就是要故意利用报错信息来区分错误，后续的程序会解决所有的出错，让程序继续执行。如果让用户先发现你根本没预料到的错误，而不是你先发现错误，你是失职的。</p><h2 id="try-catch-与多线程"><a href="#try-catch-与多线程" class="headerlink" title="try-catch 与多线程"></a>try-catch 与多线程</h2><h3 id="JS-中的“多线程”"><a href="#JS-中的“多线程”" class="headerlink" title="JS 中的“多线程”"></a>JS 中的“多线程”</h3><p>浏览器中的 JavaScript 确实是以单线程的方式执行的，也就是说 JavaScript 执行使用一个主线程，但是 JavaScript 提供了异步操作，比如定时器(setTimeout、setInterval)事件、Ajax 请求、Promise, I/O 等。它们将会被放入浏览器的事件任务队列（event loop）中去，等到 JavaScript 运行时执行线程空闲时候，事件队列才会按照先进先出的原则被一一执行。但是对于以上的异步操作过程中，能进行的计时，发送请求，I/O 操作都是其他的线程在做的事情，所以说是“多线程”。</p><h3 id="多线程不等于异步"><a href="#多线程不等于异步" class="headerlink" title="多线程不等于异步"></a>多线程不等于异步</h3><p>异步和多线程并不是一个同等关系,<strong>异步是最终目的,多线程只是我们实现异步的一种手段</strong>。异步是当一个调用请求发送给被调用者,而调用者不用等待其结果的返回而可以做其它的事情。实现异步可以采用多线程技术或则交给另外的进程来处理。</p><h4 id="setTimeout-函数"><a href="#setTimeout-函数" class="headerlink" title="setTimeout 函数"></a>setTimeout 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a.b)</span><br><span class="line"> &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制台报错： <code>a is not defined.</code>，并没有被捕获。得出结论， try-catch 无法监听 setTime 函数中的错误。</p><h4 id="Promise-函数"><a href="#Promise-函数" class="headerlink" title="Promise 函数"></a>Promise 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">   a.b</span><br><span class="line"> &#125;)</span><br><span class="line">&#125;<span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制台报错： <code>a is not defined.</code>，并没有被捕获。得出结论， try-catch 无法监听 Promise 函数中的错误。</p><h4 id="Ajax-函数"><a href="#Ajax-函数" class="headerlink" title="Ajax 函数"></a>Ajax 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> xhr = <span class="built_in">window</span>.XMLHttpRequest ? <span class="keyword">new</span> XMLHttpRequest() :</span><br><span class="line"> ActiveXObject(<span class="string">&quot;microsoft.XMLHttp&quot;</span>)</span><br><span class="line"> xhr.open(<span class="string">&quot;get&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line"> xhr.send();</span><br><span class="line"> xhr.onreadystatechange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (xhr.readystate == <span class="number">4</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">     <span class="keyword">var</span> data = xhr.responseTEXT;</span><br><span class="line">     <span class="keyword">return</span> data;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> ajax(<span class="string">&#x27;someurl&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ajax 中的请求出错，并未被捕获。得出结论 try-catch 无法监听 Ajax 函数中的错误。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于以上几种异步操作，我们看的出来 try-catch 并未帮我们监听的到里面的错误。原因是：<strong>javaScript 擎对异步方法进行 try/catch 操作只能捕获当次事件循环内的异常，对 call back 执行时抛出的异常将无能为力</strong>。但是对于异步操作，只要是代码逻辑没有问题，我们在适当的问题出口把问题暴露出去就可以了，比如 Promise 的 then，Ajax 的状态判断等等。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS相关知识</title>
      <link href="web/css/"/>
      <url>web/css/</url>
      
        <content type="html"><![CDATA[<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p>层叠样式表</p><h2 id="画一条0-5px的线"><a href="#画一条0-5px的线" class="headerlink" title="画一条0.5px的线"></a>画一条0.5px的线</h2><ol><li>采用meta viewport</li><li>border-image的方式</li><li>采用transform: scale()的方式</li></ol><h2 id="link标签和import标签的区别"><a href="#link标签和import标签的区别" class="headerlink" title="link标签和import标签的区别"></a>link标签和import标签的区别</h2><ol><li>link属于html标签，而@import是css提供的</li><li>页面被加载时，link会同时被加载，而@import引用的css会等页面加载结束后加载</li><li>link权重高于@import</li></ol><h2 id="transition与animation"><a href="#transition与animation" class="headerlink" title="transition与animation"></a>transition与animation</h2><ol><li>大部分属性是相同的，都是随时间改变的元素的属性值</li><li>transition需要触发一个事件才能改变属性</li></ol><h2 id="flex弹性布局"><a href="#flex弹性布局" class="headerlink" title="flex弹性布局"></a>flex弹性布局</h2><div class="tag link"><a class="link-card" title="Flex布局教程-阮一峰" href="<http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool>"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Flex布局教程-阮一峰</p><p class="url"><http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html?utm_source=tuicool></p></div></a></div><h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><p>块级格式化上下文，用于清楚浮动，防止margin重叠等</p><p>会生成BFC的元素：</p><ol><li>根元素</li><li>float 不为 none的元素</li><li>position 为 fixed 和 absolute 的元素</li><li>display 为 inline-block 、table-cell 、table-caption 、flex 、 inline-flex 的元素</li><li>overflow 不为 visible 的元素</li></ol><h2 id="垂直居中的方法"><a href="#垂直居中的方法" class="headerlink" title="垂直居中的方法"></a>垂直居中的方法</h2><ol><li>margin: auto方式</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">margin</span>:auto;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">rigth</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>四边为 0 ，具体原理可以看</p><div class="tag link"><a class="link-card" title="margin: 0 auto为什么会居中？" href="<https://www.cnblogs.com/sunhang32/p/11826580.html>"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">margin: 0 auto为什么会居中？</p><p class="url"><https://www.cnblogs.com/sunhang32/p/11826580.html></p></div></a></div><ol start="2"><li>margin负值</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#379</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inner</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">480px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">380px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#746</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">190px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">240px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>margin 的 top 和 left 值为宽高的一般<br>3. table-cell</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>:table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>:middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置到父元素，这样子元素可以实现垂直居中。<br>4. 利用flex</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置到父元素，这样子元素可以实现垂直居中。<br>5. 利用calc函数</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">50px</span>);</span><br><span class="line">    <span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">50px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>clac函数是 CSS3 新增，用于计算<br>6. 利用translate函数</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="关于js动画和css3动画的差异性"><a href="#关于js动画和css3动画的差异性" class="headerlink" title="关于js动画和css3动画的差异性"></a>关于js动画和css3动画的差异性</h2><p>渲染线程分为 Main thread 和 Compositor thread。</p><p>如果 CSS3 动画只改变 transform 和 opacity，这时整个 CSS3 动画得以在 Compositor trhead 完成（而js动画则会在 Main thread 执行，然后出发 Compositor thread 进行下一步操作）</p><div class="note warning"><p><strong>特别注意的是</strong></p><p>如果改变 transform 和 opacity 是不会 layout 或者 paint 的。</p></div>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP相关知识</title>
      <link href="web/http/"/>
      <url>web/http/</url>
      
        <content type="html"><![CDATA[<h2 id="http-与-https"><a href="#http-与-https" class="headerlink" title="http 与 https"></a>http 与 https</h2><ol><li>http是超文本传输协议，是目前世界上使用最多的协议。</li><li>它是用于从www服务器传输超文本到本地浏览器的传输协议。</li><li>https是安全的http通道，在http下加入了 SSL层。</li><li>https协议需要CA证书，费用高。</li><li>另外，使用不同的链接方式，端口也不一样，一般来说，http协议是80端口，https是443端口</li></ol><h2 id="https的工作原理"><a href="#https的工作原理" class="headerlink" title="https的工作原理"></a>https的工作原理</h2><ol><li>客户使用https url访问，要求web服务器建立ssl链接</li><li>web服务器收到后，会将网站的证书（证书中含公钥）返回给客户端</li><li>客户端与服务器端开始协商ssl链接的安全等级，也就是加密等级。</li><li>协商一致，建立会话秘钥，然后网站加密，web服务器解密，开始通信。</li></ol><h2 id="http请求的方式"><a href="#http请求的方式" class="headerlink" title="http请求的方式"></a>http请求的方式</h2><ol><li><p>http1.0 三种请求：get,post head</p></li><li><p>http1.1 新增6种: options,put,patch,delete,trace,connect</p></li><li><p>get:： 请求页面信息，返回实体主体。</p></li><li><p>head： 类似于get请求，只不过返回的响应中没有具体内容，用户获取报头。</p></li><li><p>post 向指定资源提交数据进行处理请求，数据包含在请求体中</p></li></ol><h2 id="get与post"><a href="#get与post" class="headerlink" title="get与post"></a>get与post</h2><ol><li>get用于获取数据，post用于提交数据</li><li>get参数在url后，post可以在http body中提交</li><li>get在url长度有限制，post数据可以很大</li><li>get提交可以在浏览器缓存，post不会被浏览器缓存</li><li>get不安全，因为参数暴露在url中</li></ol><h2 id="输入URL到页面加载显示完成发生了什么"><a href="#输入URL到页面加载显示完成发生了什么" class="headerlink" title="输入URL到页面加载显示完成发生了什么?"></a>输入URL到页面加载显示完成发生了什么?</h2><ol><li>DNS解析</li><li>TCP连接</li><li>发送HTTP请求</li><li>服务器处理并返回HTTP报文</li><li>浏览器解析渲染</li><li>连接结束</li></ol><h2 id="一个图片url访问后直接下载怎样实现？"><a href="#一个图片url访问后直接下载怎样实现？" class="headerlink" title="一个图片url访问后直接下载怎样实现？"></a>一个图片url访问后直接下载怎样实现？</h2><p>请求的返回头里，用于浏览器解析的重要参数就是OSS的API文档的返回http头，决定用户下载行为的参数。</p><h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><ol><li>400： 请求无效：前端提交数据与后台实体不一致。</li><li>401： 需要用户验证。</li><li>403： 服务器得到请求，拒绝执行。</li><li>304： 未修改   如果客户端发送带条件的get请求且被允许，而文档的内容并没有改变</li></ol><h2 id="fetch发送2次请求的原因"><a href="#fetch发送2次请求的原因" class="headerlink" title="fetch发送2次请求的原因"></a>fetch发送2次请求的原因</h2><p>第一次发送Options请求，询问服务器是否支持修改的请求头，如果支持再发送。</p><h2 id="cookie-sessionStorage和localStorage"><a href="#cookie-sessionStorage和localStorage" class="headerlink" title="cookie,  sessionStorage和localStorage"></a>cookie,  sessionStorage和localStorage</h2><p>共同点： 都是保存在浏览器端，并且同源</p><p>不同点：</p><table><thead><tr><th align="center">比较内容</th><th align="center">cookie</th><th align="center">sessionStorage</th><th align="center">localStorage</th></tr></thead><tbody><tr><td align="center">数据</td><td align="center">始终在同源的http请求中携带（即使不需要）</td><td align="center">仅在本地保存</td><td align="center">仅在本地保存</td></tr><tr><td align="center">传递性</td><td align="center">在浏览器与服务器之间来回传递</td><td align="center">不会自动发送数据给服务器</td><td align="center">不会自动发送数据给服务器</td></tr><tr><td align="center">有效期</td><td align="center">在设置的时间内一直有效，即使浏览器或者窗口关闭</td><td align="center">仅在当前浏览器窗口关闭前有效</td><td align="center">始终有效，窗口或浏览器关闭也一直保存</td></tr><tr><td align="center">共享性</td><td align="center">所有同源窗口共享</td><td align="center"></td><td align="center">在所有同源窗口中都是共享</td></tr></tbody></table><h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h2><table><thead><tr><th align="left">URL</th><th align="left">说明</th><th align="left">是否允许通信</th></tr></thead><tbody><tr><td align="left">&lt;<a href="http://www.a.com/a.js">http://www.a.com/a.js</a><br/><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">同一域名下</td><td align="left">允许</td></tr><tr><td align="left"><a href="http://www.a.com/lab/a.js">http://www.a.com/lab/a.js</a><br /> <a href="http://www.a.com/script/b.js">http://www.a.com/script/b.js</a></td><td align="left">同一域名下不同文件夹</td><td align="left">允许</td></tr><tr><td align="left"><a href="http://www.a.com:8000/a.js">http://www.a.com:8000/a.js</a> <br /><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">同一域名，不同端口</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br /><a href="https://www.a.com/b.js">https://www.a.com/b.js</a></td><td align="left">同一域名，不同协议</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a><br/> <a href="http://70.32.92.74/b.js">http://70.32.92.74/b.js</a></td><td align="left">域名和域名对应ip</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br/><a href="http://script.a.com/b.js">http://script.a.com/b.js</a></td><td align="left">主域相同，子域不同</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br/><a href="http://a.com/b.js">http://a.com/b.js</a></td><td align="left">同一域名，不同二级域名（同上）</td><td align="left">不允许（cookie这种情况下也不允许访问）</td></tr><tr><td align="left"><a href="http://www.cnblogs.com/a.js">http://www.cnblogs.com/a.js</a> <br/><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">不同域名</td><td align="left">不允许</td></tr></tbody></table><blockquote><p>如果是协议与端口问题，前台是无能为力的</p></blockquote><ol><li>document.domain + iframe(主域相同)</li><li>动态创建script，script标签不受同源策略的限制</li><li>location.hash + iframe:  利用location.hash进行传值</li><li>window.name + iframe:  name值在不同页面加载后依旧存在，最大2M</li><li>postMessage (html5 中XMLHttpRequest level 2中的API)</li><li>CORS（IE中是xdr）: 使用自定义的http头 让浏览器与服务器进行沟通</li><li>JSNP:  回调函数与数据 ，回调函数是当响应到来时要放在当前页面被调用的函数，数据是传入回调函数中的json数据，也就是回调函数的参数。支持get请求，不知道post。</li><li>web sockets： 一种浏览器API，目标是在一个单独的持久连接上提供全双工，双向通信，只有在支持web socket协议的服务器上才能正常工作。</li></ol><h2 id="doctype-作用"><a href="#doctype-作用" class="headerlink" title="doctype 作用"></a>doctype 作用</h2><p>告诉浏览器以何种方式渲染页面，严格模式与混杂模式。</p><h2 id="cookie如何防范XSS攻击"><a href="#cookie如何防范XSS攻击" class="headerlink" title="cookie如何防范XSS攻击"></a>cookie如何防范XSS攻击</h2><p>XSS:  跨站脚本攻击</p><p>httponly- 这个属性可以防止，它可以禁止JavaScript脚本访问cookie。</p><p>secure- 这个属性告诉浏览器仅在请求为https的时候发送cookie。</p><h2 id="一句话概括RESTFUL"><a href="#一句话概括RESTFUL" class="headerlink" title="一句话概括RESTFUL"></a>一句话概括RESTFUL</h2><p>就是用URL定位资源，用HTTP描述操作。</p><h2 id="click在ios上有300ms延迟，原因及如何解决？"><a href="#click在ios上有300ms延迟，原因及如何解决？" class="headerlink" title="click在ios上有300ms延迟，原因及如何解决？"></a>click在ios上有300ms延迟，原因及如何解决？</h2><ol><li>粗暴型，禁用缩放。</li><li>使用fastclick，原理是监测到touchend事件后，立即模拟click事件，并且把浏览器30ms后真正的事件给阻断掉。</li></ol><h2 id="强缓存、协商缓存什么时候用哪个"><a href="#强缓存、协商缓存什么时候用哪个" class="headerlink" title="强缓存、协商缓存什么时候用哪个"></a>强缓存、协商缓存什么时候用哪个</h2><p>因为服务器上的资源不是一直固定不变的，大多数情况下它会更新，这个时候如果我们还访问本地缓存，那么对用户来说，那就相当于资源没有更新，用户看到的还是旧的资源；所以我们希望服务器上的资源更新了浏览器就请求新的资源，没有更新就使用本地的缓存，以最大程度的减少因网络请求而产生的资源浪费。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://uploadfiles.nowcoder.com/images/20190312/311436_1552361773903_9DC69E327B4B3691E94CD9D52D10E2C1" class="lazyload" data-srcset="https://uploadfiles.nowcoder.com/images/20190312/311436_1552361773903_9DC69E327B4B3691E94CD9D52D10E2C1" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><p>强缓存是利用http头中的<code>Expires</code>和<code>Cache-Control</code>两个字段来控制的，用来表示资源的缓存时间。</p><p>协商缓存就是由服务器来确定缓存资源是否可用，所以客户端与服务器端要通过某种标识来进行通信，从而让服务器判断请求资源是否可以缓存访问。协商缓存相关字段有Last-Modified/If-Modified-Since，Etag/If-None-Match</p><h2 id="前端优化"><a href="#前端优化" class="headerlink" title="前端优化"></a>前端优化</h2><ol><li>降低请求量： 合并资源，减少http请求数，minify/gzip压缩，webP，lazyLoad</li><li>加快请求速度： 预解析DNS， 减少域名数，并行加载，CDN并发</li><li>缓存： http协议缓存请求，离线缓存，离线数据缓存</li><li>渲染：js/css优化，加载顺序，服务端渲染，pipeline</li></ol><h2 id="浏览器在生成页面的时候，会生成那两颗树"><a href="#浏览器在生成页面的时候，会生成那两颗树" class="headerlink" title="浏览器在生成页面的时候，会生成那两颗树"></a>浏览器在生成页面的时候，会生成那两颗树</h2><p>DOM树，CSSOM规则树</p><h2 id="csrf和xss的网络攻击及防范"><a href="#csrf和xss的网络攻击及防范" class="headerlink" title="csrf和xss的网络攻击及防范"></a>csrf和xss的网络攻击及防范</h2><p>CSRF：跨站请求伪造，可以理解为攻击者盗用了用户的身份，以用户的名义发送了恶意请求</p><p>XSS：跨站脚本攻击，是说攻击者通过注入恶意的脚本，在用户浏览网页的时候进行攻击，比如获取cookie</p><h2 id="查看网站性能"><a href="#查看网站性能" class="headerlink" title="查看网站性能"></a>查看网站性能</h2><ol><li><p>插入探针或者脚本</p></li><li><p>搭建环境，模拟用户访问请求，采集数据</p></li><li><p>第三方工具</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> http协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js 闭包</title>
      <link href="web/js-closure/"/>
      <url>web/js-closure/</url>
      
        <content type="html"><![CDATA[<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bbb = <span class="number">234</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(aaa);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> aaa = <span class="number">123</span>;</span><br><span class="line">    <span class="keyword">return</span> b;             <span class="comment">//  关键</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  glob = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> demo = a();</span><br><span class="line">demo();</span><br></pre></td></tr></table></figure><p>a()执行，产生自己的上下文，同时定义b 。<br><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img07.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>a() 执行完毕后，因为<code>return b</code> 导致，b没有将a 产生的AO的线砍掉。</p><p>当执行b()时，即<code>demo()</code>，寻找<code>aaa</code>变量，在a的AO中找到。于是打印出  <code>123</code></p><p><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img08.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><blockquote><p>以上过程叫做闭包。<br>但凡是内部的函数，保存到了外部，一定产生闭包。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        num++;</span><br><span class="line">        <span class="built_in">console</span>.log(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> demo = a();</span><br><span class="line">demo();  <span class="comment">//101</span></span><br><span class="line">demo();  <span class="comment">//102</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="闭包作用"><a href="#闭包作用" class="headerlink" title="闭包作用"></a>闭包作用</h3><ul><li><p>实现公有变量</p><ul><li>函数累加器</li></ul></li><li><p>可以做缓存（存储结构）</p><ul><li>eater<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eater</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> food = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;</span><br><span class="line">        eat: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;i am eating&quot;</span> + food);</span><br><span class="line">            food = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        push: <span class="function"><span class="keyword">function</span>(<span class="params">myFood</span>)</span>&#123;</span><br><span class="line">            food = myFood</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> eater1 = eater();</span><br><span class="line"></span><br><span class="line">eater1.push(<span class="string">&#x27;banana&#x27;</span>);</span><br><span class="line">eater1.eat();</span><br><span class="line"></span><br></pre></td></tr></table></figure>eater() 中的food相当于隐式的存储结构，缓存的应用。</li></ul></li><li><p>可以实现封装，属性私有化</p><ul><li>Person();</li></ul></li><li><p>模块化开发，防止污染全局变量</p></li></ul><h3 id="闭包后果"><a href="#闭包后果" class="headerlink" title="闭包后果"></a>闭包后果</h3><p>当内部函数被保存到外部时，将会产生闭包。闭包会导致原有作用域链不释放，造成内存泄露。</p><blockquote><p>内存泄露：指程序中己动态分配的堆内存由于某种原因程序未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃等严重后果。</p></blockquote><h2 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h2><p>此类函数没有声明，执行完就被销毁（释放），适合做初始化工作。</p><ul><li>只有表达式才能被执行符号<code>()</code>执行</li><li>能被执行符号<code>()</code>执行的表达式，函数的名字就会被自动忽略<ul><li>能被执行符号<code>()</code>执行的表达式，也就成为了立即执行函数 </li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js预编译</title>
      <link href="web/js-function/"/>
      <url>web/js-function/</url>
      
        <content type="html"><![CDATA[<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span> <span class="title">abc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test 是正常的，  abc  is undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们用的一般都是匿名表达式。</p><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">11</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>当我们实参比形参多的时候，</p><p>实参都有地方放。</p><p>其实，在每一个函数中 都有一个 <code>arguments</code></p><p>arguments 是一个类似数组的东西，放着，[11, 2, 3]  叫做实参列表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(arguments)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;  --&gt;  [11, 2, 3]</span><br></pre></td></tr></table></figure><p>映射规则，arguments 与形参列表的变量值一样</p><p>形参变化，arguments 一致变化。相反成立</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    a = <span class="number">2</span>               <span class="comment">// 则 arguments[0] 也变为2</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">2</span>    <span class="comment">// 则 a 也变为2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><blockquote><p>但是，实参列表有几个，arguments中就有几个，不随多余的形参变化。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//即使 </span></span><br><span class="line">    b =<span class="number">2</span>      <span class="comment">// arguments[1] 是undefined。不变化</span></span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;use strict&quot;</span><br><span class="line">function foo(a)&#123;</span><br><span class="line">arguments[0] &#x3D; 1;</span><br><span class="line">console.log(a,arguments[0])</span><br><span class="line">&#125;</span><br><span class="line">foo(2)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;  输出    2，1</span><br></pre></td></tr></table></figure><p>严格模式下，映射无作用。</p><h2 id="js-特点"><a href="#js-特点" class="headerlink" title="js 特点"></a>js 特点</h2><p>单线程，解释性语言。</p><p>运行三部曲</p><ul><li>语法分析</li><li>预编译</li><li>解释执行</li></ul><h2 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h2><ol><li>imply global 暗示全局变量：即任何变量，如果变量未经声明就赋值，此变量为全局对象所有。</li></ol><p>全局对象 是window</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D;123;</span><br><span class="line">var a &#x3D;b &#x3D; 123;   &#x2F;&#x2F; window.a &#x3D; undefined; window.b &#x3D; 123;</span><br></pre></td></tr></table></figure><ol start="2"><li>一切声明的全局变量，全是window的属性。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D;123;</span><br><span class="line">&#x2F;&#x2F;则  </span><br><span class="line">&#x2F;&#x2F;   window&#123;</span><br><span class="line">&#x2F;&#x2F;      a : 123;</span><br><span class="line">&#x2F;&#x2F;   &#125;</span><br><span class="line">&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h3 id="第一种情况"><a href="#第一种情况" class="headerlink" title="第一种情况"></a>第一种情况</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">test();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>控制台输出  a</p></blockquote><h3 id="第二种情况"><a href="#第二种情况" class="headerlink" title="第二种情况"></a>第二种情况</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><blockquote><p>控制台输出  undefined</p></blockquote><h3 id="第三种情况"><a href="#第三种情况" class="headerlink" title="第三种情况"></a>第三种情况</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure><blockquote><p>控制台输出  报错！！！</p></blockquote><h3 id="预编译题目"><a href="#预编译题目" class="headerlink" title="预编译题目"></a>预编译题目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D; 123;     &#x2F;&#x2F;变量声明  + 变量赋值。</span><br><span class="line">console.log(a)</span><br><span class="line">&#x2F;&#x2F;但是相当于</span><br><span class="line">var a ;</span><br><span class="line">console.log(a)</span><br><span class="line">a &#x3D; 123;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;所以输出  undefined</span><br></pre></td></tr></table></figure><blockquote><p>例题：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>预编译发生在函数执行的前一刻</p><ol><li>创建AO 对象（Activation Object）执行期上下文</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AO&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>找形参和变量声明，将变量和形参名作为AO属性名，值为Undefined</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO&#123;</span><br><span class="line">    a: undefined,</span><br><span class="line">    b: undefined,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>将实参与形参相统一<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO&#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: undefined,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>在函数体中找函数声明，将函数声明的名作为AO对象的属性名挂起来。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AO&#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: undefined,</span><br><span class="line">    d: </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>function a(){} 和 function d(){} 是函数声明<br>var b = function(){} 不是        var b 是局部参数声明<br>由于 a已经有了。所以不用。d没有，所以挂上。</p></blockquote><ol start="5"><li>在函数体中找函数声明， 值 赋予 函数体。 </li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AO&#123;</span><br><span class="line">    a: function a() &#123;&#125;,</span><br><span class="line">    b: undefined,</span><br><span class="line">    d: function d() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>于是对于上面的题：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);        <span class="comment">// -&gt; 去AO中拿的      function a()&#123;&#125;</span></span><br><span class="line">                           </span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>;           <span class="comment">// -&gt; a 开始赋值， AO对象中的a被赋值。</span></span><br><span class="line">                           <span class="comment">// AO&#123;</span></span><br><span class="line">                           <span class="comment">//     a: 123,</span></span><br><span class="line">                           <span class="comment">//     b: undefined,</span></span><br><span class="line">                           <span class="comment">//     d: function d() &#123;&#125;</span></span><br><span class="line">                           <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);        <span class="comment">//  -&gt; 123</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>) </span>&#123;&#125;       <span class="comment">//预编译已经执行，不在看了。</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);        <span class="comment">//  -&gt; 123</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;  <span class="comment">// b 被赋值，function()&#123;&#125; </span></span><br><span class="line">                           <span class="comment">// AO&#123;</span></span><br><span class="line">                           <span class="comment">//     a: 123,</span></span><br><span class="line">                           <span class="comment">//     b: function()&#123;&#125;,</span></span><br><span class="line">                           <span class="comment">//     d: function d() &#123;&#125;</span></span><br><span class="line">                           <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(b);        <span class="comment">// -&gt; function()&#123;&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><blockquote><p>例题2：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);         <span class="comment">//   function()&#123;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);         <span class="comment">//   undefined</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">234</span>;            </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(b);         <span class="comment">//   234</span></span><br><span class="line">    </span><br><span class="line">    a = <span class="number">123</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);         <span class="comment">//   123</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> a;</span><br><span class="line">    </span><br><span class="line">    b = <span class="number">234</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(a);          <span class="comment">//   123</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);          <span class="comment">//   function () &#123;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>例题3：</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a);         <span class="comment">// function a(a)&#123;  ...  &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(a);     <span class="comment">// function() &#123;&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">234</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a);     <span class="comment">// 234</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="预编译总结"><a href="#预编译总结" class="headerlink" title="预编译总结"></a>预编译总结</h3><ul><li>函数声明整体提升</li></ul><p>无论你的函数写到哪里，系统总会将你的函数逻辑提升到最前面。所以不管在哪调用，都是在声明下面调用</p><ul><li><p>变量   声明提升</p></li><li><p>预编译不只发生在函数体，还有全局</p><ul><li>全局生成一个 GO 对象 (Global Object)      </li><li>第四步，在函数体中找函数声明， 值 赋予 函数体。</li></ul></li></ul><blockquote><p>GO === window </p></blockquote><ul><li>AO 上有的 不去GO</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a)      <span class="comment">// function a()&#123;&#125;</span></span><br><span class="line"><span class="keyword">var</span> a =<span class="number">123</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D;123</span><br><span class="line">console.log(a)      &#x2F;&#x2F; 123</span><br><span class="line">function a()&#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>运行期上下文： 当函数执行时，会创建一个称为执行期上下文的内部对象。一个执行期上下文定义了一个函数执行时的环境，函数每次执行时对应的执行上下文都是独一无二的，所以多次调用一个函数会导致创建多个执行上下文，当函数执行完毕，它所产生的执行上下文被销毁。</p><p>比如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function test()&#123;&#125;</span><br><span class="line"></span><br><span class="line">test();    &#x2F;&#x2F;  1    </span><br><span class="line">test();    &#x2F;&#x2F;  2</span><br></pre></td></tr></table></figure><blockquote><p>对于 1 对应的test执行会创建一个AO, 执行完毕销毁。<br>对于 2 对应的test执行会创建另个AO，执行完毕销毁。</p></blockquote><p>[[scope]]： 每个JavaScript函数都是一个对象，对象中有些属性我们可以访问，但有些不可以，这些属性仅供JavaScript引擎存取，[[scope]]就是其中一个。<br>[[scpoe]]指的是我们所说的作用域，其中存储了运行期上下文的集合。</p><p>作用域链： [[scope]]中所存储的执行期上下文对象集合，这个集合呈链式链接，我们把这种链式链接叫做作用域链。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="number">234</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> glob = <span class="number">100</span>;</span><br><span class="line">a();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>a() 从定义就产生自己的属性和方法，同时有 a.[[scope]]，此时[[scope]]只有一位，指向 GO </p><p><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img01.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>a() 执行的时候，产生执行期上下文，AO。且AO放在作用域链的顶端。（故a执行首先去AO中找）</p><p><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img02.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><blockquote><p>故函数查找变量时， 从该函数的作用域链的顶端依次向下查找。</p></blockquote><p>a() 执行时，产生了 b() 函数的定义。</p><p>b() 被定义时，它产生的环境就是a() 所产生的。</p><p><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img03.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>b() 执行时，也会生成自己的执行期上下文，所以，b在执行时，产生自己AO 放在作用域链的最顶端</p><p><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img04.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>当b执行完后，b的AO被销毁。b回到被定义时的状态，等待下一次被调用。</p><p>同时发现，a也执行完毕，a的AO也被销毁，但a 中 有b函数定义， b直接被干掉。</p><p>a的AO也被销毁，回到定义的状态，等待下一次被调用。直到，a被干掉。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        c();</span><br><span class="line">    &#125;</span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line">a();</span><br></pre></td></tr></table></figure><p><img src="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img05.png" class="lazyload" data-srcset="http://cdn.jsdelivr.net/gh/wbig/ebigPic/img/js-scope-img05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js类型转换</title>
      <link href="web/js-typeof/"/>
      <url>web/js-typeof/</url>
      
        <content type="html"><![CDATA[<h2 id="javascript值类型"><a href="#javascript值类型" class="headerlink" title="javascript值类型"></a>javascript值类型</h2><p>原始值： 存到  栈<br>    Number  String  Boolean   undefined   null</p><p>引用值： 存到  堆</p><pre><code>array   Object  function  ... ...     data  RegExp</code></pre><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><table><thead><tr><th>数</th><th>结果</th><th>类型</th></tr></thead><tbody><tr><td>1/0</td><td>Infinity</td><td>Number</td></tr><tr><td>-1/0</td><td>-Infinity</td><td>Number</td></tr><tr><td>0/0</td><td>NaN</td><td>Not a Number</td></tr><tr><td>Infinity == Infinity</td><td>true</td><td>Boolean</td></tr><tr><td>NaN == NaN</td><td>false</td><td>Boolean</td></tr><tr><td>1 &amp;&amp; 2</td><td>2</td><td></td></tr><tr><td>1 &amp;&amp; 0</td><td>0</td><td></td></tr><tr><td>1 &amp;&amp; false &amp;&amp; 1</td><td>false</td><td></td></tr><tr><td>1 &amp;&amp; 1 &amp;&amp; false</td><td>false</td><td></td></tr><tr><td>1 &amp; 3</td><td>1</td><td>Number</td></tr><tr><td>1 || 3</td><td>1</td><td>Number</td></tr><tr><td>0 || 3</td><td>3</td><td>Number</td></tr></tbody></table><blockquote><p>1 &amp;&amp; 2 转化为布尔值 </p><p>先看第一个表达式转换成布尔值的结果；</p><p>如果为真，那么会看第二个表达式转换布尔值的结果；</p><p>如果只有两个表达式的话，就看第二个表达式，返回该值。</p></blockquote><blockquote><p>undefined, null, NaN, “”, 0, false 转化布尔值 都为 false; </p></blockquote><h2 id="typeof-类型转换"><a href="#typeof-类型转换" class="headerlink" title="typeof 类型转换"></a>typeof 类型转换</h2><ul><li>number </li><li>string </li><li>boolean </li><li>object </li><li>undefined </li><li>function</li></ul><h2 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h2><h3 id="isNaN"><a href="#isNaN" class="headerlink" title="isNaN()"></a>isNaN()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.log(isNaN(&#39;abc&#39;))</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;输出</span><br><span class="line">true</span><br></pre></td></tr></table></figure><p>其实，函数内部  会进行显式类型转换</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Number(&#39;abc&#39;) --&gt; NaN  --&gt;  isNaN(NaN)  --&gt;  true</span><br></pre></td></tr></table></figure><blockquote><p>Number(null)       –&gt;  0</p></blockquote><blockquote><p>Number(undefined)  –&gt;  NaN</p></blockquote><h3 id="–"><a href="#–" class="headerlink" title="++ / –"></a>++ / –</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;123&quot;</span></span><br><span class="line">a++;            <span class="comment">//Number(a)</span></span><br><span class="line"><span class="built_in">console</span>.log(a)  <span class="comment">//--&gt; 124</span></span><br></pre></td></tr></table></figure><h3 id="一元正负"><a href="#一元正负" class="headerlink" title="+ / - (一元正负)"></a>+ / - (一元正负)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D; +&quot;abc&quot;;</span><br><span class="line">console.log(a + &quot;:&quot; + typeof(a));</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;输出   NaN: number</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title="+"></a>+</h3><p>当加号两侧有一个是字符串，他就会调用String 进行转换</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D; &#39;a&#39; + 1;</span><br><span class="line">console.log(a + &quot;:&quot; + typeof(a));</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;输出   a1:string</span><br></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title="-*/%"></a>-*/%</h3><p>通过number()显式转换</p><h3 id="amp-amp-！"><a href="#amp-amp-！" class="headerlink" title="&amp;&amp; || ！"></a>&amp;&amp; || ！</h3><h3 id="lt-gt-lt-gt"><a href="#lt-gt-lt-gt" class="headerlink" title="&lt; / &gt; / &lt;= / &gt;="></a>&lt; / &gt; / &lt;= / &gt;=</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a &#x3D; &#39;a&#39; &gt; 1;</span><br><span class="line">&#x2F;&#x2F; 先经过  Number(&#39;a&#39;)  --&gt;  NaN </span><br><span class="line">console.log(a + &quot;:&quot; + typeof(a));</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;输出   false:boolean</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">100 &gt; 10 &gt; 0       --&gt;  true</span><br><span class="line"></span><br><span class="line">10  &gt; 100 &gt; 0      --&gt;  false</span><br><span class="line"></span><br><span class="line">undefined &gt; 0      --&gt;  false</span><br><span class="line">undefined &lt; 0      --&gt;  false</span><br><span class="line">undefined &#x3D;&#x3D; 0     --&gt;  false</span><br><span class="line">+ undefined        --&gt;  NaN</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">0 &#x3D;&#x3D; false         --&gt;  true</span><br><span class="line">0 &#x3D;&#x3D; &quot;&quot;            --&gt;  true</span><br><span class="line">0 &#x3D;&#x3D; null          --&gt;  false  </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;null undefined 在判断类型的时候是不会进行类型转换的。</span><br><span class="line"></span><br><span class="line">0 &#x3D;&#x3D; undefined     --&gt;  false</span><br><span class="line">null &#x3D;&#x3D; false      --&gt;  false</span><br><span class="line"></span><br><span class="line">+0 &#x3D;&#x3D;&#x3D; -0          --&gt;  true</span><br><span class="line">[] &#x3D;&#x3D; []           --&gt;  false</span><br><span class="line">[] &#x3D;&#x3D; &quot;&quot;           --&gt;  true</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;与undefined相似的是 null </span><br><span class="line">undefined &#x3D;&#x3D; null  --&gt; true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NaN &#x3D;&#x3D; NaN  --&gt; false</span><br><span class="line">NaN !&#x3D; NaN  --&gt; true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="-2"><a href="#-2" class="headerlink" title="===   /  !=="></a>===   /  !==</h3><p>不发生类型转换的比较</p><h2 id="未定义变量"><a href="#未定义变量" class="headerlink" title="未定义变量"></a>未定义变量</h2><p>未定义的变量 不能直接使用。但是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a 未定义</span></span><br><span class="line"><span class="keyword">typeof</span>(a)   --&gt; <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span>(<span class="literal">undefined</span>)  --&gt; <span class="string">&quot;undefined&quot;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//故：   </span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="keyword">typeof</span>(a))  --&gt;  string</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>typeof返回值都是字符串。</p></blockquote><h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span>(a)              --&gt;   <span class="string">&quot;undefined&quot;</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="literal">undefined</span>)      --&gt;   <span class="string">&quot;undefined&quot;</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="literal">NaN</span>)            --&gt;   <span class="string">&quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span>(<span class="literal">null</span>)           --&gt;   <span class="string">&quot;object&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;123abc&quot;</span></span><br><span class="line"><span class="keyword">typeof</span>(+a)              --&gt;  <span class="string">&quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span>(!!a)             --&gt;  <span class="string">&quot;boolean&quot;</span></span><br><span class="line"><span class="keyword">typeof</span>(a+<span class="string">&quot;&quot;</span>)            --&gt;  <span class="string">&quot;string&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> == <span class="string">&quot;1&quot;</span>                --&gt;  <span class="literal">true</span></span><br><span class="line"><span class="literal">NaN</span> ==<span class="literal">NaN</span>               --&gt;  <span class="literal">false</span></span><br><span class="line"><span class="literal">NaN</span> == <span class="literal">undefined</span>        --&gt;  <span class="literal">false</span></span><br><span class="line"><span class="string">&quot;11&quot;</span> + <span class="number">11</span>               --&gt;  <span class="string">&quot;1111&quot;</span></span><br><span class="line"><span class="number">1</span> === <span class="string">&quot;1&quot;</span>               --&gt;  <span class="literal">false</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;123abc&quot;</span>)      --&gt;  <span class="number">123</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123123.456789</span></span><br><span class="line">num.toFixed(<span class="number">3</span>)          --&gt;  <span class="string">&quot;123123.457&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> + + + + + <span class="string">&quot;1&quot;</span>)   --&gt;   <span class="number">2</span>    <span class="comment">//只要两个加号中间没有内容，后面的内容就表示类型转换</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>   !!<span class="string">&quot; &quot;</span> + !!<span class="string">&quot;&quot;</span> - !!<span class="literal">false</span> || <span class="built_in">document</span>.write(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="number">2.</span>      <span class="literal">true</span> + <span class="literal">false</span>  - <span class="literal">false</span> || <span class="built_in">document</span>.write(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"><span class="number">3.</span>        <span class="number">1</span> || <span class="built_in">document</span>.write(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 所以不可能打印，返回的  1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云开发笔记（四）</title>
      <link href="wx-mini/wx-mini-cloud-note4/"/>
      <url>wx-mini/wx-mini-cloud-note4/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">send: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   判断 content 内容  不能为空，才能提交</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span>(content.trim() === <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">      wx.showModal(&#123;</span><br><span class="line">        content: <span class="string">&#x27;内容不能为空&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 数据  -&gt; 云数据库</span></span><br><span class="line">    <span class="comment">//    数据：  内容， 图片FileID， openid， 昵称， 头像， 时间</span></span><br><span class="line">    <span class="comment">// 1. 图片  -&gt; 云存储   -&gt; fileID  </span></span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      title: <span class="string">&#x27;正在发布&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> promiseArr = []</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取 fileID 数组</span></span><br><span class="line">    <span class="keyword">let</span> fileIds =[]</span><br><span class="line"></span><br><span class="line">    <span class="comment">//云存储API只支持  单文件上传</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.data.images.length; i++)&#123;</span><br><span class="line">      <span class="keyword">let</span> pms = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> item = <span class="built_in">this</span>.data.images[i]</span><br><span class="line"></span><br><span class="line">        <span class="comment">//正则表达式： 获取文件的 后缀名</span></span><br><span class="line">        <span class="keyword">let</span> suffix = <span class="regexp">/\.\w+$/</span>.exec(item)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment">// console.log(suffix)</span></span><br><span class="line">        wx.cloud.uploadFile(&#123;</span><br><span class="line">          cloudPath: <span class="string">&#x27;cloud-music/blog/&#x27;</span> + <span class="built_in">Date</span>.now() + <span class="string">&#x27;-&#x27;</span> + <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">10000000</span>) +  suffix,</span><br><span class="line">          filePath: item,</span><br><span class="line">          success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res)</span><br><span class="line">            fileIds = fileIds.concat(res.fileID)</span><br><span class="line">            resolve()</span><br><span class="line">          &#125;,</span><br><span class="line">          fail: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.err(err)</span><br><span class="line">            reject()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      promiseArr.push(pms)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  存到数据库</span></span><br><span class="line"><span class="comment">     *  我们需要等到，所有图片上传到云存储成功后，才能执行提交数据库</span></span><br><span class="line"><span class="comment">     * 定义  Promise  数组，保存  promise对象。</span></span><br><span class="line"><span class="comment">     * 循环， 加入数组中，</span></span><br><span class="line"><span class="comment">     * 最后一起提交到数据库</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">Promise</span>.all(promiseArr).then( <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      db.collection(<span class="string">&#x27;cloudMusic-blog&#x27;</span>).add(&#123;</span><br><span class="line">        data: &#123;</span><br><span class="line">          ...userInfo,</span><br><span class="line">          img: fileIds,</span><br><span class="line">          content,</span><br><span class="line">          createTime: db.serverDate()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).then( <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.hideLoading()</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">          title: <span class="string">&#x27;发布成功&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 返回页面，并刷新</span></span><br><span class="line">        wx.navigateBack()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      wx.hideLoading()</span><br><span class="line">      wx.showToast(&#123;</span><br><span class="line">        title: <span class="string">&#x27;发布失败&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="字界面调用父界面的函数"><a href="#字界面调用父界面的函数" class="headerlink" title="字界面调用父界面的函数"></a>字界面调用父界面的函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//得到 当前存在的界面的数组，  当前界面 下标 为  最后一个</span></span><br><span class="line"><span class="comment">//  比如  数组为3  则当前页面的下标 为 3-1 = 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pages = getCurrentPages()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取到上一个界面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prevPage = pages[pages.length - <span class="number">2</span>]</span><br><span class="line">prevPage.方法()</span><br><span class="line"></span><br><span class="line"><span class="comment">//就可以了</span></span><br></pre></td></tr></table></figure><h2 id="实现云函数模糊搜索"><a href="#实现云函数模糊搜索" class="headerlink" title="实现云函数模糊搜索"></a>实现云函数模糊搜索</h2><ol><li>搜索框中数据  传到 后台</li><li>传到云数据库查询</li><li>使用 关键字字段</li></ol><p>云数据库 给出了正则表达式的  使用方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  content : 查询字段</span></span><br><span class="line"><span class="comment"> *  w       : 查询对象，放查询条件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> w = &#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(keywords.trim() != <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">  w = &#123;</span><br><span class="line">    content: db.RegExp(&#123;</span><br><span class="line">      regexp: keywords,</span><br><span class="line">      options: <span class="string">&#x27;i&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection(<span class="string">&#x27;cloudMusic-blog&#x27;</span>).where(w).get().then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><blockquote><p>小程序端查询数据，最多获取20条数据，<br>云函数查询最多100条数据</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> 云存储 </tag>
            
            <tag> 云数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS 异步操作</title>
      <link href="wx-mini/wx-mini-cloud-js-promise/"/>
      <url>wx-mini/wx-mini-cloud-js-promise/</url>
      
        <content type="html"><![CDATA[<h2 id="JS-异步操作"><a href="#JS-异步操作" class="headerlink" title="JS 异步操作"></a>JS 异步操作</h2><p>js是单线程的，当主线程输出  2 之后，空闲再执行输出 1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">&#125;,1000)</span><br><span class="line"></span><br><span class="line">console.log(2)</span><br></pre></td></tr></table></figure><p>我们假设 如下代码，层层回调。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; callback hell 回调深渊</span><br><span class="line">setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        console.log(2)</span><br><span class="line">        setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">            console.log(3)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,2000)</span><br><span class="line">&#125;,1000)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Es6-解决办法。"><a href="#Es6-解决办法。" class="headerlink" title="Es6 解决办法。"></a>Es6 解决办法。</h3><p>状态不可逆！！！！状态也不可相互转换！！！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; promise </span><br><span class="line">1. pending 既不成功也不失败</span><br><span class="line">2. fulfilled 成功</span><br><span class="line">3. rejected 失败</span><br></pre></td></tr></table></figure><p>上面的回调语句用Promise 实现异步如下：</p><p>避免了层层回调的循环。将第一个事件的成功状态作为第二个事件的条件。</p><blockquote><p>resolve( … )   … 为成功的返回值,可以为字符串</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        console.log(1)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        console.log(2)</span><br><span class="line">    &#125;,2000)</span><br><span class="line">&#125;).catch(err &#x3D;&gt; &#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Promise.all() 方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let p1 &#x3D; new Promise(...)</span><br><span class="line">let p2 &#x3D; new Promise(...)</span><br><span class="line">let p3 &#x3D; new Promise(...)</span><br><span class="line"></span><br><span class="line">Promise.all([p1,p2,p3]).then(res &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;全部完成&#39;)</span><br><span class="line">    console.log(res)</span><br><span class="line">&#125;).catch(..)</span><br></pre></td></tr></table></figure><p>如果是说，p1中 reject() 。则promise.all将整体执行失败，但不影响里面p2 ,p3的进程继续执行</p><p>Promise.race() 方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Promise.race([p1,p2,p3]).then(res &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&#39;完成&#39;)</span><br><span class="line">    console.log(res)</span><br><span class="line">&#125;).catch(..)</span><br></pre></td></tr></table></figure><p>race  顾名思义，竞赛的意思。</p><p>即有一个任务完成就表示完成。主要用于判断请求是否超时。</p><h3 id="ES7-解决办法。"><a href="#ES7-解决办法。" class="headerlink" title="ES7 解决办法。"></a>ES7 解决办法。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; async await</span><br></pre></td></tr></table></figure><p>注意：在云函数中使用，默认支持，小程序端不支持！</p><p>使用步骤</p><p>保存一个<code>runtime.js</code>文件，在要用的js页 引用</p><blockquote><p>import regeneratorRuntime from ‘路径/runtime.js’</p></blockquote><blockquote><p>现在的微信开发者工具。好像小程序端也支持了！！！！</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Copyright (c) 2014-present, Facebook, Inc.</span><br><span class="line"> *</span><br><span class="line"> * This source code is licensed under the MIT license found in the</span><br><span class="line"> * LICENSE file in the root directory of this source tree.</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">!(function(global) &#123;</span><br><span class="line">    &#x2F;&#x2F; &quot;use strict&quot;;</span><br><span class="line">  </span><br><span class="line">    var Op &#x3D; Object.prototype;</span><br><span class="line">    var hasOwn &#x3D; Op.hasOwnProperty;</span><br><span class="line">    var undefined; &#x2F;&#x2F; More compressible than void 0.</span><br><span class="line">    var $Symbol &#x3D; typeof Symbol &#x3D;&#x3D;&#x3D; &quot;function&quot; ? Symbol : &#123;&#125;;</span><br><span class="line">    var iteratorSymbol &#x3D; $Symbol.iterator || &quot;@@iterator&quot;;</span><br><span class="line">    var asyncIteratorSymbol &#x3D; $Symbol.asyncIterator || &quot;@@asyncIterator&quot;;</span><br><span class="line">    var toStringTagSymbol &#x3D; $Symbol.toStringTag || &quot;@@toStringTag&quot;;</span><br><span class="line">  </span><br><span class="line">    var inModule &#x3D; typeof module &#x3D;&#x3D;&#x3D; &quot;object&quot;;</span><br><span class="line">    var runtime &#x3D; global.regeneratorRuntime;</span><br><span class="line">    if (runtime) &#123;</span><br><span class="line">      if (inModule) &#123;</span><br><span class="line">        &#x2F;&#x2F; If regeneratorRuntime is defined globally and we&#39;re in a module,</span><br><span class="line">        &#x2F;&#x2F; make the exports object identical to regeneratorRuntime.</span><br><span class="line">        module.exports &#x3D; runtime;</span><br><span class="line">      &#125;</span><br><span class="line">      &#x2F;&#x2F; Don&#39;t bother evaluating the rest of this file if the runtime was</span><br><span class="line">      &#x2F;&#x2F; already defined globally.</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Define the runtime globally (as expected by generated code) as either</span><br><span class="line">    &#x2F;&#x2F; module.exports (if we&#39;re in a module) or a new, empty object.</span><br><span class="line">    runtime &#x3D; global.regeneratorRuntime &#x3D; inModule ? module.exports : &#123;&#125;;</span><br><span class="line">  </span><br><span class="line">    function wrap(innerFn, outerFn, self, tryLocsList) &#123;</span><br><span class="line">      &#x2F;&#x2F; If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.</span><br><span class="line">      var protoGenerator &#x3D; outerFn &amp;&amp; outerFn.prototype instanceof Generator ? outerFn : Generator;</span><br><span class="line">      var generator &#x3D; Object.create(protoGenerator.prototype);</span><br><span class="line">      var context &#x3D; new Context(tryLocsList || []);</span><br><span class="line">  </span><br><span class="line">      &#x2F;&#x2F; The ._invoke method unifies the implementations of the .next,</span><br><span class="line">      &#x2F;&#x2F; .throw, and .return methods.</span><br><span class="line">      generator._invoke &#x3D; makeInvokeMethod(innerFn, self, context);</span><br><span class="line">  </span><br><span class="line">      return generator;</span><br><span class="line">    &#125;</span><br><span class="line">    runtime.wrap &#x3D; wrap;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Try&#x2F;catch helper to minimize deoptimizations. Returns a completion</span><br><span class="line">    &#x2F;&#x2F; record like context.tryEntries[i].completion. This interface could</span><br><span class="line">    &#x2F;&#x2F; have been (and was previously) designed to take a closure to be</span><br><span class="line">    &#x2F;&#x2F; invoked without arguments, but in all the cases we care about we</span><br><span class="line">    &#x2F;&#x2F; already have an existing method we want to call, so there&#39;s no need</span><br><span class="line">    &#x2F;&#x2F; to create a new function object. We can even get away with assuming</span><br><span class="line">    &#x2F;&#x2F; the method takes exactly one argument, since that happens to be true</span><br><span class="line">    &#x2F;&#x2F; in every case, so we don&#39;t have to touch the arguments object. The</span><br><span class="line">    &#x2F;&#x2F; only additional allocation required is the completion record, which</span><br><span class="line">    &#x2F;&#x2F; has a stable shape and so hopefully should be cheap to allocate.</span><br><span class="line">    function tryCatch(fn, obj, arg) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        return &#123; type: &quot;normal&quot;, arg: fn.call(obj, arg) &#125;;</span><br><span class="line">      &#125; catch (err) &#123;</span><br><span class="line">        return &#123; type: &quot;throw&quot;, arg: err &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    var GenStateSuspendedStart &#x3D; &quot;suspendedStart&quot;;</span><br><span class="line">    var GenStateSuspendedYield &#x3D; &quot;suspendedYield&quot;;</span><br><span class="line">    var GenStateExecuting &#x3D; &quot;executing&quot;;</span><br><span class="line">    var GenStateCompleted &#x3D; &quot;completed&quot;;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Returning this object from the innerFn has the same effect as</span><br><span class="line">    &#x2F;&#x2F; breaking out of the dispatch switch statement.</span><br><span class="line">    var ContinueSentinel &#x3D; &#123;&#125;;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Dummy constructor functions that we use as the .constructor and</span><br><span class="line">    &#x2F;&#x2F; .constructor.prototype properties for functions that return Generator</span><br><span class="line">    &#x2F;&#x2F; objects. For full spec compliance, you may wish to configure your</span><br><span class="line">    &#x2F;&#x2F; minifier not to mangle the names of these two functions.</span><br><span class="line">    function Generator() &#123;&#125;</span><br><span class="line">    function GeneratorFunction() &#123;&#125;</span><br><span class="line">    function GeneratorFunctionPrototype() &#123;&#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; This is a polyfill for %IteratorPrototype% for environments that</span><br><span class="line">    &#x2F;&#x2F; don&#39;t natively support it.</span><br><span class="line">    var IteratorPrototype &#x3D; &#123;&#125;;</span><br><span class="line">    IteratorPrototype[iteratorSymbol] &#x3D; function () &#123;</span><br><span class="line">      return this;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    var getProto &#x3D; Object.getPrototypeOf;</span><br><span class="line">    var NativeIteratorPrototype &#x3D; getProto &amp;&amp; getProto(getProto(values([])));</span><br><span class="line">    if (NativeIteratorPrototype &amp;&amp;</span><br><span class="line">        NativeIteratorPrototype !&#x3D;&#x3D; Op &amp;&amp;</span><br><span class="line">        hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) &#123;</span><br><span class="line">      &#x2F;&#x2F; This environment has a native %IteratorPrototype%; use it instead</span><br><span class="line">      &#x2F;&#x2F; of the polyfill.</span><br><span class="line">      IteratorPrototype &#x3D; NativeIteratorPrototype;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    var Gp &#x3D; GeneratorFunctionPrototype.prototype &#x3D;</span><br><span class="line">      Generator.prototype &#x3D; Object.create(IteratorPrototype);</span><br><span class="line">    GeneratorFunction.prototype &#x3D; Gp.constructor &#x3D; GeneratorFunctionPrototype;</span><br><span class="line">    GeneratorFunctionPrototype.constructor &#x3D; GeneratorFunction;</span><br><span class="line">    GeneratorFunctionPrototype[toStringTagSymbol] &#x3D;</span><br><span class="line">      GeneratorFunction.displayName &#x3D; &quot;GeneratorFunction&quot;;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Helper for defining the .next, .throw, and .return methods of the</span><br><span class="line">    &#x2F;&#x2F; Iterator interface in terms of a single ._invoke method.</span><br><span class="line">    function defineIteratorMethods(prototype) &#123;</span><br><span class="line">      [&quot;next&quot;, &quot;throw&quot;, &quot;return&quot;].forEach(function(method) &#123;</span><br><span class="line">        prototype[method] &#x3D; function(arg) &#123;</span><br><span class="line">          return this._invoke(method, arg);</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    runtime.isGeneratorFunction &#x3D; function(genFun) &#123;</span><br><span class="line">      var ctor &#x3D; typeof genFun &#x3D;&#x3D;&#x3D; &quot;function&quot; &amp;&amp; genFun.constructor;</span><br><span class="line">      return ctor</span><br><span class="line">        ? ctor &#x3D;&#x3D;&#x3D; GeneratorFunction ||</span><br><span class="line">          &#x2F;&#x2F; For the native GeneratorFunction constructor, the best we can</span><br><span class="line">          &#x2F;&#x2F; do is to check its .name property.</span><br><span class="line">          (ctor.displayName || ctor.name) &#x3D;&#x3D;&#x3D; &quot;GeneratorFunction&quot;</span><br><span class="line">        : false;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    runtime.mark &#x3D; function(genFun) &#123;</span><br><span class="line">      if (Object.setPrototypeOf) &#123;</span><br><span class="line">        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        genFun.__proto__ &#x3D; GeneratorFunctionPrototype;</span><br><span class="line">        if (!(toStringTagSymbol in genFun)) &#123;</span><br><span class="line">          genFun[toStringTagSymbol] &#x3D; &quot;GeneratorFunction&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      genFun.prototype &#x3D; Object.create(Gp);</span><br><span class="line">      return genFun;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Within the body of any async function, &#96;await x&#96; is transformed to</span><br><span class="line">    &#x2F;&#x2F; &#96;yield regeneratorRuntime.awrap(x)&#96;, so that the runtime can test</span><br><span class="line">    &#x2F;&#x2F; &#96;hasOwn.call(value, &quot;__await&quot;)&#96; to determine if the yielded value is</span><br><span class="line">    &#x2F;&#x2F; meant to be awaited.</span><br><span class="line">    runtime.awrap &#x3D; function(arg) &#123;</span><br><span class="line">      return &#123; __await: arg &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    function AsyncIterator(generator) &#123;</span><br><span class="line">      function invoke(method, arg, resolve, reject) &#123;</span><br><span class="line">        var record &#x3D; tryCatch(generator[method], generator, arg);</span><br><span class="line">        if (record.type &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">          reject(record.arg);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          var result &#x3D; record.arg;</span><br><span class="line">          var value &#x3D; result.value;</span><br><span class="line">          if (value &amp;&amp;</span><br><span class="line">              typeof value &#x3D;&#x3D;&#x3D; &quot;object&quot; &amp;&amp;</span><br><span class="line">              hasOwn.call(value, &quot;__await&quot;)) &#123;</span><br><span class="line">            return Promise.resolve(value.__await).then(function(value) &#123;</span><br><span class="line">              invoke(&quot;next&quot;, value, resolve, reject);</span><br><span class="line">            &#125;, function(err) &#123;</span><br><span class="line">              invoke(&quot;throw&quot;, err, resolve, reject);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          return Promise.resolve(value).then(function(unwrapped) &#123;</span><br><span class="line">            &#x2F;&#x2F; When a yielded Promise is resolved, its final value becomes</span><br><span class="line">            &#x2F;&#x2F; the .value of the Promise&lt;&#123;value,done&#125;&gt; result for the</span><br><span class="line">            &#x2F;&#x2F; current iteration.</span><br><span class="line">            result.value &#x3D; unwrapped;</span><br><span class="line">            resolve(result);</span><br><span class="line">          &#125;, function(error) &#123;</span><br><span class="line">            &#x2F;&#x2F; If a rejected Promise was yielded, throw the rejection back</span><br><span class="line">            &#x2F;&#x2F; into the async generator function so it can be handled there.</span><br><span class="line">            return invoke(&quot;throw&quot;, error, resolve, reject);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      var previousPromise;</span><br><span class="line">  </span><br><span class="line">      function enqueue(method, arg) &#123;</span><br><span class="line">        function callInvokeWithMethodAndArg() &#123;</span><br><span class="line">          return new Promise(function(resolve, reject) &#123;</span><br><span class="line">            invoke(method, arg, resolve, reject);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        return previousPromise &#x3D;</span><br><span class="line">          &#x2F;&#x2F; If enqueue has been called before, then we want to wait until</span><br><span class="line">          &#x2F;&#x2F; all previous Promises have been resolved before calling invoke,</span><br><span class="line">          &#x2F;&#x2F; so that results are always delivered in the correct order. If</span><br><span class="line">          &#x2F;&#x2F; enqueue has not been called before, then it is important to</span><br><span class="line">          &#x2F;&#x2F; call invoke immediately, without waiting on a callback to fire,</span><br><span class="line">          &#x2F;&#x2F; so that the async generator function has the opportunity to do</span><br><span class="line">          &#x2F;&#x2F; any necessary setup in a predictable way. This predictability</span><br><span class="line">          &#x2F;&#x2F; is why the Promise constructor synchronously invokes its</span><br><span class="line">          &#x2F;&#x2F; executor callback, and why async functions synchronously</span><br><span class="line">          &#x2F;&#x2F; execute code before the first await. Since we implement simple</span><br><span class="line">          &#x2F;&#x2F; async functions in terms of async generators, it is especially</span><br><span class="line">          &#x2F;&#x2F; important to get this right, even though it requires care.</span><br><span class="line">          previousPromise ? previousPromise.then(</span><br><span class="line">            callInvokeWithMethodAndArg,</span><br><span class="line">            &#x2F;&#x2F; Avoid propagating failures to Promises returned by later</span><br><span class="line">            &#x2F;&#x2F; invocations of the iterator.</span><br><span class="line">            callInvokeWithMethodAndArg</span><br><span class="line">          ) : callInvokeWithMethodAndArg();</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      &#x2F;&#x2F; Define the unified helper method that is used to implement .next,</span><br><span class="line">      &#x2F;&#x2F; .throw, and .return (see defineIteratorMethods).</span><br><span class="line">      this._invoke &#x3D; enqueue;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    defineIteratorMethods(AsyncIterator.prototype);</span><br><span class="line">    AsyncIterator.prototype[asyncIteratorSymbol] &#x3D; function () &#123;</span><br><span class="line">      return this;</span><br><span class="line">    &#125;;</span><br><span class="line">    runtime.AsyncIterator &#x3D; AsyncIterator;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Note that simple async functions are implemented on top of</span><br><span class="line">    &#x2F;&#x2F; AsyncIterator objects; they just return a Promise for the value of</span><br><span class="line">    &#x2F;&#x2F; the final result produced by the iterator.</span><br><span class="line">    runtime.async &#x3D; function(innerFn, outerFn, self, tryLocsList) &#123;</span><br><span class="line">      var iter &#x3D; new AsyncIterator(</span><br><span class="line">        wrap(innerFn, outerFn, self, tryLocsList)</span><br><span class="line">      );</span><br><span class="line">  </span><br><span class="line">      return runtime.isGeneratorFunction(outerFn)</span><br><span class="line">        ? iter &#x2F;&#x2F; If outerFn is a generator, return the full iterator.</span><br><span class="line">        : iter.next().then(function(result) &#123;</span><br><span class="line">            return result.done ? result.value : iter.next();</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    function makeInvokeMethod(innerFn, self, context) &#123;</span><br><span class="line">      var state &#x3D; GenStateSuspendedStart;</span><br><span class="line">  </span><br><span class="line">      return function invoke(method, arg) &#123;</span><br><span class="line">        if (state &#x3D;&#x3D;&#x3D; GenStateExecuting) &#123;</span><br><span class="line">          throw new Error(&quot;Generator is already running&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        if (state &#x3D;&#x3D;&#x3D; GenStateCompleted) &#123;</span><br><span class="line">          if (method &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">            throw arg;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          &#x2F;&#x2F; Be forgiving, per 25.3.3.3.3 of the spec:</span><br><span class="line">          &#x2F;&#x2F; https:&#x2F;&#x2F;people.mozilla.org&#x2F;~jorendorff&#x2F;es6-draft.html#sec-generatorresume</span><br><span class="line">          return doneResult();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        context.method &#x3D; method;</span><br><span class="line">        context.arg &#x3D; arg;</span><br><span class="line">  </span><br><span class="line">        while (true) &#123;</span><br><span class="line">          var delegate &#x3D; context.delegate;</span><br><span class="line">          if (delegate) &#123;</span><br><span class="line">            var delegateResult &#x3D; maybeInvokeDelegate(delegate, context);</span><br><span class="line">            if (delegateResult) &#123;</span><br><span class="line">              if (delegateResult &#x3D;&#x3D;&#x3D; ContinueSentinel) continue;</span><br><span class="line">              return delegateResult;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          if (context.method &#x3D;&#x3D;&#x3D; &quot;next&quot;) &#123;</span><br><span class="line">            &#x2F;&#x2F; Setting context._sent for legacy support of Babel&#39;s</span><br><span class="line">            &#x2F;&#x2F; function.sent implementation.</span><br><span class="line">            context.sent &#x3D; context._sent &#x3D; context.arg;</span><br><span class="line">  </span><br><span class="line">          &#125; else if (context.method &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">            if (state &#x3D;&#x3D;&#x3D; GenStateSuspendedStart) &#123;</span><br><span class="line">              state &#x3D; GenStateCompleted;</span><br><span class="line">              throw context.arg;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            context.dispatchException(context.arg);</span><br><span class="line">  </span><br><span class="line">          &#125; else if (context.method &#x3D;&#x3D;&#x3D; &quot;return&quot;) &#123;</span><br><span class="line">            context.abrupt(&quot;return&quot;, context.arg);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          state &#x3D; GenStateExecuting;</span><br><span class="line">  </span><br><span class="line">          var record &#x3D; tryCatch(innerFn, self, context);</span><br><span class="line">          if (record.type &#x3D;&#x3D;&#x3D; &quot;normal&quot;) &#123;</span><br><span class="line">            &#x2F;&#x2F; If an exception is thrown from innerFn, we leave state &#x3D;&#x3D;&#x3D;</span><br><span class="line">            &#x2F;&#x2F; GenStateExecuting and loop back for another invocation.</span><br><span class="line">            state &#x3D; context.done</span><br><span class="line">              ? GenStateCompleted</span><br><span class="line">              : GenStateSuspendedYield;</span><br><span class="line">  </span><br><span class="line">            if (record.arg &#x3D;&#x3D;&#x3D; ContinueSentinel) &#123;</span><br><span class="line">              continue;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            return &#123;</span><br><span class="line">              value: record.arg,</span><br><span class="line">              done: context.done</span><br><span class="line">            &#125;;</span><br><span class="line">  </span><br><span class="line">          &#125; else if (record.type &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">            state &#x3D; GenStateCompleted;</span><br><span class="line">            &#x2F;&#x2F; Dispatch the exception by looping back around to the</span><br><span class="line">            &#x2F;&#x2F; context.dispatchException(context.arg) call above.</span><br><span class="line">            context.method &#x3D; &quot;throw&quot;;</span><br><span class="line">            context.arg &#x3D; record.arg;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Call delegate.iterator[context.method](context.arg) and handle the</span><br><span class="line">    &#x2F;&#x2F; result, either by returning a &#123; value, done &#125; result from the</span><br><span class="line">    &#x2F;&#x2F; delegate iterator, or by modifying context.method and context.arg,</span><br><span class="line">    &#x2F;&#x2F; setting context.delegate to null, and returning the ContinueSentinel.</span><br><span class="line">    function maybeInvokeDelegate(delegate, context) &#123;</span><br><span class="line">      var method &#x3D; delegate.iterator[context.method];</span><br><span class="line">      if (method &#x3D;&#x3D;&#x3D; undefined) &#123;</span><br><span class="line">        &#x2F;&#x2F; A .throw or .return when the delegate iterator has no .throw</span><br><span class="line">        &#x2F;&#x2F; method always terminates the yield* loop.</span><br><span class="line">        context.delegate &#x3D; null;</span><br><span class="line">  </span><br><span class="line">        if (context.method &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">          if (delegate.iterator.return) &#123;</span><br><span class="line">            &#x2F;&#x2F; If the delegate iterator has a return method, give it a</span><br><span class="line">            &#x2F;&#x2F; chance to clean up.</span><br><span class="line">            context.method &#x3D; &quot;return&quot;;</span><br><span class="line">            context.arg &#x3D; undefined;</span><br><span class="line">            maybeInvokeDelegate(delegate, context);</span><br><span class="line">  </span><br><span class="line">            if (context.method &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">              &#x2F;&#x2F; If maybeInvokeDelegate(context) changed context.method from</span><br><span class="line">              &#x2F;&#x2F; &quot;return&quot; to &quot;throw&quot;, let that override the TypeError below.</span><br><span class="line">              return ContinueSentinel;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          context.method &#x3D; &quot;throw&quot;;</span><br><span class="line">          context.arg &#x3D; new TypeError(</span><br><span class="line">            &quot;The iterator does not provide a &#39;throw&#39; method&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        return ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      var record &#x3D; tryCatch(method, delegate.iterator, context.arg);</span><br><span class="line">  </span><br><span class="line">      if (record.type &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">        context.method &#x3D; &quot;throw&quot;;</span><br><span class="line">        context.arg &#x3D; record.arg;</span><br><span class="line">        context.delegate &#x3D; null;</span><br><span class="line">        return ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      var info &#x3D; record.arg;</span><br><span class="line">  </span><br><span class="line">      if (! info) &#123;</span><br><span class="line">        context.method &#x3D; &quot;throw&quot;;</span><br><span class="line">        context.arg &#x3D; new TypeError(&quot;iterator result is not an object&quot;);</span><br><span class="line">        context.delegate &#x3D; null;</span><br><span class="line">        return ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      if (info.done) &#123;</span><br><span class="line">        &#x2F;&#x2F; Assign the result of the finished delegate to the temporary</span><br><span class="line">        &#x2F;&#x2F; variable specified by delegate.resultName (see delegateYield).</span><br><span class="line">        context[delegate.resultName] &#x3D; info.value;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; Resume execution at the desired location (see delegateYield).</span><br><span class="line">        context.next &#x3D; delegate.nextLoc;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; If context.method was &quot;throw&quot; but the delegate handled the</span><br><span class="line">        &#x2F;&#x2F; exception, let the outer generator proceed normally. If</span><br><span class="line">        &#x2F;&#x2F; context.method was &quot;next&quot;, forget context.arg since it has been</span><br><span class="line">        &#x2F;&#x2F; &quot;consumed&quot; by the delegate iterator. If context.method was</span><br><span class="line">        &#x2F;&#x2F; &quot;return&quot;, allow the original .return call to continue in the</span><br><span class="line">        &#x2F;&#x2F; outer generator.</span><br><span class="line">        if (context.method !&#x3D;&#x3D; &quot;return&quot;) &#123;</span><br><span class="line">          context.method &#x3D; &quot;next&quot;;</span><br><span class="line">          context.arg &#x3D; undefined;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F; Re-yield the result returned by the delegate method.</span><br><span class="line">        return info;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      &#x2F;&#x2F; The delegate iterator is finished, so forget it and continue with</span><br><span class="line">      &#x2F;&#x2F; the outer generator.</span><br><span class="line">      context.delegate &#x3D; null;</span><br><span class="line">      return ContinueSentinel;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; Define Generator.prototype.&#123;next,throw,return&#125; in terms of the</span><br><span class="line">    &#x2F;&#x2F; unified ._invoke helper method.</span><br><span class="line">    defineIteratorMethods(Gp);</span><br><span class="line">  </span><br><span class="line">    Gp[toStringTagSymbol] &#x3D; &quot;Generator&quot;;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; A Generator should always return itself as the iterator object when the</span><br><span class="line">    &#x2F;&#x2F; @@iterator function is called on it. Some browsers&#39; implementations of the</span><br><span class="line">    &#x2F;&#x2F; iterator prototype chain incorrectly implement this, causing the Generator</span><br><span class="line">    &#x2F;&#x2F; object to not be returned from this call. This ensures that doesn&#39;t happen.</span><br><span class="line">    &#x2F;&#x2F; See https:&#x2F;&#x2F;github.com&#x2F;facebook&#x2F;regenerator&#x2F;issues&#x2F;274 for more details.</span><br><span class="line">    Gp[iteratorSymbol] &#x3D; function() &#123;</span><br><span class="line">      return this;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    Gp.toString &#x3D; function() &#123;</span><br><span class="line">      return &quot;[object Generator]&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    function pushTryEntry(locs) &#123;</span><br><span class="line">      var entry &#x3D; &#123; tryLoc: locs[0] &#125;;</span><br><span class="line">  </span><br><span class="line">      if (1 in locs) &#123;</span><br><span class="line">        entry.catchLoc &#x3D; locs[1];</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      if (2 in locs) &#123;</span><br><span class="line">        entry.finallyLoc &#x3D; locs[2];</span><br><span class="line">        entry.afterLoc &#x3D; locs[3];</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      this.tryEntries.push(entry);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    function resetTryEntry(entry) &#123;</span><br><span class="line">      var record &#x3D; entry.completion || &#123;&#125;;</span><br><span class="line">      record.type &#x3D; &quot;normal&quot;;</span><br><span class="line">      delete record.arg;</span><br><span class="line">      entry.completion &#x3D; record;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    function Context(tryLocsList) &#123;</span><br><span class="line">      &#x2F;&#x2F; The root entry object (effectively a try statement without a catch</span><br><span class="line">      &#x2F;&#x2F; or a finally block) gives us a place to store values thrown from</span><br><span class="line">      &#x2F;&#x2F; locations where there is no enclosing try statement.</span><br><span class="line">      this.tryEntries &#x3D; [&#123; tryLoc: &quot;root&quot; &#125;];</span><br><span class="line">      tryLocsList.forEach(pushTryEntry, this);</span><br><span class="line">      this.reset(true);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    runtime.keys &#x3D; function(object) &#123;</span><br><span class="line">      var keys &#x3D; [];</span><br><span class="line">      for (var key in object) &#123;</span><br><span class="line">        keys.push(key);</span><br><span class="line">      &#125;</span><br><span class="line">      keys.reverse();</span><br><span class="line">  </span><br><span class="line">      &#x2F;&#x2F; Rather than returning an object with a next method, we keep</span><br><span class="line">      &#x2F;&#x2F; things simple and return the next function itself.</span><br><span class="line">      return function next() &#123;</span><br><span class="line">        while (keys.length) &#123;</span><br><span class="line">          var key &#x3D; keys.pop();</span><br><span class="line">          if (key in object) &#123;</span><br><span class="line">            next.value &#x3D; key;</span><br><span class="line">            next.done &#x3D; false;</span><br><span class="line">            return next;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; To avoid creating an additional object, we just hang the .value</span><br><span class="line">        &#x2F;&#x2F; and .done properties off the next function object itself. This</span><br><span class="line">        &#x2F;&#x2F; also ensures that the minifier will not anonymize the function.</span><br><span class="line">        next.done &#x3D; true;</span><br><span class="line">        return next;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    function values(iterable) &#123;</span><br><span class="line">      if (iterable) &#123;</span><br><span class="line">        var iteratorMethod &#x3D; iterable[iteratorSymbol];</span><br><span class="line">        if (iteratorMethod) &#123;</span><br><span class="line">          return iteratorMethod.call(iterable);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        if (typeof iterable.next &#x3D;&#x3D;&#x3D; &quot;function&quot;) &#123;</span><br><span class="line">          return iterable;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        if (!isNaN(iterable.length)) &#123;</span><br><span class="line">          var i &#x3D; -1, next &#x3D; function next() &#123;</span><br><span class="line">            while (++i &lt; iterable.length) &#123;</span><br><span class="line">              if (hasOwn.call(iterable, i)) &#123;</span><br><span class="line">                next.value &#x3D; iterable[i];</span><br><span class="line">                next.done &#x3D; false;</span><br><span class="line">                return next;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            next.value &#x3D; undefined;</span><br><span class="line">            next.done &#x3D; true;</span><br><span class="line">  </span><br><span class="line">            return next;</span><br><span class="line">          &#125;;</span><br><span class="line">  </span><br><span class="line">          return next.next &#x3D; next;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      &#x2F;&#x2F; Return an iterator with no values.</span><br><span class="line">      return &#123; next: doneResult &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    runtime.values &#x3D; values;</span><br><span class="line">  </span><br><span class="line">    function doneResult() &#123;</span><br><span class="line">      return &#123; value: undefined, done: true &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    Context.prototype &#x3D; &#123;</span><br><span class="line">      constructor: Context,</span><br><span class="line">  </span><br><span class="line">      reset: function(skipTempReset) &#123;</span><br><span class="line">        this.prev &#x3D; 0;</span><br><span class="line">        this.next &#x3D; 0;</span><br><span class="line">        &#x2F;&#x2F; Resetting context._sent for legacy support of Babel&#39;s</span><br><span class="line">        &#x2F;&#x2F; function.sent implementation.</span><br><span class="line">        this.sent &#x3D; this._sent &#x3D; undefined;</span><br><span class="line">        this.done &#x3D; false;</span><br><span class="line">        this.delegate &#x3D; null;</span><br><span class="line">  </span><br><span class="line">        this.method &#x3D; &quot;next&quot;;</span><br><span class="line">        this.arg &#x3D; undefined;</span><br><span class="line">  </span><br><span class="line">        this.tryEntries.forEach(resetTryEntry);</span><br><span class="line">  </span><br><span class="line">        if (!skipTempReset) &#123;</span><br><span class="line">          for (var name in this) &#123;</span><br><span class="line">            &#x2F;&#x2F; Not sure about the optimal order of these conditions:</span><br><span class="line">            if (name.charAt(0) &#x3D;&#x3D;&#x3D; &quot;t&quot; &amp;&amp;</span><br><span class="line">                hasOwn.call(this, name) &amp;&amp;</span><br><span class="line">                !isNaN(+name.slice(1))) &#123;</span><br><span class="line">              this[name] &#x3D; undefined;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      stop: function() &#123;</span><br><span class="line">        this.done &#x3D; true;</span><br><span class="line">  </span><br><span class="line">        var rootEntry &#x3D; this.tryEntries[0];</span><br><span class="line">        var rootRecord &#x3D; rootEntry.completion;</span><br><span class="line">        if (rootRecord.type &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">          throw rootRecord.arg;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        return this.rval;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      dispatchException: function(exception) &#123;</span><br><span class="line">        if (this.done) &#123;</span><br><span class="line">          throw exception;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        var context &#x3D; this;</span><br><span class="line">        function handle(loc, caught) &#123;</span><br><span class="line">          record.type &#x3D; &quot;throw&quot;;</span><br><span class="line">          record.arg &#x3D; exception;</span><br><span class="line">          context.next &#x3D; loc;</span><br><span class="line">  </span><br><span class="line">          if (caught) &#123;</span><br><span class="line">            &#x2F;&#x2F; If the dispatched exception was caught by a catch block,</span><br><span class="line">            &#x2F;&#x2F; then let that catch block handle the exception normally.</span><br><span class="line">            context.method &#x3D; &quot;next&quot;;</span><br><span class="line">            context.arg &#x3D; undefined;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          return !! caught;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        for (var i &#x3D; this.tryEntries.length - 1; i &gt;&#x3D; 0; --i) &#123;</span><br><span class="line">          var entry &#x3D; this.tryEntries[i];</span><br><span class="line">          var record &#x3D; entry.completion;</span><br><span class="line">  </span><br><span class="line">          if (entry.tryLoc &#x3D;&#x3D;&#x3D; &quot;root&quot;) &#123;</span><br><span class="line">            &#x2F;&#x2F; Exception thrown outside of any try block that could handle</span><br><span class="line">            &#x2F;&#x2F; it, so set the completion value of the entire function to</span><br><span class="line">            &#x2F;&#x2F; throw the exception.</span><br><span class="line">            return handle(&quot;end&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          if (entry.tryLoc &lt;&#x3D; this.prev) &#123;</span><br><span class="line">            var hasCatch &#x3D; hasOwn.call(entry, &quot;catchLoc&quot;);</span><br><span class="line">            var hasFinally &#x3D; hasOwn.call(entry, &quot;finallyLoc&quot;);</span><br><span class="line">  </span><br><span class="line">            if (hasCatch &amp;&amp; hasFinally) &#123;</span><br><span class="line">              if (this.prev &lt; entry.catchLoc) &#123;</span><br><span class="line">                return handle(entry.catchLoc, true);</span><br><span class="line">              &#125; else if (this.prev &lt; entry.finallyLoc) &#123;</span><br><span class="line">                return handle(entry.finallyLoc);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">            &#125; else if (hasCatch) &#123;</span><br><span class="line">              if (this.prev &lt; entry.catchLoc) &#123;</span><br><span class="line">                return handle(entry.catchLoc, true);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">            &#125; else if (hasFinally) &#123;</span><br><span class="line">              if (this.prev &lt; entry.finallyLoc) &#123;</span><br><span class="line">                return handle(entry.finallyLoc);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              throw new Error(&quot;try statement without catch or finally&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      abrupt: function(type, arg) &#123;</span><br><span class="line">        for (var i &#x3D; this.tryEntries.length - 1; i &gt;&#x3D; 0; --i) &#123;</span><br><span class="line">          var entry &#x3D; this.tryEntries[i];</span><br><span class="line">          if (entry.tryLoc &lt;&#x3D; this.prev &amp;&amp;</span><br><span class="line">              hasOwn.call(entry, &quot;finallyLoc&quot;) &amp;&amp;</span><br><span class="line">              this.prev &lt; entry.finallyLoc) &#123;</span><br><span class="line">            var finallyEntry &#x3D; entry;</span><br><span class="line">            break;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        if (finallyEntry &amp;&amp;</span><br><span class="line">            (type &#x3D;&#x3D;&#x3D; &quot;break&quot; ||</span><br><span class="line">             type &#x3D;&#x3D;&#x3D; &quot;continue&quot;) &amp;&amp;</span><br><span class="line">            finallyEntry.tryLoc &lt;&#x3D; arg &amp;&amp;</span><br><span class="line">            arg &lt;&#x3D; finallyEntry.finallyLoc) &#123;</span><br><span class="line">          &#x2F;&#x2F; Ignore the finally entry if control is not jumping to a</span><br><span class="line">          &#x2F;&#x2F; location outside the try&#x2F;catch block.</span><br><span class="line">          finallyEntry &#x3D; null;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        var record &#x3D; finallyEntry ? finallyEntry.completion : &#123;&#125;;</span><br><span class="line">        record.type &#x3D; type;</span><br><span class="line">        record.arg &#x3D; arg;</span><br><span class="line">  </span><br><span class="line">        if (finallyEntry) &#123;</span><br><span class="line">          this.method &#x3D; &quot;next&quot;;</span><br><span class="line">          this.next &#x3D; finallyEntry.finallyLoc;</span><br><span class="line">          return ContinueSentinel;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        return this.complete(record);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      complete: function(record, afterLoc) &#123;</span><br><span class="line">        if (record.type &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">          throw record.arg;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        if (record.type &#x3D;&#x3D;&#x3D; &quot;break&quot; ||</span><br><span class="line">            record.type &#x3D;&#x3D;&#x3D; &quot;continue&quot;) &#123;</span><br><span class="line">          this.next &#x3D; record.arg;</span><br><span class="line">        &#125; else if (record.type &#x3D;&#x3D;&#x3D; &quot;return&quot;) &#123;</span><br><span class="line">          this.rval &#x3D; this.arg &#x3D; record.arg;</span><br><span class="line">          this.method &#x3D; &quot;return&quot;;</span><br><span class="line">          this.next &#x3D; &quot;end&quot;;</span><br><span class="line">        &#125; else if (record.type &#x3D;&#x3D;&#x3D; &quot;normal&quot; &amp;&amp; afterLoc) &#123;</span><br><span class="line">          this.next &#x3D; afterLoc;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        return ContinueSentinel;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      finish: function(finallyLoc) &#123;</span><br><span class="line">        for (var i &#x3D; this.tryEntries.length - 1; i &gt;&#x3D; 0; --i) &#123;</span><br><span class="line">          var entry &#x3D; this.tryEntries[i];</span><br><span class="line">          if (entry.finallyLoc &#x3D;&#x3D;&#x3D; finallyLoc) &#123;</span><br><span class="line">            this.complete(entry.completion, entry.afterLoc);</span><br><span class="line">            resetTryEntry(entry);</span><br><span class="line">            return ContinueSentinel;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      &quot;catch&quot;: function(tryLoc) &#123;</span><br><span class="line">        for (var i &#x3D; this.tryEntries.length - 1; i &gt;&#x3D; 0; --i) &#123;</span><br><span class="line">          var entry &#x3D; this.tryEntries[i];</span><br><span class="line">          if (entry.tryLoc &#x3D;&#x3D;&#x3D; tryLoc) &#123;</span><br><span class="line">            var record &#x3D; entry.completion;</span><br><span class="line">            if (record.type &#x3D;&#x3D;&#x3D; &quot;throw&quot;) &#123;</span><br><span class="line">              var thrown &#x3D; record.arg;</span><br><span class="line">              resetTryEntry(entry);</span><br><span class="line">            &#125;</span><br><span class="line">            return thrown;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; The context.catch method must only be called with a location</span><br><span class="line">        &#x2F;&#x2F; argument that corresponds to a known catch block.</span><br><span class="line">        throw new Error(&quot;illegal catch attempt&quot;);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      delegateYield: function(iterable, resultName, nextLoc) &#123;</span><br><span class="line">        this.delegate &#x3D; &#123;</span><br><span class="line">          iterator: values(iterable),</span><br><span class="line">          resultName: resultName,</span><br><span class="line">          nextLoc: nextLoc</span><br><span class="line">        &#125;;</span><br><span class="line">  </span><br><span class="line">        if (this.method &#x3D;&#x3D;&#x3D; &quot;next&quot;) &#123;</span><br><span class="line">          &#x2F;&#x2F; Deliberately forget the last sent value so that we don&#39;t</span><br><span class="line">          &#x2F;&#x2F; accidentally pass it on to the delegate.</span><br><span class="line">          this.arg &#x3D; undefined;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        return ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(</span><br><span class="line">    &#x2F;&#x2F; In sloppy mode, unbound &#96;this&#96; refers to the global object, fallback to</span><br><span class="line">    &#x2F;&#x2F; Function constructor if we&#39;re in global strict mode. That is sadly a form</span><br><span class="line">    &#x2F;&#x2F; of indirect eval which violates Content Security Policy.</span><br><span class="line">    (function() &#123; return this &#125;)() || Function(&quot;return this&quot;)()</span><br><span class="line">  );</span><br></pre></td></tr></table></figure><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>具体测试代码如图。 注意的事，awiat 必须在async中使用。否则无效</p><h2 id="request-promise-请求数据并插入"><a href="#request-promise-请求数据并插入" class="headerlink" title="request-promise 请求数据并插入"></a>request-promise 请求数据并插入</h2><blockquote><p>云数据库 只能单条插入</p></blockquote><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>解决问题：</p><p>当插入 数据重复的时候，不用插入。</p><blockquote><p>此处应该是算法。查重，去重，重新构建对象数组</p></blockquote><p>先读取  数据库中的集合所有数据</p><blockquote><p>对于云函数来说 限制最多读取100条数据<br>而小程序端获取 限制最多读取20条数据</p></blockquote><p>如何突破这种限制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;假设数据有210条数据</span><br><span class="line">&#x2F;&#x2F;计算总数也是一个异步的过程。</span><br><span class="line"></span><br><span class="line">let count &#x3D; await playlistCollection.count()</span><br><span class="line">&#x2F;&#x2F;此时count是一个对象, 获取当前总的数据</span><br><span class="line">let total &#x3D; countResult.total</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;一次最多读100条</span><br><span class="line">MAX_LIMIT &#x3D; 100</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;那分三次读出    向上取整</span><br><span class="line">let batchTimes &#x3D; Math.ceil((total &#x2F; MAX_LIMIT))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 每次取数据的时候都是异步操作，</span><br><span class="line">&#x2F;&#x2F; 每次的异步任务完成后，再拼接</span><br><span class="line">let tasks &#x3D; []</span><br><span class="line">for(let i &#x3D; 0; i &lt; batchTimes; i++)&#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;每次取的数据开始地址不一样</span><br><span class="line">   let promiseId &#x3D; playlistCollection.skip(i * MAX_LIMIT).limit(MAX_LIMIT).get()</span><br><span class="line">   tasks.push(promiseId)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let list &#x3D; &#123;</span><br><span class="line">    data: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(tasks.length &gt; 0)&#123;</span><br><span class="line">&#x2F;&#x2F; acc 之前的值</span><br><span class="line">&#x2F;&#x2F; cur 当前循环遍历的值</span><br><span class="line">    list &#x3D; (await Promise.all(tasks)).reduce((acc, cur) &#x3D;&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            data: acc.data.concat(cur.data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img06.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="定时触发器-触发云函数"><a href="#定时触发器-触发云函数" class="headerlink" title="定时触发器 触发云函数"></a>定时触发器 触发云函数</h2><ol><li><p>在云函数  右键 创建  <code>config.json</code></p></li><li><p>填写内容</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &#x2F;&#x2F; triggers 字段是触发器数组，目前仅支持一个触发器，即数组只能填写一个，不可添加多个</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;   JSON 文件不能添加注释，此处是为了截图  好理解</span><br><span class="line"></span><br><span class="line">  &quot;triggers&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &#x2F;&#x2F; name: 触发器的名字，规则见下方说明</span><br><span class="line">      &quot;name&quot;: &quot;myTrigger&quot;,</span><br><span class="line">      &#x2F;&#x2F; type: 触发器类型，目前仅支持 timer (即 定时触发器)</span><br><span class="line">      &quot;type&quot;: &quot;timer&quot;,</span><br><span class="line">      &#x2F;&#x2F; config: 触发器配置，在定时触发器下，config 格式为 cron 表达式，规则见下方说明</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;0 0 2 1 * * * 表示在每月的1日的凌晨2点触发</span><br><span class="line">&#x2F;&#x2F;0 15 10 * * MON-FRI * 表示在周一到周五每天上午10: 15触发</span><br><span class="line">&#x2F;&#x2F;0 0 10,14,16 * * * * 表示在每天上午10点，下午2点，4点触发</span><br><span class="line">&#x2F;&#x2F;0 *&#x2F;30 9-17 * * * * 表示在每天上午9点到下午5点内每半小时触发</span><br><span class="line">&#x2F;&#x2F;0 0 12 * * WED * 表示在每个星期三中午12点触发</span><br><span class="line"></span><br><span class="line">      &quot;config&quot;: &quot;0 0 10,14,16,23 * * * *&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>右键云函数   上传触发器</li></ol><blockquote><p>上传前确认，json文件没有注释</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;triggers&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;myTrigger&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;timer&quot;,</span><br><span class="line">      &quot;config&quot;: &quot;0 0 10,14,16,23 * * * *&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img07.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> js异步操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云开发笔记（三）</title>
      <link href="wx-mini/wx-mini-cloud-note3/"/>
      <url>wx-mini/wx-mini-cloud-note3/</url>
      
        <content type="html"><![CDATA[<h2 id="组件内部使用外部wxss样式"><a href="#组件内部使用外部wxss样式" class="headerlink" title="组件内部使用外部wxss样式"></a>组件内部使用外部wxss样式</h2><blockquote><p>经过测试，使用Vant Weapp组件开发， 自定义组件可以随便使用。不用考虑它自己的样式。</p></blockquote><blockquote><p>下面是自己定义的样式引用</p></blockquote><ol><li>首先在调用组件的page中传入参数</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;com-search  iconfont-Propra&#x3D;&quot;iconfont&quot; iconfont-search-Propra&#x3D;&quot;iconfont-sousuo&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure><blockquote><p>iconfont-Propra ：随便起。但是尽量我感觉还是一样比较好<br>iconfont 必须是全局CSS中有的类名</p></blockquote><ol start="2"><li>在组件js文件中接收 </li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">externalClasses:[</span><br><span class="line">   &#39;iconfont-Propra&#39;,</span><br><span class="line">   &#39;iconfont-search-Propra&#39;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><ol start="3"><li>使用  别名。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-icon name&#x3D;&quot;search&quot; class&#x3D;&quot;iconfont-Propra iconfont-search-Propra&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure><blockquote><p>另一种方式</p></blockquote><p>在组件中，添加如下内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">options:&#123;</span><br><span class="line">   styleIsolation: &#39;apply-shared&#39;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ul><li><code>isolated</code> 表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（一般情况下的默认值）；</li><li><code>apply-shared</code> 表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；</li><li><code>shared</code> 表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 apply-shared 或 shared 的自定义组件。（这个选项在插件中不可用。）</li></ul><blockquote><p>还有一种方式：引用页面或父组件的样式</p></blockquote><p>即使启用了样式隔离 <code>isolated</code> ，组件仍然可以在局部引用组件所在页面的样式或父组件的样式。</p><p>例如，如果在页面 wxss 中定义了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.blue-text &#123;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个组件中可以使用 ~ 来引用这个类的样式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;~blue-text&quot;&gt; 这段文本是蓝色的 &lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure><p>如果在一个组件的父组件 wxss 中定义了：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.red-text &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个组件中可以使用 ^ 来引用这个类的样式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;^red-text&quot;&gt; 这段文本是红色的 &lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure><p>也可以连续使用多个 ^ 来引用祖先组件中的样式。</p><h2 id="组件内部调用组件"><a href="#组件内部调用组件" class="headerlink" title="组件内部调用组件"></a>组件内部调用组件</h2><p>和Page一样</p><p>功能： login组件使用   bottom-modal组件的下弹出框。</p><ol><li>建立login  组件</li><li>login 引用。</li><li>在bottom-modal组件中定义   slot<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot name&#x3D;&quot;modal-content&quot;&gt;默认内容&lt;&#x2F;slot&gt;</span><br></pre></td></tr></table></figure></li><li>login组件使用</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;com-bottom-modal&gt;</span><br><span class="line">  &lt;view slot&#x3D;&quot;modal-content&quot;&gt;</span><br><span class="line">    &lt;button&gt;获取微信授权信息&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;com-bottom-modal&gt;</span><br></pre></td></tr></table></figure><ol start="5"><li>在page页 由调用 bottom-modal 改为 调用login</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;json文件改为</span><br><span class="line"> &quot;usingComponents&quot;: &#123;</span><br><span class="line">    &quot;com-search&quot;:&quot;..&#x2F;..&#x2F;components&#x2F;search&#x2F;search&quot;,</span><br><span class="line">    &#x2F;&#x2F;&quot;com-modal&quot;: &quot;..&#x2F;..&#x2F;components&#x2F;bottom-model&#x2F;bottom-model&quot;,</span><br><span class="line">    &quot;com-login&quot;: &quot;..&#x2F;..&#x2F;components&#x2F;login&#x2F;login&quot;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;wxml中改为</span><br><span class="line"> &lt;com-login modalShow&#x3D;&quot;&#123;&#123;modalShow&#125;&#125;&quot; &gt;</span><br><span class="line"></span><br><span class="line">  &lt;&#x2F;com-login&gt;</span><br></pre></td></tr></table></figure><h2 id="组件引用组件"><a href="#组件引用组件" class="headerlink" title="组件引用组件"></a>组件引用组件</h2><p>json文件引入</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;usingComponents&quot;: &#123;</span><br><span class="line">    &quot;com-login&quot;: &quot;../login/login&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>注意组件是否要求传递参数。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 组件的属性列表,  login组件</span><br><span class="line"> *&#x2F;</span><br><span class="line">properties: &#123;</span><br><span class="line">    modalShow: Boolean</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>故在引用组件页  blog-ctrl   设置参数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;com-login modalShow&#x3D;&quot;&#123;&#123;loginShow&#125;&#125;&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure><p>loginShow 应该写在 data中， 因为不是传递进来的， 是自用的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">  * 组件的初始数据，  blog-ctrl组件</span><br><span class="line">  *&#x2F;</span><br><span class="line">data: &#123;</span><br><span class="line">    loginShow: false</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="this-setData-的回调函数"><a href="#this-setData-的回调函数" class="headerlink" title="this.setData() 的回调函数"></a>this.setData() 的回调函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;授权框消失，评论框出现</span><br><span class="line">this.setData(&#123;</span><br><span class="line">  loginShow: false,</span><br><span class="line">&#125;, () &#x3D;&gt; &#123;</span><br><span class="line">  this.setData(&#123;</span><br><span class="line">    modalShow: true</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> 自定义组件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小笔记</title>
      <link href="web/hc/"/>
      <url>web/hc/</url>
      
        <content type="html"><![CDATA[<h4 id="浏览器内核"><a href="#浏览器内核" class="headerlink" title="浏览器内核"></a>浏览器内核</h4><table><thead><tr><th>IE</th><th>trident</th></tr></thead><tbody><tr><td>Firefox</td><td>Gecko</td></tr><tr><td>Chrome</td><td>webkit/blink</td></tr><tr><td>safari</td><td>Webkit</td></tr><tr><td>Opera</td><td>presto</td></tr></tbody></table><h4 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h4><p>ID，class，标签，通配符，属性，伪类，伪元素，直接子元素（&gt;），挨着的选择(+)</p><table><thead><tr><th>选择器</th><th>权重</th></tr></thead><tbody><tr><td>!improtant</td><td>Infinity</td></tr><tr><td>行间样式</td><td>1000</td></tr><tr><td>id</td><td>100</td></tr><tr><td>class、属性、伪类</td><td>10</td></tr><tr><td>标签选择器、伪元素</td><td>1</td></tr><tr><td>通配符</td><td>0</td></tr></tbody></table><p>此外还有</p><ul><li>父子选择器、派生选择器</li><li>直接子元素选择器</li><li>并列选择器</li><li>分组选择器</li></ul><h4 id="首行缩进"><a href="#首行缩进" class="headerlink" title="首行缩进"></a>首行缩进</h4><p>text-indent: 2em;</p><h4 id="enctype类型"><a href="#enctype类型" class="headerlink" title="enctype类型"></a>enctype类型</h4><p>发送请求的编码形式</p><ul><li>application/x-www-form-urlecoded(默认)</li><li>multipart/form-data(用于文件上传)</li><li>text/plain</li></ul><h4 id="CSS预处理器"><a href="#CSS预处理器" class="headerlink" title="CSS预处理器"></a>CSS预处理器</h4><p>less, stylus,saas</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云开发笔记（二）</title>
      <link href="wx-mini/wx-mini-cloud-note2/"/>
      <url>wx-mini/wx-mini-cloud-note2/</url>
      
        <content type="html"><![CDATA[<h2 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h2><ul><li>setStorage: 异步</li><li>setStorageSync: 同步</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_setMusicList:function(event)&#123;</span><br><span class="line">    wx.setStorage(&#123;</span><br><span class="line">     data: this.data.musiclist,</span><br><span class="line">     key: &#39;musiclist&#39;,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="充满整个容器"><a href="#充满整个容器" class="headerlink" title="充满整个容器"></a>充满整个容器</h2><p>如果想要一个元素，充满整个容器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">position: absolute;</span><br><span class="line">top: 0;</span><br><span class="line">bottom: 0;</span><br><span class="line">left: 0;</span><br><span class="line">right: 0;</span><br></pre></td></tr></table></figure><h2 id="如何引入iconfont"><a href="#如何引入iconfont" class="headerlink" title="如何引入iconfont"></a>如何引入iconfont</h2><p>阿里巴巴矢量库 </p><p>加入购物车，添加到项目，生成在线链接，下载，存到wxss文件中。</p><p>引入<code>@import &#39; &#39;</code> 然后使用。</p><h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><p>在tcb-router 传参的时候，如果 属性名与属性值一个名字。</p><p>则可以简写。  <strong>只写一个即可。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wx.cloud.callFunction(&#123;</span><br><span class="line">  name: &#39;music&#39;,</span><br><span class="line">  data: &#123;</span><br><span class="line">  </span><br><span class="line">&#x2F;*只写一个。*&#x2F;</span><br><span class="line">  </span><br><span class="line">    musicId,</span><br><span class="line">    $url: &#39;musicUrl&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="音乐暂停"><a href="#音乐暂停" class="headerlink" title="音乐暂停"></a>音乐暂停</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;image class&#x3D;&quot;player-img rotation &#123;&#123;isPlaying?&#39;&#39;:&#39;rotation-paused&#39;&#125;&#125;&quot; src&#x3D;&quot;&#123;&#123;picUrl&#125;&#125;&quot;&gt;&lt;&#x2F;image&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line"> *对应CSS样式</span><br><span class="line"> *&#x2F;</span><br><span class="line"> .rotation&#123;</span><br><span class="line">  animation: rotation 12s linear infinite;</span><br><span class="line">  -moz-animation: rotation 12s linear infinite;</span><br><span class="line">  -webkit-animation: rotation 12s linear infinite;</span><br><span class="line">  -o-animation: rotation 12s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.rotation-paused&#123;</span><br><span class="line">  animation-play-state: paused;</span><br><span class="line">  -webkit-animation-play-state: paused;</span><br><span class="line">  -o-animation-play-state: paused;</span><br><span class="line">  -moz-animation-play-state: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes rotation &#123;</span><br><span class="line">  from &#123;</span><br><span class="line">    transform: rotate(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  to &#123;</span><br><span class="line">    transform: rotate(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>isPlaying 判断是否播放状态，rotation 为旋转。 rotation-paused为暂停状态。</p><blockquote><p>注意的是。rotation 并没有写进 三目运算符中。只有rotation-paused在。</p></blockquote><p>下面是对比图</p><ul><li>没有写进三目运算符</li></ul><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img01.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img01.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><ul><li>写进三目运算符</li></ul><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img02.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img02.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="可移动的元素"><a href="#可移动的元素" class="headerlink" title="可移动的元素"></a>可移动的元素</h2><blockquote><p>movable-view必须在 movable-area 组件中，并且必须是直接子节点，否则不能移动。</p></blockquote><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>direction</td><td>movable-view的移动方向，属性值有all、vertical、horizontal、none</td></tr><tr><td>x</td><td>定义x轴方向的偏移，如果x的值不在可移动范围内，会自动移动到可移动范围；改变x的值会触发动画</td></tr><tr><td>y</td><td>定义y轴方向的偏移，如果y的值不在可移动范围内，会自动移动到可移动范围；改变y的值会触发动画</td></tr><tr><td>damping</td><td>阻尼系数，用于控制x或y改变时的动画和过界回弹的动画，值越大移动越快</td></tr><tr><td>bindchange</td><td>拖动过程中触发的事件，event.detail = {x, y, source}</td></tr><tr><td>… …</td><td>… …</td></tr></tbody></table><blockquote><p>bindchange 返回的 source 表示产生移动的原因</p></blockquote><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>touch</td><td>拖动</td></tr><tr><td>touch-out-of-bounds</td><td>超出移动范围</td></tr><tr><td>out-of-bounds</td><td>超出移动范围后的回弹</td></tr><tr><td>friction</td><td>惯性</td></tr><tr><td>空字符串</td><td>setData</td></tr></tbody></table><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img04.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><blockquote><p><strong>Bug &amp; Tip</strong></p></blockquote><ul><li>tip: movable-view 必须设置width和height属性，不设置默认为10px</li><li>tip: movable-view 默认为绝对定位，top和left属性为0px</li></ul><blockquote><p>实例</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;progress-control&quot;&gt;</span><br><span class="line">    &lt;movable-area class&#x3D;&quot;movable-area&quot;&gt;</span><br><span class="line">        &lt;movable-view direction&#x3D;&quot;horizontal&quot; class&#x3D;&quot;movable-view&quot; damping&#x3D;&quot;1000&quot; x&#x3D;&quot;&#123;&#123;moveableDis&#125;&#125;&quot;&gt;&lt;&#x2F;movable-view&gt;</span><br><span class="line">    &lt;&#x2F;movable-area&gt;</span><br><span class="line">    &lt;progress stroke-width&#x3D;&quot;4&quot; backgroundColor&#x3D;&quot;#969696&quot; activeColor&#x3D;&quot;#fff&quot; percent&#x3D;&quot;&#123;&#123;progress&#125;&#125;&quot;&gt;&lt;&#x2F;progress&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* components&#x2F;progressbar&#x2F;progressbar.wxss *&#x2F;</span><br><span class="line"></span><br><span class="line">.container&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.progress-control&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  flex: 1;</span><br><span class="line">&#125;</span><br><span class="line">.movable-area&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 34rpx;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: -14rpx;</span><br><span class="line">  left: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.movable-view&#123;</span><br><span class="line">  width: 36rpx;</span><br><span class="line">  height: 36rpx;</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">&#125;</span><br><span class="line">.time&#123;</span><br><span class="line">  width: 64rpx;</span><br><span class="line">  padding: 0 20rpx;</span><br><span class="line">  font-size: 24rpx;</span><br><span class="line">  font-family: NotoSansHans-Regular;</span><br><span class="line">  font-weight: 400;</span><br><span class="line">  color: rgba(255, 255, 255, 1);</span><br><span class="line">  line-height: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>上面用到的progress</p></blockquote><p><strong>进度条。组件属性的长度单位默认为px，2.4.0起支持传入单位(rpx/px)。</strong><br>属性|说明<br>—|—<br>percent|百分比0~100<br>stroke-width|进度条线的宽度<br>color| 进度条颜色（请使用activeColor）<br>activeColor|已选择的进度条的颜色<br>backgroundColor|未选择的进度条的颜色<br>active|进度条从左往右的动画<br>active-mode|backwards: 动画从头播；forwards：动画从上次结束点接着播</p><h2 id="获取节点信息"><a href="#获取节点信息" class="headerlink" title="获取节点信息"></a>获取节点信息</h2><blockquote><p>boundingClientRect：添加节点的布局位置的查询请求，返回的信息。如控制台所示：</p></blockquote><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="undefined"><a href="#undefined" class="headerlink" title="undefined"></a>undefined</h2><p>获取全局唯一的背景音频管理器<br>当获取时长的时候，会返回undefined</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F;可以播放的状态</span><br><span class="line">bgam.onCanplay(() &#x3D;&gt; &#123;</span><br><span class="line">    if(typeof bgam.duration !&#x3D; &#39;undefined&#39;)&#123;</span><br><span class="line">      this.setTime()</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        this.setTime()</span><br><span class="line">      &#125;,1000)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">* 组件的初始数据</span><br><span class="line">*&#x2F;</span><br><span class="line">data: &#123;</span><br><span class="line">showTime:&#123;</span><br><span class="line">  currentTime: &#39;00:00&#39;,</span><br><span class="line">  totalTime: &#39;00:00&#39;</span><br><span class="line">&#125;,</span><br><span class="line">moveableDis: 0,</span><br><span class="line">progress: 0,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如何给组件data中的对象中的属性值赋值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#39;showTime.totalTime&#39;] : &#96;$&#123;durationFmt.min&#125;:$&#123;durationFmt.sec&#125;&#96;</span><br></pre></td></tr></table></figure><h2 id="如何在组件中，调用父元素的方法。"><a href="#如何在组件中，调用父元素的方法。" class="headerlink" title="如何在组件中，调用父元素的方法。"></a>如何在组件中，调用父元素的方法。</h2><p>对于播放控制，当进度条结束的时候，应该自动播放下一首。</p><p>而下一首对应的控制方法在pages页中。</p><p>需要在组件中调用父元素的方法</p><ol><li>激活</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bgam.onEnded(() &#x3D;&gt; &#123;</span><br><span class="line">    this.triggerEvent(&#39;musicEnd&#39;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>使用</li></ol><blockquote><p>bindmusicEnd 也可以写成bind:musicEnd</p></blockquote><blockquote><p>progress-bar 为自定义组件 </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;progress-bar&quot;&gt;</span><br><span class="line">    &lt;progress-bar class&#x3D;&quot;&quot; bindmusicEnd&#x3D;&quot;onNext&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure><h3 id="bug"><a href="#bug" class="headerlink" title="bug"></a>bug</h3><p>当进度条进行拖动时，就会触发 <code>onTimeUpdate</code>事件。<br>导致一直在setData({}),并且，导致进度条会闪</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">bgam.onTimeUpdate(() &#x3D;&gt; &#123;</span><br><span class="line">    const currentTime &#x3D; bgam.currentTime</span><br><span class="line">    const duration &#x3D; bgam.duration</span><br><span class="line">    const currentTimeFmt &#x3D; this.dateFormat(currentTime)</span><br><span class="line">    const sec &#x3D; currentTime.toString().split(&#39;.&#39;)[0]</span><br><span class="line">    if(sec !&#x3D; currentSec)&#123;</span><br><span class="line">      &#x2F;&#x2F; console.log(currentTime)</span><br><span class="line">      &#x2F;**</span><br><span class="line">       *  </span><br><span class="line">       *  </span><br><span class="line">       *&#x2F;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        moveableDis: (movableAreaWidth - movableViewWidth) * currentTime &#x2F;duration,</span><br><span class="line">        progress: currentTime &#x2F; duration * 100,</span><br><span class="line">        [&#39;showTime.currentTime&#39;]: &#96;$&#123;currentTimeFmt.min&#125;:$&#123;currentTimeFmt.sec&#125;&#96;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    currentSec &#x3D; sec</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img05.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img05.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><ol><li>定义一个标志 <code>isMoving</code> </li><li>当拖动得时候，会触发 <code>onChange</code>事件</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isMoving &#x3D; true</span><br></pre></td></tr></table></figure><ol start="3"><li>当触发完成，会执行<code>onTouchEnd</code>事件</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isMoving &#x3D; false</span><br></pre></td></tr></table></figure><ol start="4"><li>在<code>onTimeUpdate</code>中<br><code>isMoving =true</code>时在执行</li></ol><blockquote><p>但是由于 <code>onChange</code> 与<code>onTouchEnd</code> 执行相差时间太短。甚至刚刚执行完<code>onTouchEnd</code> 就执行了<code>onChange</code>。<br>根本没有改变<code>isMoving</code>的值。</p></blockquote><p>但我发现。在执行完之后 肯定要执行 <code>onPlay</code>方法</p><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img07.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-storage-img07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><ol start="5"><li>于是在 <code>onPlay</code>方法中添加  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isMoving &#x3D; false</span><br></pre></td></tr></table></figure></li></ol><h3 id="频繁切换-用hidden"><a href="#频繁切换-用hidden" class="headerlink" title="频繁切换 用hidden"></a>频繁切换 用<code>hidden</code></h3><h3 id="组件之间传参"><a href="#组件之间传参" class="headerlink" title="组件之间传参"></a>组件之间传参</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.triggerEvent(&#39;timeUpdate&#39;, &#123;</span><br><span class="line">    currentTime</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="如何在组件内部事件触发，设置当前组件父元素的值"><a href="#如何在组件内部事件触发，设置当前组件父元素的值" class="headerlink" title="如何在组件内部事件触发，设置当前组件父元素的值"></a>如何在组件内部事件触发，设置当前组件父元素的值</h3><p>在组件中激活 事件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bgam.onStop(() &#x3D;&gt; &#123;</span><br><span class="line">    this.triggerEvent(&#39;musicPlay&#39;)</span><br><span class="line">&#125;)</span><br><span class="line">bgam.onPause(() &#x3D;&gt; &#123;</span><br><span class="line">    this.triggerEvent(&#39;musicPause&#39;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="rpx-与-px-在js中换算"><a href="#rpx-与-px-在js中换算" class="headerlink" title="rpx  与 px  在js中换算"></a>rpx  与 px  在js中换算</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lifetimes:&#123;</span><br><span class="line">    ready()&#123;</span><br><span class="line">      &#x2F;&#x2F;750rpx</span><br><span class="line">      wx.getSystemInfo(&#123;</span><br><span class="line">        success: (res) &#x3D;&gt; &#123;</span><br><span class="line">          &#x2F;&#x2F;px单位  &#x3D;&gt; 1rpx大小  &#x3D;&gt; 一行歌词高度px + 1个字体放大高度</span><br><span class="line">          lyricHeight &#x3D; res.screenWidth &#x2F; 750 * 64</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云开发笔记（一）</title>
      <link href="wx-mini/wx-mini-cloud-note1/"/>
      <url>wx-mini/wx-mini-cloud-note1/</url>
      
        <content type="html"><![CDATA[<h2 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h2><ol><li>.add </li><li>.doc().remove()  </li><li>.update</li><li>where(条件).get().then(res =&gt;{}).catch(err =&gt;{})<h1 id="调用云函数"><a href="#调用云函数" class="headerlink" title="调用云函数"></a>调用云函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.cloud.callFunction(&#123;</span><br><span class="line">    name:  &#39;login&#39;</span><br><span class="line">&#125;).then(res).catch(err)</span><br></pre></td></tr></table></figure><h2 id="云函数入口函数"><a href="#云函数入口函数" class="headerlink" title="云函数入口函数"></a>云函数入口函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export.main  &#x3D; async (event, context)&#123;</span><br><span class="line">    try&#123;</span><br><span class="line">        return await  db.() ...   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="单张图片上传"><a href="#单张图片上传" class="headerlink" title="单张图片上传"></a>单张图片上传</h3></li><li>选择图片  </li><li>获得临时路径  </li><li>得到FileId  </li><li>存储FileID<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">wx.chooseImage(&#123;</span><br><span class="line">   count:1,</span><br><span class="line">&#x2F;&#x2F; 原文件   压缩</span><br><span class="line">   sizeType:[&#39;original&#39;,&#39;compressed&#39;],</span><br><span class="line">   sourceType:[&#39;album&#39;,&#39;camera&#39;]</span><br><span class="line">&#125;).then(res &#x3D;&gt;&#123;</span><br><span class="line">      const  tempFilePaths  &#x3D; res.tempFilePaths</span><br><span class="line">&#x2F;&#x2F;上传文件    利用临时路径</span><br><span class="line">    wx.cloud.uploadFile(&#123;</span><br><span class="line">        cloudPath: new Date()  +  &#39;.png&#39; ,</span><br><span class="line">        filePath: tempFilePaths[0]</span><br><span class="line">    &#125;).then(res  &#x3D;&gt;  &#123;</span><br><span class="line">    </span><br><span class="line">        &#x2F;&#x2F;返回一个fileID当前文件唯一标识</span><br><span class="line">        console.log(res.fileID)</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F;存储fileID</span><br><span class="line">        db.collection().add(&#123;</span><br><span class="line">            data:&#123;</span><br><span class="line">                fileID: res.fileID</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).catch()</span><br><span class="line">&#125;).catch()</span><br></pre></td></tr></table></figure><h3 id="多张图片上传"><a href="#多张图片上传" class="headerlink" title="多张图片上传"></a>多张图片上传</h3>缺失<h2 id="用云函数-请求链接相应返回数据"><a href="#用云函数-请求链接相应返回数据" class="headerlink" title="用云函数 请求链接相应返回数据"></a>用云函数 请求链接相应返回数据</h2></li><li>给云函数安装依赖</li></ol><p>右键云函数，在终端打开。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save request </span><br><span class="line">npm install --save request-promise</span><br></pre></td></tr></table></figure><ol start="2"><li>调用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var  rp &#x3D; require(&#39;request-promise&#39;);</span><br><span class="line">rp(&#39;  链接  &#39;).then().catch()</span><br></pre></td></tr></table></figure><h2 id="组件自定义"><a href="#组件自定义" class="headerlink" title="组件自定义"></a>组件自定义</h2>缺失<h2 id="处理文字溢出"><a href="#处理文字溢出" class="headerlink" title="处理文字溢出"></a>处理文字溢出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">display:-webkit-box</span><br><span class="line">-webkit-box-orient:vertical</span><br><span class="line">-webkit-line-clamp:2</span><br><span class="line">overflow:hidden</span><br><span class="line">text-overflow:ellipsis</span><br></pre></td></tr></table></figure><h2 id="数字格式化处理（在自定义组件中）"><a href="#数字格式化处理（在自定义组件中）" class="headerlink" title="数字格式化处理（在自定义组件中）"></a>数字格式化处理（在自定义组件中）</h2></li><li>数据监听器，监听要变化的数据    </li><li>对象中的属性 监听方法 <code>[&#39;playlist.playCount&#39;]</code></li><li>写相应的方法  </li><li>data中定义新的变量   </li><li>给新的变量赋值</li><li>显示界面 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">observers:&#123;</span><br><span class="line">      [&#39;playlist.playCount&#39;](val)&#123;</span><br><span class="line">        this._tranNumber(val,2)</span><br><span class="line"></span><br><span class="line">        this.setData(&#123;</span><br><span class="line">           &#x2F;&#x2F;错误 会导致循环并崩溃</span><br><span class="line">           [&#39;playlist.playCount&#39;]:this._tranNumber(val,2)</span><br><span class="line">    &#x2F;**</span><br><span class="line">     *正确</span><br><span class="line">     *1. 在data 中初始化 数据    data是组件的初始化数据。</span><br><span class="line">     *2. 赋值</span><br><span class="line">     *3. 前端调用</span><br><span class="line">     **&#x2F;</span><br><span class="line">    _count:this._tranNumber(val,2)</span><br><span class="line">            &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br><span class="line">data:&#123;</span><br><span class="line">      _count:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>组件自定义方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">&#x2F;**</span><br><span class="line"> *</span><br><span class="line"> * 处理数字</span><br><span class="line"> *</span><br><span class="line"> **&#x2F;</span><br><span class="line">    _tranNumber(num, point)&#123;</span><br><span class="line">           let  numStr &#x3D; num.toString().split(&#39;.&#39;)[0]</span><br><span class="line">           if(numStr.length &lt;  6)&#123;return numStr&#125;</span><br><span class="line">            else if&#123;  6   -    8&#125;&#123;</span><br><span class="line">                  let  decimal  &#x3D;    numStr.substring(numStr.length - 4,  numStr.length - 4+point)</span><br><span class="line">             return  parseFloat(parseInt（num&#x2F;10000）+&#39;.&#39;+decimal) + &#39;万&#39;</span><br><span class="line">           &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="wx-key-的奥秘"><a href="#wx-key-的奥秘" class="headerlink" title="wx:key 的奥秘"></a>wx:key 的奥秘</h2></li><li>如果是数组，并且 绑定前面得事件索引，比如复选框跟随更改索引。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx:key&#x3D;&quot;*this&quot;</span><br></pre></td></tr></table></figure></li><li>如果是对象<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx:key &#x3D;&quot;id&quot;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tcb-router 路由</title>
      <link href="wx-mini/wx-mini-cloud-tcbrouter/"/>
      <url>wx-mini/wx-mini-cloud-tcbrouter/</url>
      
        <content type="html"><![CDATA[<h2 id="监听刷新"><a href="#监听刷新" class="headerlink" title="监听刷新"></a>监听刷新</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 在json文件中配置 </span><br><span class="line">&quot;enablePullDownRefresh&quot;: true</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 在js中配置</span><br><span class="line">&#x2F;&#x2F; 页面相关事件处理函数--监听用户下拉动作</span><br><span class="line">onPullDownRefresh: function () &#123;</span><br><span class="line">    this.setData()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 拼接 数据</span><br><span class="line">    this.data.xxx.concat( xxx )</span><br></pre></td></tr></table></figure><blockquote><p>bug: 当下拉刷新的时候，数据返回回来，上方的三个小点还在</p></blockquote><p>可以在函数执行完毕后</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.stopPullDownRefresh()</span><br></pre></td></tr></table></figure><h2 id="云函数路由优化"><a href="#云函数路由优化" class="headerlink" title="云函数路由优化"></a>云函数路由优化</h2><ul><li>一个用户在云环境中只能创建50个云函数</li><li>相似的请求归类到一个云函数处理<ul><li>比如，对音乐的操作都归类到一个云函数中</li></ul></li><li>tcb-router 是一个koa风格的云函数路由库</li></ul><h3 id="koa洋葱模型"><a href="#koa洋葱模型" class="headerlink" title="koa洋葱模型"></a>koa洋葱模型</h3><p>它最大的特点就是独特的中间件流程控制。</p><p>图很清晰的表明了一个请求是如何经过中间件最后生成响应的。</p><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img09.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img09.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h3 id="使用tcb-router"><a href="#使用tcb-router" class="headerlink" title="使用tcb-router"></a>使用tcb-router</h3><p>源码地址：<a href="https://github.com/TencentCloudBase/tcb-router">Github</a></p><ol><li><p>对云函数 终端打开安装。<br><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img12.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img12.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p></li><li><p>定义</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const tcbRouter &#x3D; require(&#39;tcb-router&#39;)</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   * 将 event 传入，tcb会自动处理事件中的参数</span><br><span class="line">   * </span><br><span class="line">   * 必须在最后  return app.serve()</span><br><span class="line">   *&#x2F;</span><br><span class="line">const app &#x3D; new tcbRouter(&#123;event&#125;)</span><br></pre></td></tr></table></figure></li><li><p>分析</p><blockquote><p>xxx.router()  就是单个的函数</p><p>xxx.use() 共同的需求或者说是功能</p></blockquote></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;** </span><br><span class="line"> * 无论是 获取 音乐  还是电影  都有一个需求是    获取  用户的openid</span><br><span class="line"> * 就是用  xxx.use()</span><br><span class="line"> * event  天然有openId</span><br><span class="line"> * </span><br><span class="line"> * next() : 中间件关联   </span><br><span class="line"> *&#x2F;</span><br><span class="line">app.use(async(ctx, next) &#x3D;&gt; &#123;</span><br><span class="line">  ctx.data &#x3D; &#123;&#125;</span><br><span class="line">  ctx.data.openId &#x3D; event.userInfo.openId</span><br><span class="line"></span><br><span class="line">  await next()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.router(&#39;music&#39;, async(ctx, next) &#x3D;&gt; &#123;</span><br><span class="line">  ctx.data.musicName &#x3D; &#39;数鸭子&#39;</span><br><span class="line">  ctx.data.musicAublm &#x3D; &#39;儿歌精选&#39;</span><br><span class="line">  await next()</span><br><span class="line">&#125;, async(ctx, next) &#x3D;&gt; &#123;</span><br><span class="line">  ctx.data.musicType &#x3D;&#39;儿歌&#39;</span><br><span class="line"></span><br><span class="line">  &#x2F;**</span><br><span class="line">   *  完成后， 返回data中的值</span><br><span class="line">   *&#x2F;</span><br><span class="line">  ctx.body &#x3D; &#123;</span><br><span class="line">    data: ctx.data</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>小程序端调用函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wx.cloud.callFunction(&#123;</span><br><span class="line">      name: &#39;tcbRouter&#39;,</span><br><span class="line">      data: &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     *  $url: &#39; xxx  &#39;</span><br><span class="line">     *&#x2F;</span><br><span class="line">        $url: &#39;music&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">      console.log(res)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>以上模型，在demo中为下图：</p></blockquote><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img10.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img10.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><ol start="5"><li>调用顺序为：</li></ol><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img11.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img11.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><blockquote><p>也正是验证了洋葱模型！一层层进，一层层出。</p></blockquote><ol start="6"><li>调用数据 结构</li></ol><p><img src="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img13.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-cloud-note-js-img13.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> tcb router </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github 无法访问</title>
      <link href="Plugin-note/GitHub-problem/"/>
      <url>Plugin-note/GitHub-problem/</url>
      
        <content type="html"><![CDATA[<h2 id="GitHub-com无法打开"><a href="#GitHub-com无法打开" class="headerlink" title="GitHub.com无法打开"></a>GitHub.com无法打开</h2><ol><li><p>C:\Windows\System32\drivers\etc 找到<code>hosts</code></p></li><li><p>三个地址获取ip</p></li></ol><p><a href="https://github.com.ipaddress.com/">github.com</a></p><p><a href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net">github.global.ssl.fastly.net</a></p><p><a href="https://github.com.ipaddress.com/gist.github.com">gist.github.com</a></p><ol start="3"><li>拿到地址，将<code>hosts </code>文件后 添加或者替换<blockquote><p>不能直接修改hosts文件，需要将文件复制粘贴到桌面（或其它地方）然后替换</p></blockquote></li></ol><p>格式如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;只是格式!</span><br><span class="line"></span><br><span class="line">#github</span><br><span class="line">119.187.97.75   github.com</span><br><span class="line">140.82.113.20   gist.github.com</span><br><span class="line">199.232.69.194  github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure><ol start="4"><li>执行文件</li></ol><p>打开cmd:</p><p>执行：<code>ipconfig /flushdns</code></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信开发者工具快捷键</title>
      <link href="wx-mini/wx-mini-hotkey/"/>
      <url>wx-mini/wx-mini-hotkey/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>操作</th><th>命令</th></tr></thead><tbody><tr><td>打开快捷键面板</td><td>F1</td></tr><tr><td>打开/关闭工具栏</td><td>Ctrl+Shift+T</td></tr><tr><td>打开/关闭模拟器</td><td>Ctrl+Shift+D</td></tr><tr><td>打开/关闭调试器</td><td>Ctrl+Shift+M</td></tr><tr><td>格式化文件</td><td>Shift+Alt+F</td></tr><tr><td>编译</td><td>Ctrl+B</td></tr><tr><td>刷新</td><td>Ctrl+R</td></tr><tr><td>删除行</td><td>Ctrl+Shift+K</td></tr><tr><td>向上复制行</td><td>Shift+Alt+↑</td></tr><tr><td>向上移动行</td><td>Alt+↑</td></tr><tr><td>向下复制行</td><td>Shift+Alt+↓</td></tr><tr><td>向下移动行</td><td>Alt+↓</td></tr><tr><td>更改所有匹配项</td><td>Ctrl+F2</td></tr><tr><td>替换</td><td>Ctrl+H</td></tr><tr><td>查找</td><td>Ctrl+F</td></tr><tr><td>跳转到某行代码</td><td>Ctrl+G</td></tr><tr><td>跳转到某个方法</td><td>Ctrl+Shift+O</td></tr><tr><td>跳转文件</td><td>Ctrl+P</td></tr><tr><td>最近文件</td><td>Ctrl+E</td></tr><tr><td>切换块注释</td><td>Shift+Alt+A</td></tr><tr><td>切换行注释</td><td>Ctrl+/</td></tr><tr><td>查找所有引用</td><td>Shift+F12</td></tr><tr><td>在上面插入行</td><td>Ctrl+Shift+↩</td></tr><tr><td>在上面添加光标</td><td>Ctrl+Alt+↑</td></tr><tr><td>在下面插入行</td><td>Ctrl+↩</td></tr><tr><td>在下面添加光标</td><td>Ctrl+Alt+↓</td></tr><tr><td>在行尾添加光标</td><td>Shift+Alt+I</td></tr><tr><td>打开/关闭编辑器</td><td>Ctrl+Shift+E</td></tr><tr><td>打开/关闭目录树</td><td>Ctrl+Shift+I</td></tr><tr><td>预览</td><td>Ctrl+Shift+P</td></tr><tr><td>上传</td><td>Ctrl+Shift+U</td></tr><tr><td>Show Accessibility Help</td><td>Alt+F1</td></tr><tr><td>以递归方式展开</td><td>Ctrl+K Ctrl+]</td></tr><tr><td>以递归方式折叠</td><td>Ctrl+K Ctrl+[</td></tr><tr><td>全部展开</td><td>Ctrl+K Ctrl+J</td></tr><tr><td>全部折叠</td><td>Ctrl+K Ctrl+O</td></tr><tr><td>切换Tab键是否移动焦点</td><td>Ctrl+M</td></tr><tr><td>删除行注释</td><td>Ctrl+K Ctrl+U</td></tr><tr><td>将上次选择移动到下一个查找匹配项</td><td>Ctrl+K Ctrl+D</td></tr><tr><td>将选择添加到下一个查找匹配项</td><td>Ctrl+D</td></tr><tr><td>展开</td><td>Ctrl+Shift+]</td></tr><tr><td>打开侧边的定义</td><td>Ctrl+K Ctrl+F12</td></tr><tr><td>打开选择</td><td>Shift+Alt+→</td></tr><tr><td>折叠</td><td>Ctrl+Shift+[</td></tr><tr><td>折叠级别1</td><td>Ctrl+K Ctrl+1</td></tr><tr><td>折叠级别2</td><td>Ctrl+K Ctrl+2</td></tr><tr><td>折叠级别3</td><td>Ctrl+K Ctrl+3</td></tr><tr><td>折叠级别4</td><td>Ctrl+K Ctrl+4</td></tr><tr><td>折叠级别5</td><td>Ctrl+K Ctrl+5</td></tr><tr><td>折叠级别6</td><td>Ctrl+K Ctrl+6</td></tr><tr><td>折叠级别7</td><td>Ctrl+K Ctrl+7</td></tr><tr><td>折叠级别8</td><td>Ctrl+K Ctrl+8</td></tr><tr><td>折叠级别9</td><td>Ctrl+K Ctrl+9</td></tr><tr><td>显示悬停</td><td>Ctrl+K Ctrl+I</td></tr><tr><td>显示编辑器上下文菜单</td><td>Shift+F10</td></tr><tr><td>替换为上一个值</td><td>Ctrl+Shift+,</td></tr><tr><td>替换为下一个值</td><td>Ctrl+Shift+.</td></tr><tr><td>查找上一个</td><td>Shift+F3</td></tr><tr><td>查找上一个选择</td><td>Ctrl+Shift+F3</td></tr><tr><td>查找下一个</td><td>F3</td></tr><tr><td>查找下一个选择</td><td>Ctrl+F3</td></tr><tr><td>查看定义</td><td>Alt+F12</td></tr><tr><td>添加行注释</td><td>Ctrl+K Ctrl+C</td></tr><tr><td>缩小选择</td><td>Shift+Alt+←</td></tr><tr><td>行减少缩进</td><td>Ctrl+[</td></tr><tr><td>行缩进</td><td>Ctrl+]</td></tr><tr><td>裁剪尾随空格</td><td>Ctrl+K Ctrl+X</td></tr><tr><td>触发参数提示</td><td>Ctrl+Shift+Space</td></tr><tr><td>触发建议</td><td>Ctrl+Space</td></tr><tr><td>转到上一个错误或警告</td><td>Shift+F8</td></tr><tr><td>转到喜爱个错误或警告</td><td>F8</td></tr><tr><td>转到定义</td><td>Ctrl+F12</td></tr><tr><td>转到括号</td><td>Ctrl+Shift+\</td></tr><tr><td>选择所有找到的查找匹配项</td><td>Ctrl+Shift+L</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sublime Text3 常用插件</title>
      <link href="Plugin-note/Sublime-Text3/"/>
      <url>Plugin-note/Sublime-Text3/</url>
      
        <content type="html"><![CDATA[<h2 id="HTML-5"><a href="#HTML-5" class="headerlink" title="HTML 5"></a>HTML 5</h2><p>规范html 5规范。</p><h2 id="Emmet"><a href="#Emmet" class="headerlink" title="Emmet"></a>Emmet</h2><p>快捷键。  zen coding升级版。</p><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p><a href="https://jingyan.baidu.com/article/f96699bb226379894e3c1b37.html">百度经验</a></p><p><img src="https://cdn.ebig.vip/Sublime-PyV8.png" class="lazyload" data-srcset="https://cdn.ebig.vip/Sublime-PyV8.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>文件位置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Preferences</span></span><br><span class="line"><span class="string">Brower</span> <span class="string">Packages</span></span><br><span class="line"><span class="string">上一级</span> <span class="string">Installed</span> <span class="string">Packages</span></span><br><span class="line"><span class="string">新建PyV8</span> <span class="string">在里面解压文件。</span></span><br></pre></td></tr></table></figure><h2 id="JSFormat"><a href="#JSFormat" class="headerlink" title="JSFormat"></a>JSFormat</h2><p>javaScript 的代码格式化插件。</p><p>在已压缩的JS文件中，右键选择jsFormat或者使用默认快捷键（Ctrl+Alt+F）。<br><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/jsFormat.gif" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/jsFormat.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="JQuery"><a href="#JQuery" class="headerlink" title="JQuery"></a>JQuery</h2><p>jQ函数提示。<br><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/jquery.gif" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/jquery.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="DocBlockr"><a href="#DocBlockr" class="headerlink" title="DocBlockr"></a>DocBlockr</h2><p>生成优美注释。</p><p>输入/*、/**然后回车。</p><p><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/basic.gif" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/basic.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="ColorPicker"><a href="#ColorPicker" class="headerlink" title="ColorPicker"></a>ColorPicker</h2><p>快捷键Windows: ctrl+shift+c。</p><p><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/iY1DDCRG5TsyR.png" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/iY1DDCRG5TsyR.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="ColorHighlighter"><a href="#ColorHighlighter" class="headerlink" title="ColorHighlighter"></a>ColorHighlighter</h2><p>显示所选颜色值的颜色，并集成了ColorPicker</p><h2 id="AutoFileName"><a href="#AutoFileName" class="headerlink" title="AutoFileName"></a>AutoFileName</h2><p>快捷输入文件名，输入”/”即可看到相对于本项目文件夹的其他文件。<br><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/autofilename.gif" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/autofilename.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="LESS"><a href="#LESS" class="headerlink" title="LESS"></a>LESS</h2><p>LESS高亮插件。<br><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/less.gif" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/less.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="Alignment"><a href="#Alignment" class="headerlink" title="Alignment"></a>Alignment</h2><p>”=”号对齐 ，</p><p>默认快捷键Ctrl+Alt+A和QQ截屏冲突，可设置其他快捷键如：Ctrl+Shift+Alt+A；先选择要对齐的文本。</p><p><img src="http://www.xuanfengge.com/wp-content/uploads/2013/12/align.gif" class="lazyload" data-srcset="http://www.xuanfengge.com/wp-content/uploads/2013/12/align.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="SideBarEnhancements"><a href="#SideBarEnhancements" class="headerlink" title="SideBarEnhancements"></a>SideBarEnhancements</h2><p>侧栏菜单扩充功能。</p><h2 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h2><p>对应的快捷键与分屏情况如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Alt+Shift+1</span>       <span class="string">Single</span>         <span class="string">独屏</span></span><br><span class="line"><span class="string">Alt+Shift+2</span>       <span class="string">Columns:2</span>      <span class="string">纵向二栏分屏</span></span><br><span class="line"><span class="string">Alt+Shift+3</span>       <span class="string">Columns:3</span>      <span class="string">纵向三栏分屏</span></span><br><span class="line"><span class="string">Alt+Shift+4</span>       <span class="string">Columns:4</span>      <span class="string">纵向四栏分屏</span></span><br><span class="line"><span class="string">Alt+Shift+8</span>       <span class="string">Rows:2</span>         <span class="string">横向二栏分屏</span></span><br><span class="line"><span class="string">Alt+Shift+9</span>       <span class="string">Rows:3</span>         <span class="string">横向三栏分屏</span></span><br><span class="line"><span class="string">Alt+Shift+5</span>       <span class="string">Grid</span>           <span class="string">四格式分屏</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vant Weapp 安装</title>
      <link href="wx-mini/wx-mini-Vant-Weapp/"/>
      <url>wx-mini/wx-mini-Vant-Weapp/</url>
      
        <content type="html"><![CDATA[<h2 id="npm-安装方式"><a href="#npm-安装方式" class="headerlink" title="npm 安装方式"></a>npm 安装方式</h2><h3 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h3><p>由于  Vue是基于 Node.js的,当然少不了Node.js的安装。</p><p>由于 官方网站下载速度过慢，本站给出 <a href="http://cdn.ebig.vip/node-v12.6.0-x64.msi">Node-v12.6.0-x64.msi</a> 下载链接。</p><p>这是我使用的  <a href="https://www.cnblogs.com/jianguo221/p/11487532.html">安装步骤</a>， 很详细，一步一步来就行！</p><h3 id="安装Vant-Weapp"><a href="#安装Vant-Weapp" class="headerlink" title="安装Vant Weapp"></a>安装Vant Weapp</h3><p>安装好node.js 配好环境后 ，便可以进入项目中了！</p><p>需要注意的是<code>package.json</code>和<code>node_modules</code> 必须在 <code>miniprogram</code> 目录下</p><p>操作详细如图：<br><img src="https://wbig.gitee.io/cdn/img/Vant-Weapp-img01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Vant-Weapp-img01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h4 id="步骤一"><a href="#步骤一" class="headerlink" title="步骤一"></a>步骤一</h4><blockquote><p>先上图</p></blockquote><p><img src="https://wbig.gitee.io/cdn/img/Vant-Weapp-img02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Vant-Weapp-img02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>在cmd中。如果直接输入 下面 ① 命令。将会导致 ** WANRING**</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vant&#x2F;weapp -S --production</span><br></pre></td></tr></table></figure><p>原因是  此文件并没有 <code>package.json</code>和<code>node_modules</code> 这两个文件。</p><p>于是需要  ② 命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><p>然后一路都可以 回车，当然也可以写东西！不过还是回车简单</p><p>最后再用 ① 命令  即可。</p><p>出现的WANRING是因为第二部回车没有填东西的缘故！</p><h4 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h4><p>构建 npm 包</p><p>打开微信开发者工具，点击 <strong>工具</strong> -&gt; <strong>构建 npm</strong>，并勾选 使用 <strong>npm 模块</strong> 选项，构建完成后，即可引入组件。<br>如图：<br><img src="https://wbig.gitee.io/cdn/img/Vant-Weapp-img03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Vant-Weapp-img03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>构建后的目录结构如图所示：</p><p><img src="https://wbig.gitee.io/cdn/img/Vant-Weapp-img04.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Vant-Weapp-img04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h4 id="步骤三"><a href="#步骤三" class="headerlink" title="步骤三"></a>步骤三</h4><p>将 app.json 中的 “style”: “v2” 去除！</p><p>并且引入组件，为了方便使用，直接在<code> app.json</code> 全局文件中引用即可！</p><p>附上所有的 组件包引用：</p><hr><p>注意：这是  npm构建方式引入包的方式。</p><p>全局引入位置：</p><p><img src="https://wbig.gitee.io/cdn/img/Vant-Weapp-img05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Vant-Weapp-img05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><blockquote><p>细心可以发现： 这些路径都是  ① 所对应的的路径！</p></blockquote><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&quot;usingComponents&quot;: &#123;</span><br><span class="line">  &quot;van-icon&quot;: &quot;@vant&#x2F;weapp&#x2F;icon&quot;,</span><br><span class="line">  &quot;van-button&quot;: &quot;@vant&#x2F;weapp&#x2F;button&quot;,</span><br><span class="line">  &quot;van-cell&quot;: &quot;@vant&#x2F;weapp&#x2F;cell&quot;,</span><br><span class="line">  &quot;van-cell-group&quot;: &quot;@vant&#x2F;weapp&#x2F;cell-group&quot;,</span><br><span class="line">  &quot;van-image&quot;: &quot;@vant&#x2F;weapp&#x2F;image&quot;,</span><br><span class="line">  &quot;van-row&quot;: &quot;@vant&#x2F;weapp&#x2F;row&quot;,</span><br><span class="line">  &quot;van-col&quot;: &quot;@vant&#x2F;weapp&#x2F;col&quot;,</span><br><span class="line">  &quot;van-popup&quot;: &quot;@vant&#x2F;weapp&#x2F;popup&quot;,</span><br><span class="line">  &quot;van-transition&quot;: &quot;@vant&#x2F;weapp&#x2F;transition&quot;,</span><br><span class="line">  &quot;van-checkbox&quot;: &quot;@vant&#x2F;weapp&#x2F;checkbox&quot;,</span><br><span class="line">  &quot;van-checkbox-group&quot;: &quot;@vant&#x2F;weapp&#x2F;checkbox-group&quot;,</span><br><span class="line">  &quot;van-datetime-picker&quot;: &quot;@vant&#x2F;weapp&#x2F;datetime-picker&quot;,</span><br><span class="line">  &quot;van-field&quot;: &quot;@vant&#x2F;weapp&#x2F;field&quot;,</span><br><span class="line">  &quot;van-picker&quot;: &quot;@vant&#x2F;weapp&#x2F;picker&quot;,</span><br><span class="line">  &quot;van-radio&quot;: &quot;@vant&#x2F;weapp&#x2F;radio&quot;,</span><br><span class="line">  &quot;van-radio-group&quot;: &quot;@vant&#x2F;weapp&#x2F;radio-group&quot;,</span><br><span class="line">  &quot;van-rate&quot;: &quot;@vant&#x2F;weapp&#x2F;rate&quot;,</span><br><span class="line">  &quot;van-search&quot;: &quot;@vant&#x2F;weapp&#x2F;search&quot;,</span><br><span class="line">  &quot;van-slider&quot;: &quot;@vant&#x2F;weapp&#x2F;slider&quot;,</span><br><span class="line">  &quot;van-stepper&quot;: &quot;@vant&#x2F;weapp&#x2F;stepper&quot;,</span><br><span class="line">  &quot;van-switch&quot;: &quot;@vant&#x2F;weapp&#x2F;switch&quot;,</span><br><span class="line">  &quot;van-uploader&quot;: &quot;@vant&#x2F;weapp&#x2F;uploader&quot;,</span><br><span class="line">  &quot;van-action-sheet&quot;: &quot;@vant&#x2F;weapp&#x2F;action-sheet&quot;,</span><br><span class="line">  &quot;van-dialog&quot;: &quot;@vant&#x2F;weapp&#x2F;dialog&quot;,</span><br><span class="line">  &quot;van-dropdown-menu&quot;: &quot;@vant&#x2F;weapp&#x2F;dropdown-menu&quot;,</span><br><span class="line">  &quot;van-dropdown-item&quot;: &quot;@vant&#x2F;weapp&#x2F;dropdown-item&quot;,</span><br><span class="line">  &quot;van-loading&quot;: &quot;@vant&#x2F;weapp&#x2F;loading&quot;,</span><br><span class="line">  &quot;van-notify&quot;: &quot;@vant&#x2F;weapp&#x2F;notify&quot;,</span><br><span class="line">  &quot;van-overlay&quot;: &quot;@vant&#x2F;weapp&#x2F;overlay&quot;,</span><br><span class="line">  &quot;van-swipe-cell&quot;: &quot;@vant&#x2F;weapp&#x2F;swipe-cell&quot;,</span><br><span class="line">  &quot;van-toast&quot;: &quot;@vant&#x2F;weapp&#x2F;toast&quot;,</span><br><span class="line">  &quot;van-circle&quot;: &quot;@vant&#x2F;weapp&#x2F;circle&quot;,</span><br><span class="line">  &quot;van-collapse&quot;: &quot;@vant&#x2F;weapp&#x2F;collapse&quot;,</span><br><span class="line">  &quot;van-collapse-item&quot;: &quot;@vant&#x2F;weapp&#x2F;collapse-item&quot;,</span><br><span class="line">  &quot;van-count-down&quot;: &quot;@vant&#x2F;weapp&#x2F;count-down&quot;,</span><br><span class="line">  &quot;van-divider&quot;: &quot;@vant&#x2F;weapp&#x2F;divider&quot;,</span><br><span class="line">  &quot;van-notice-bar&quot;: &quot;@vant&#x2F;weapp&#x2F;notice-bar&quot;,</span><br><span class="line">  &quot;van-panel&quot;: &quot;@vant&#x2F;weapp&#x2F;panel&quot;,</span><br><span class="line">  &quot;van-progress&quot;: &quot;@vant&#x2F;weapp&#x2F;progress&quot;,</span><br><span class="line">  &quot;van-skeleton&quot;: &quot;@vant&#x2F;weapp&#x2F;skeleton&quot;,</span><br><span class="line">  &quot;van-steps&quot;: &quot;@vant&#x2F;weapp&#x2F;steps&quot;,</span><br><span class="line">  &quot;van-sticky&quot;: &quot;@vant&#x2F;weapp&#x2F;sticky&quot;,</span><br><span class="line">  &quot;van-tag&quot;: &quot;@vant&#x2F;weapp&#x2F;tag&quot;,</span><br><span class="line">  &quot;van-tree-select&quot;: &quot;@vant&#x2F;weapp&#x2F;tree-select&quot;,</span><br><span class="line">  &quot;van-grid&quot;: &quot;@vant&#x2F;weapp&#x2F;grid&quot;,</span><br><span class="line">  &quot;van-grid-item&quot;: &quot;@vant&#x2F;weapp&#x2F;grid-item&quot;,</span><br><span class="line">  &quot;van-index-bar&quot;: &quot;@vant&#x2F;weapp&#x2F;index-bar&quot;,</span><br><span class="line">  &quot;van-index-anchor&quot;: &quot;@vant&#x2F;weapp&#x2F;index-anchor&quot;,</span><br><span class="line">  &quot;van-sidebar&quot;: &quot;@vant&#x2F;weapp&#x2F;sidebar&quot;,</span><br><span class="line">  &quot;van-sidebar-item&quot;: &quot;@vant&#x2F;weapp&#x2F;sidebar-item&quot;,</span><br><span class="line">  &quot;van-nav-bar&quot;: &quot;@vant&#x2F;weapp&#x2F;nav-bar&quot;,</span><br><span class="line">  &quot;van-tab&quot;: &quot;@vant&#x2F;weapp&#x2F;tab&quot;,</span><br><span class="line">  &quot;van-tabs&quot;: &quot;@vant&#x2F;weapp&#x2F;tabs&quot;,</span><br><span class="line">  &quot;van-tabbar&quot;: &quot;@vant&#x2F;weapp&#x2F;tabbar&quot;,</span><br><span class="line">  &quot;van-tabbar-item&quot;: &quot;@vant&#x2F;weapp&#x2F;tabbar-item&quot;,</span><br><span class="line">  &quot;van-area&quot;: &quot;@vant&#x2F;weapp&#x2F;area&quot;,</span><br><span class="line">  &quot;van-card&quot;: &quot;@vant&#x2F;weapp&#x2F;card&quot;,</span><br><span class="line">  &quot;van-submit-bar&quot;: &quot;@vant&#x2F;weapp&#x2F;submit-bar&quot;,</span><br><span class="line">  &quot;van-goods-action&quot;: &quot;@vant&#x2F;weapp&#x2F;goods-action&quot;,</span><br><span class="line">  &quot;van-goods-action-icon&quot;: &quot;@vant&#x2F;weapp&#x2F;goods-action-icon&quot;,</span><br><span class="line">  &quot;van-goods-action-button&quot;: &quot;@vant&#x2F;weapp&#x2F;goods-action-button&quot;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="下载源码方式"><a href="#下载源码方式" class="headerlink" title="下载源码方式"></a>下载源码方式</h2><p><a href="https://github.com/youzan/vant-demo">vant-demo</a></p>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> Vant Weapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>非谷歌官方插件扩展安装</title>
      <link href="Plugin-note/Chrome-Plug/"/>
      <url>Plugin-note/Chrome-Plug/</url>
      
        <content type="html"><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>如图所示，从 <a href="https://greasyfork.org/zh-CN/scripts/by-site/*">Greasy Fork</a>上下载的js插件  拖拽安装图如图所示：</p><p><img src="https://cdn.ebig.vip/chrome-plug.png" class="lazyload" data-srcset="https://cdn.ebig.vip/chrome-plug.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><blockquote><p>Tampermonkey</p></blockquote><p>俗称油猴。<br>谷歌商店中搜索  一般都是第一个！<br><img src="https://cdn.ebig.vip/chrome-plug-tampermonkey.png" class="lazyload" data-srcset="https://cdn.ebig.vip/chrome-plug-tampermonkey.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>然后就可以了！</p><h2 id="附"><a href="#附" class="headerlink" title="附"></a>附</h2><p><a href="https://ebig.vip/download/">本站工具下载页</a></p><p>此文章内容用到的 <a href="http://cdn.ebig.vip/google-Access-assistant_v2.3.2.zip">谷歌访问助手</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github 图床</title>
      <link href="Hexo/hexo-github-picgo/"/>
      <url>Hexo/hexo-github-picgo/</url>
      
        <content type="html"><![CDATA[<h2 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h2><p>之前用的七牛云，我以为10G存储应该OK的，发现不是存储的问题，是流量的问题。</p><p>存储才用了500M, 发现流量已经超了。并欠费。还不通知！</p><blockquote><p>主要是七牛云的HTTPS服务开了，这个流量不算免费的里面，所以收费了。<br>当然不开这个。我感觉加载图片应该挺慢的，但下载的确快，过段时间做成下载文件的存储</p></blockquote><p>我找到了GitHub + PicGo 方式做一个图床</p><p>但不知道文件 能不能上传下载。</p><p>先将图片问题解决了再说。</p><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>创建一个新的仓库。一定是公开的仓库</p><p>然后在 <code>Github</code> -&gt; <code>Settings</code> -&gt;  -&gt; <code>personal accese token</code> 这里新建一个 token ，打开 repo 权限，然后将显示的 token 复制出来（最好存下来，这个 token 只会出现一次）。</p><blockquote><p>存住，以后肯定用的到。</p></blockquote><p>然后将相应的东西，填到PicGo上就好了。</p><h3 id="jsDelivr加速"><a href="#jsDelivr加速" class="headerlink" title="jsDelivr加速"></a>jsDelivr加速</h3><p>由于GitHub访问过慢，所以使用jsDelivr加速。</p><blockquote><p>主要是免费</p></blockquote><p>当然，我将文件存在了分支下<code>file/</code><br>自定义域名为<br><code>https://cdn.jsdelivr.net/gh/wbig/ebigPic</code></p><p>如果不自定义域名，其默认为<code>https://github.com/wbig/ebigPic</code></p><p>就是将<code>github.com</code> 换为<code>cdn.jsdelivr.net</code></p><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p>图片的上传解决。</p><p>注意：</p><ol><li>PicGo并不能将仓库中的文件删除，它删除的仅仅是这个图的链接。</li><li>不支持文件的上传。</li></ol><p>我找到一种笨的方法。<br><img src="https://wbig.gitee.io/cdn/img/Picgo-uploadfile.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Picgo-uploadfile.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p>上传，然后 使用我的链接</p><p><code>https://wbig.gitee.io/ebigpic/file/UpupooResource.zip</code></p><p>注意：文件不得大于25M。</p><h2 id="免费图床"><a href="#免费图床" class="headerlink" title="免费图床"></a>免费图床</h2><p><a href="https://pic.gimhoy.com/">Gimhoy图床</a></p><h2 id="网盘直链获取工具v1-2"><a href="#网盘直链获取工具v1-2" class="headerlink" title="网盘直链获取工具v1.2"></a>网盘直链获取工具v1.2</h2><p><a href="https://link.gimhoy.com/">网盘直链获取工具v1.2</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 图床 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axure基础</title>
      <link href="Axure/axure-interactive/"/>
      <url>Axure/axure-interactive/</url>
      
        <content type="html"><![CDATA[<h2 id="Axure-交互样式"><a href="#Axure-交互样式" class="headerlink" title="Axure 交互样式"></a>Axure 交互样式</h2><ul><li>鼠标悬停</li><li>鼠标按下</li></ul><p>操作如下：</p><div>    <img src="https://cdn.ebig.vip/axure-selected.gif" class="lazyload" data-srcset="https://cdn.ebig.vip/axure-selected.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><p>应用场景： 页面导航栏等…</p><p>另外设置其他的也是此样式有两种做法：</p><ol><li>复制，粘贴… 改内容。</li><li>设置选项组<ol><li>鼠标选中</li><li>鼠标禁用</li><li>鼠标获取焦点</li></ol></li></ol><p><img src="https://img.vim-cn.com/46/14658d46f7c764a99ccade81fe413674ab1211.png" class="lazyload" data-srcset="https://img.vim-cn.com/46/14658d46f7c764a99ccade81fe413674ab1211.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="选项组" title="选项组"></p><h2 id="Axure-条件判断"><a href="#Axure-条件判断" class="headerlink" title="Axure 条件判断"></a>Axure 条件判断</h2><p>操作如下：</p><div>    <img src="https://wbig.gitee.io/cdn/img/axure-if.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-if.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><p>应用： 设置条件，显示或者隐藏，主要是附带条件操作！</p><p>当然还有更简单的方法进行这种设置：<br><img src="https://cdn.ebig.vip/axure-if.png" class="lazyload" data-srcset="https://cdn.ebig.vip/axure-if.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="if" title="if"></p><h2 id="Axure-局部变量和全局变量"><a href="#Axure-局部变量和全局变量" class="headerlink" title="Axure 局部变量和全局变量"></a>Axure 局部变量和全局变量</h2><h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><div>    <img src="https://wbig.gitee.io/cdn/img/axure-localvariable.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-localvariable.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div>### 全局变量<div>    <img src="https://wbig.gitee.io/cdn/img/axure-globalvariable.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-globalvariable.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><h2 id="Axure-层级-与隐藏"><a href="#Axure-层级-与隐藏" class="headerlink" title="Axure 层级 与隐藏"></a>Axure 层级 与隐藏</h2><h3 id="层级"><a href="#层级" class="headerlink" title="层级"></a>层级</h3><p>上层会遮挡下层</p><h3 id="隐藏"><a href="#隐藏" class="headerlink" title="隐藏"></a>隐藏</h3><p>隐藏当前元件，但不改变元件的层级。  只是隐藏了！</p><p><img src="https://wbig.gitee.io/cdn/img/axure-hierarchy.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-hierarchy.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="axure-hierarchy"></p><p>在软件中，后托进来的东西是在顶层的。</p><p>当然，在原型设置的过程中，通过设置层级关系，来确保功能完整可用！</p><h2 id="Axure-元件"><a href="#Axure-元件" class="headerlink" title="Axure 元件"></a>Axure 元件</h2><h3 id="矩形"><a href="#矩形" class="headerlink" title="矩形"></a>矩形</h3><ul><li>变换形状</li><li>填充</li><li>编辑</li><li>序列号</li><li>按钮 </li></ul><h3 id="文本框"><a href="#文本框" class="headerlink" title="文本框"></a>文本框</h3><ul><li>边框处理</li><li>类型 </li></ul><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><p><a href="https://unsplash.com/" title="无版权图片网站">无版权图片网站</a></p><h3 id="动态面板"><a href="#动态面板" class="headerlink" title="动态面板"></a>动态面板</h3><p> 算是最常用的元件之一，仅次于矩形，实用性最高。</p><p> 可以使用动态面板做丰富的交互效果，最具特色的元件之一。</p><p> 双击 进入动态面板的<code>编辑状态</code>！ 状态可以有多种，但是同一时刻只能显示一种。</p><h4 id="自适应"><a href="#自适应" class="headerlink" title="自适应"></a>自适应</h4><p> 实验： 设置不同的状态中 不同大小底色的矩形。</p><p>设置交互，可以循环状态！  </p><p>在交互中的更多选项中   推动页面内容中其他的元素变化位置！</p><ul><li><input disabled="" type="checkbox"> 循环间隔 ____ 秒</li><li><input disabled="" type="checkbox"> 如果隐藏则显示</li><li><input checked="" disabled="" type="checkbox"> 推动和拉动元件</li></ul><h4 id="滚动条"><a href="#滚动条" class="headerlink" title="滚动条"></a>滚动条</h4><p>面板大小是不变的。</p><p>一般是表格。有多行多列。</p><p>需要右键手动设置 是滚动行，还是滚动列！</p><h4 id="固定位置"><a href="#固定位置" class="headerlink" title="固定位置"></a>固定位置</h4><p>一般是广告位！网站客服会话窗口！</p><h4 id="100-宽度"><a href="#100-宽度" class="headerlink" title="100%宽度"></a>100%宽度</h4><p>一般是导航栏，按照宽度进行自适应！</p><h4 id="手机场景"><a href="#手机场景" class="headerlink" title="手机场景"></a>手机场景</h4><p>上下拖动进行移动内容！设置交互</p><p>设置界限    设置动态面板的大小</p><blockquote><p>顶部 ： &lt;= 0<br>  底部 ： &gt;= 面板高度</p></blockquote><h4 id="中继器"><a href="#中继器" class="headerlink" title="中继器"></a>中继器</h4><p>中继器是一个容器，是用来承载数据的！</p><div>    <img src="https://wbig.gitee.io/cdn/img/axure-RPrepeater.gif" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-RPrepeater.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div>中继器中添加行，删除行，筛选，排序。~~（弃用）预览地址：[中继器](https://4xydxc.axshare.com)~~<h4 id="内联框架"><a href="#内联框架" class="headerlink" title="内联框架"></a>内联框架</h4><p><del>（弃用）预览地址：<a href="https://geshut.axshare.com/">内联框架</a></del></p><h4 id="元件函数"><a href="#元件函数" class="headerlink" title="元件函数"></a>元件函数</h4><h4 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h4><p>失败</p><h4 id="鼠标指针函数"><a href="#鼠标指针函数" class="headerlink" title="鼠标指针函数"></a>鼠标指针函数</h4><p>跳过</p><h4 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h4><table><thead><tr><th>字符串函数</th><th>作用</th></tr></thead><tbody><tr><td>length</td><td>长度</td></tr><tr><td>charAt</td><td>指定位置的字符</td></tr><tr><td>charCodeAt</td><td>指定位置Unicode编码</td></tr><tr><td>concat</td><td>连接多个字符串</td></tr><tr><td>indexOf</td><td>检索</td></tr><tr><td>lastIndexOf</td><td>从后向前搜索</td></tr><tr><td>replace</td><td>替换片段</td></tr><tr><td>Slice</td><td>提取片段</td></tr><tr><td>split</td><td>分离</td></tr><tr><td>substr</td><td>从指定位置提取一定数量的字符</td></tr><tr><td>substring</td><td>提取片段</td></tr><tr><td>toLowerCase</td><td>小写</td></tr><tr><td>toUpperCase</td><td>大写</td></tr><tr><td>trim</td><td>去除两端空格</td></tr></tbody></table><h4 id="中继器函数"><a href="#中继器函数" class="headerlink" title="中继器函数"></a>中继器函数</h4><p>跳过</p><h4 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h4><p>跳过</p><h4 id="函数案例"><a href="#函数案例" class="headerlink" title="函数案例"></a>函数案例</h4><p><img src="https://wbig.gitee.io/cdn/img/axure-20200215-001.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-20200215-001.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><p><img src="https://wbig.gitee.io/cdn/img/axure-20200215-002.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/axure-20200215-002.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> Axure </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Axure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解除Chrome助手提示</title>
      <link href="Plugin-note/Chrome-relieve/"/>
      <url>Plugin-note/Chrome-relieve/</url>
      
        <content type="html"><![CDATA[<h2 id="Chrome-插件-提示"><a href="#Chrome-插件-提示" class="headerlink" title="Chrome 插件 提示"></a>Chrome 插件 提示</h2><p>请停用以开发者模式运行的扩展程序：<br><img src="https://wbig.gitee.io/cdn/img/Chrome-relieve-sign.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/Chrome-relieve-sign.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>网上的补丁方式已经不能使用，因为现在谷歌版本都到 <code>80.0.3970.5</code></p><p>同时我找了很久，找到了注册表方式解决的方法：</p><p><code>win + r</code>  打开注册表</p><p>按照下面的路径：</p><blockquote><p>HKEY_CURRENT_USER<br>Software<br>Google<br>Update<br>ClientState<br>{8A69D345-D564-463c-AFF1-A69D9E530F96}</p></blockquote><p>在空白区右键，并新建一个字符串值：</p><div class="gallery ">              <p><img src="https://img.vim-cn.com/32/294162da276414d5560f7677b32722af40cc37.png" class="lazyload" data-srcset="https://img.vim-cn.com/32/294162da276414d5560f7677b32722af40cc37.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="新建一个字符串值"></p>            </div><p>如图所示：</p><div class="gallery ">              <p><img src="https://img.vim-cn.com/71/eeadf3abb5d5827ea2234fcea0ba5b8ce9787a.png" class="lazyload" data-srcset="https://img.vim-cn.com/71/eeadf3abb5d5827ea2234fcea0ba5b8ce9787a.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"></p>            </div><p>然后重启浏览器就好！</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chrome </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小程序模版搭建以及传参</title>
      <link href="wx-mini/wx-mini-tpl/"/>
      <url>wx-mini/wx-mini-tpl/</url>
      
        <content type="html"><![CDATA[<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="页面"><a href="#页面" class="headerlink" title="页面"></a>页面</h3><p>用<code>tabBar</code> 绘制两个页面，方便测试观察。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&quot;tabBar&quot;: &#123;</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;iconPath&quot;: &quot;images&#x2F;qq.png&quot;,</span><br><span class="line">            &quot;selectedIconPath&quot;: &quot;images&#x2F;qq_s.png&quot;,</span><br><span class="line">            &quot;pagePath&quot;: &quot;pages&#x2F;QQ&#x2F;QQ&quot;,</span><br><span class="line">            &quot;text&quot;: &quot;QQ&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;iconPath&quot;: &quot;images&#x2F;weixin.png&quot;,</span><br><span class="line">            &quot;selectedIconPath&quot;: &quot;images&#x2F;weixin_s.png&quot;,</span><br><span class="line">            &quot;pagePath&quot;: &quot;pages&#x2F;WEIXIN&#x2F;WEIXIN&quot;,</span><br><span class="line">            &quot;text&quot;: &quot;微信&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ps: 路径皆为项目中相对路径！</p></blockquote><h3 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h3><p>新建 文件夹<code>templates</code>与<code>pages</code>同级，绘制模版 以及 样式！</p><p>模版在搭建的时候，出现了两个问题</p><ul><li>一个是采用 <code>flex</code>弹性布局。使得 消息条的时间 不能浮动。</li></ul><p>最后采用了绝对路径锁死在后面了！才使得时间在最后！</p><ul><li>另一个是传参问题！后面介绍！ </li></ul><p>模版以及样式表代码如下：</p><blockquote><p>注意： 将数据都定为了动态数据获取：image, noReadCount等</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--templates&#x2F;messages&#x2F;messages.wxml--&gt;</span><br><span class="line">&lt;template name&#x3D;&quot;messages&quot;&gt;</span><br><span class="line">    &lt;view class&#x3D;&quot;wrapper&quot;&gt;</span><br><span class="line">        &lt;view class&#x3D;&quot;messages&quot;&gt;</span><br><span class="line">            &lt;view  class&#x3D;&quot;img&quot;&gt;</span><br><span class="line">                &lt;image src&#x3D;&quot;&#123;&#123;image&#125;&#125;&quot;&gt;&lt;&#x2F;image&gt;</span><br><span class="line">            &lt;&#x2F;view&gt;</span><br><span class="line"></span><br><span class="line">            &lt;view class&#x3D;&quot;dot&quot; wx:hidden&#x3D;&quot;&#123;&#123;noReadCount&#125;&#125;&quot;&gt;</span><br><span class="line">                &lt;text&gt;&#123;&#123;noReadCount&#125;&#125;&lt;&#x2F;text&gt;</span><br><span class="line">            &lt;&#x2F;view&gt;</span><br><span class="line"></span><br><span class="line">            &lt;view class&#x3D;&quot;user-content&quot;&gt;</span><br><span class="line">                &lt;view class&#x3D;&quot;user&quot;&gt;</span><br><span class="line">                    &lt;text&gt;&#123;&#123;user&#125;&#125;&lt;&#x2F;text&gt;</span><br><span class="line">                &lt;&#x2F;view&gt;</span><br><span class="line">                &lt;view  class&#x3D;&quot;content&quot;&gt;</span><br><span class="line">                    &lt;text&gt;&#123;&#123;content&#125;&#125;&lt;&#x2F;text&gt;</span><br><span class="line">                &lt;&#x2F;view&gt;</span><br><span class="line">            &lt;&#x2F;view&gt;</span><br><span class="line">            &lt;view class&#x3D;&quot;time&quot;&gt;</span><br><span class="line">                &lt;text  class&#x3D;&quot;time&quot;&gt;&#123;&#123;time&#125;&#125;&lt;&#x2F;text&gt;</span><br><span class="line">            &lt;&#x2F;view&gt;</span><br><span class="line">        &lt;&#x2F;view&gt;</span><br><span class="line">    &lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><p>模版样式表：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* templates&#x2F;messages&#x2F;messages.wxss *&#x2F;</span><br><span class="line">.messages&#123;</span><br><span class="line">    height: 100rpx;</span><br><span class="line">    border-bottom: 1px solid #e4e4e4;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    position: relative;</span><br><span class="line">    padding-bottom: 5rpx;</span><br><span class="line">&#125;</span><br><span class="line">.messages .img&#123;</span><br><span class="line">    width: 80rpx;</span><br><span class="line">    height: 80rpx;</span><br><span class="line">    background-color: rgb(160, 151, 151);</span><br><span class="line">    margin: 0 25rpx 0 15rpx;</span><br><span class="line">&#125;</span><br><span class="line">.messages .img image&#123;</span><br><span class="line">    width: 80rpx;</span><br><span class="line">    height: 80rpx;</span><br><span class="line">&#125;</span><br><span class="line">.messages .dot&#123;</span><br><span class="line">    vertical-align: top;</span><br><span class="line">    color: #fff;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    background-color: red;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    position: absolute;</span><br><span class="line">    bottom: 64rpx;</span><br><span class="line">    left: 71rpx;</span><br><span class="line">    text-align: center;</span><br><span class="line">    line-height: 36rpx;</span><br><span class="line">    width: 36rpx;</span><br><span class="line">    height: 36rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.messages .user-content&#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.messages .user-content .user&#123;</span><br><span class="line">    font-size: 17px;</span><br><span class="line">    color: #3c3c3c;</span><br><span class="line">&#125;</span><br><span class="line">.messages .user-content .content&#123;</span><br><span class="line">    top: -3rpx;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    font-weight: 300;</span><br><span class="line">    color: #999999;</span><br><span class="line">&#125;</span><br><span class="line">.messages .time&#123;</span><br><span class="line">    color: #999999;</span><br><span class="line">    font-weight: 300;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 6px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>首先导入模版文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages&#x2F;*&#x2F;*.wxml文件加入下面这句话--&gt;</span><br><span class="line">&lt;import src&#x3D;&quot;..&#x2F;..&#x2F;templates&#x2F;messages&#x2F;messages.wxml&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages&#x2F;*&#x2F;*.wxss文件加入下面这句话--&gt;</span><br><span class="line">@import &quot;..&#x2F;..&#x2F;templates&#x2F;messages&#x2F;messages.wxss&quot;</span><br></pre></td></tr></table></figure><p>文件目录结构如图<em>（../  表示回退上一级文件！）</em>：<del>（图片已丢失，见谅）</del></p><h2 id="传参问题"><a href="#传参问题" class="headerlink" title="传参问题"></a>传参问题</h2><p>在*.js 的data中构建静态数据对象数组： </p><blockquote><p>字段与模版中字段尽量一致！</p></blockquote><p><del>（图片已丢失，见谅）</del></p><h3 id="两种传参方式"><a href="#两种传参方式" class="headerlink" title="两种传参方式"></a>两种传参方式</h3><ul><li>一、在属性中定义data字段并一个个对应复制赋值</li></ul><p><del>（图片已丢失，见谅）</del></p><ul><li><p>二、在属性data中直接使用<code>...item</code></p><p> item是<code>wx:for</code>的数组当前项的变量名。</p></li></ul><p><del>（图片已丢失，见谅）</del></p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>如图所示：</p><div>    <img src="https://wbig.gitee.io/cdn/img/wx-tml-01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-tml-01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="效果图"/></div><h2 id="附带"><a href="#附带" class="headerlink" title="附带"></a>附带</h2><h3 id="Hexo插入动态图"><a href="#Hexo插入动态图" class="headerlink" title="Hexo插入动态图"></a>Hexo插入动态图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;img src&#x3D;&quot;https:&#x2F;&#x2F;img.vim-cn.com&#x2F;5f&#x2F;86cac6a7feb269d3dca238190ab86805110255.gif&quot; alt&#x3D;&quot;效果图&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><p>这种方式比较稳妥。用网上<code>&lt;iframe height=100 width=100 src=&quot;gif 图片地址&quot;&gt;</code>的方式会导致页面的**<em>侧栏**</em>消失，并且在手机端大小并不会相应的动态改变。</p><p>所以用原生的方式比较稳妥。</p><h3 id="端口占用"><a href="#端口占用" class="headerlink" title="端口占用"></a>端口占用</h3><p><img src="https://wbig.gitee.io/cdn/img/listen.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/listen.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="端口占用"></p>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> WXML模版 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微信小程序专属文件夹测试</title>
      <link href="wx-mini/wx-mini-test/"/>
      <url>wx-mini/wx-mini-test/</url>
      
        <content type="html"><![CDATA[<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><table><thead><tr><th align="center">参数</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center"><code>-p, --path</code></td><td align="center">自定义新文章的路径</td></tr><tr><td align="center"><code>-r, --replace </code></td><td align="center">如果存在同名文章，将其替换</td></tr><tr><td align="center"><code>-s, --slug </code></td><td align="center">文章的 Slug，作为新文章的文件名和发布后的 URL</td></tr></tbody></table><p>默认情况下，Hexo 会使用文章的标题来决定文章文件的路径。对于独立页面来说，Hexo 会创建一个以标题为名字的目录，并在目录中放置一个 <code>index.md</code> 文件。可以使用 <code>--path</code> 参数来覆盖上述行为、自行决定文件的目录：</p><table><thead><tr><th align="left">hexo new page –path wx-mini/test “test”</th></tr></thead></table><p>以上命令会创建一个  <code>source/wx-mini/test.md</code> 文件，同时 Front Matter 中的  <code>title</code> 为 “test”</p><p>注意！title 是必须指定的！如果你这么做并不能达到你的目的：</p><table><thead><tr><th align="left">hexo new page –path wx-mini/test</th></tr></thead></table><p>此时 Hexo 会创建 <code>source/_posts/wx-mini/test.md</code>，同时 <code>test.md</code> 的 Front Matter 中的 <code>title</code> 为 “page”。这是因为在上述命令中，hexo-cli 将 <code>page</code> 视为指定文章的标题、并采用默认的 <code>layout</code>。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><p>我用的第二种方式</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page --path wx-mini&#x2F;test</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>因为第一种方式，读不出来文件夹里的内容，并导致标签页与分类页也崩溃了。<br>生成后的结构如下：<br><img src="https://wbig.gitee.io/cdn/img/wx-test.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/wx-test.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="目录结构"></p>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello My Website</title>
      <link href="Hello-My-Website/"/>
      <url>Hello-My-Website/</url>
      
        <content type="html"><![CDATA[<h2 id="关于网站"><a href="#关于网站" class="headerlink" title="关于网站"></a>关于网站</h2><p>这是我的第一个线上网站，历经6天，才像个样子！</p><p>此网站部署在<em>Github</em>，我曾经尝试过本地服务器，但内网穿透比较难，知识有限，便搁置了！</p><p>用的Hexo和volantis主题配置。</p><p>然后把自己想说的，不想说的，该说的，不该说的，我应该都会在这里写下来。</p><blockquote><p>打断一下<br>我热爱祖国，热爱中国共产党！坚决拥护党的领导。<br>志存高远，振奋精神，做新时代的新青年！</p></blockquote><p>网站暂未提交到百度检索收录！等真正稳定了，文章有内容干货的时候再提交！</p><p>如果您对网站有任何问题以及见解，欢迎斧正！</p><h2 id="关于名字"><a href="#关于名字" class="headerlink" title="关于名字"></a>关于名字</h2><h3 id="big"><a href="#big" class="headerlink" title="big"></a>big</h3><p>BIG 是室友起的！<br>我是一个念旧的人，怀念大学时光里的有意思的和没意思的。<br><strong>那是我人生中最美好的回忆！</strong></p><h3 id="鲸落"><a href="#鲸落" class="headerlink" title="鲸落"></a>鲸落</h3><p>BIG依然过去了，<strong>鲸落</strong>是QQ昵称，也伴随了我大半个大学生活以及现在。</p><blockquote><p>一鲸落，万物生</p></blockquote><p>当然，我做不了这么伟大。哈哈！</p><blockquote><p>无论走到哪里都应该记住，过去都是假的！</p><footer><strong>-- 《百年孤独》</strong></footer></blockquote><blockquote><p>生活不应该是我们活过的日子<br>而是我们记住的日子<br>我们为了讲述而在记忆里重现的日子</p><footer><strong>-- 马尔克斯</strong></footer></blockquote><h2 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h2><p>感谢网上各路大神的网站源码给予指导。<br>本站基于<a href="https://hexo.io/">Hexo</a>，使用<a href="https://volantis.js.org/">Volantis</a>作为主题。</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Volantis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装Hexo</title>
      <link href="Hexo/hexo-install/"/>
      <url>Hexo/hexo-install/</url>
      
        <content type="html"><![CDATA[<h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><p><code>sudo yum install git-core</code></p><h2 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h2><p>使用以下命令安装 Node.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https:&#x2F;&#x2F;raw.github.com&#x2F;creationix&#x2F;nvm&#x2F;master&#x2F;install.sh | sh</span><br></pre></td></tr></table></figure><p>更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~&#x2F;.bash_profile</span><br></pre></td></tr></table></figure><p>安装 Node.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install stable</span><br></pre></td></tr></table></figure><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>用命令创建 hexo 文件夹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir hexo</span><br></pre></td></tr></table></figure><p>用命令安装 hexo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>初始化 hexo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo&#x2F;</span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>测试安装成功<br>打开 hexo 服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>打开浏览器访问 193.112.162.55:4000 即可看到搭建成功的博客页面</p><h2 id="将博客部署到-GitHub"><a href="#将博客部署到-GitHub" class="headerlink" title="将博客部署到 GitHub"></a>将博客部署到 GitHub</h2><p>如果没有GitHub账户的先去注册，有 GitHub 账户的直接下一步<br>去注册 GitHub 账户<br>设置 user.name 和 user.email<br>把以下命令中的 “Your user.name” 和 “You user.email” 换成自己的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Your user.name&quot;</span><br><span class="line">git config --global user.email &quot;You user.email&quot;</span><br></pre></td></tr></table></figure><p>生成 ssh 密匙<br>user.email 就是自己注册 GitHub 的邮箱</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C user.email</span><br></pre></td></tr></table></figure><p>下面要输入要保存到的路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;root&#x2F;.ssh&#x2F;id_rsa</span><br></pre></td></tr></table></figure><p>然后直接回车</p><p>查看 ssh 密匙</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">打开root&#x2F;.ssh&#x2F;id_rsa.pub</span><br></pre></td></tr></table></figure><p>在 GitHub 账户下添加 SSH key</p><p><a href="https://github.com/settings/keys">去 GitHub 添加 SSH</a></p><p>创建 GitHub 仓库<br>命名格式为”账户的 userName”.github.io 例如 ：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zhangsan.github.io</span><br></pre></td></tr></table></figure><p><a href="https://github.com/new">去创建 GitHub 仓库</a></p><p>修改 hexo 配置<br>打开 hexo 配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_config.yml</span><br></pre></td></tr></table></figure><p>修改对应部分</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">    type: git</span><br><span class="line">    repo: git@github.com:(BoView)&#x2F;(BoView).github.io.git #括号里面换成自己的用户名和仓库名,去掉括号</span><br><span class="line">    branch: master</span><br></pre></td></tr></table></figure><p>保存一下</p><p>测试并部署<br>清空静态页面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><p>生成静态页面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>将public文件内容部署到 github 仓库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>如果部署遇到错误的时候，先运行下面这条命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>然后重新部署一下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>此时可以打开浏览器访问 <code>userName.github.io</code>(GitHub仓库名) 即可以访问到搭建的博客页面</p><p>绑定域名<br>添加解析记录<br>如果想通过域名访问的就继续，前提是要有自己的域名，要是通过上面的仓库名可以访问就满足的可以跳过这一步<br>去自己的域名下添加解析记录类型为 CNAME 主机记录为 @ 线路选择默认，TTL 选择 600，记录值为 github 的仓库名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userName.github.io</span><br></pre></td></tr></table></figure><p>配置 hexo<br>创建 CNAME 配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ~&#x2F;hexo&#x2F;source&#x2F;CNAME</span><br></pre></td></tr></table></figure><p>去 <code>CNAME</code> 文件 下添加刚才解析的域名 例如： <code>zhangsan.com</code><br>然后重新部署一下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
