<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>flex布局深究</title>
      <link href="web/flex/"/>
      <url>web/flex/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对于 基础布局知识，阅读 <a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">flex布局教程 - 阮一峰</a></p><h2 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h2><p>属性定义项目的放大比例，<strong>默认为0</strong>，即如果存在剩余空间，也不放大（瓜分剩余空间）。<br><strong>假设有三个子项</strong></p><p>如果设置子项的 <code>flex-grow: 1;</code>， 则它们将按照比例  <code>1 ：1 ：1</code> 等分剩余空间。</p><p>如果设置<br>第 <strong>一</strong> 个子项的<code>flex-grow: 1;</code>，<br>第 <strong>二</strong> 个子项的<code>flex-grow: 2;</code>，<br>第 <strong>三</strong> 个子项的<code>flex-grow: 3;</code>，<br>则它们将按照比例  <code>1 ：2 ：3</code> 等分剩余空间。</p><h2 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h2><p>我们都知道，<code>flex-shrink</code>属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p><p>但是与<code>flex-grow</code>的放大比例有着完全不同的计算方式。</p><p>当设置了<code>flex-shrink</code> ，则 <code>flex-grow</code> 属性无效。</p><p>我们设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">3</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">300px</span>;  <span class="comment">/*优先于width*/</span></span><br><span class="line">  </span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid green;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时，三个子项的大小总共是 <strong>900</strong>，超过了 盒子<strong>600</strong>的大小，同时对三个子项设置了 <code>flex-shrink</code>，前两个盒子为<strong>1</strong>，第三个值为<strong>3</strong></p><p>我们按照 <code>flex-grow</code>的扩展的计算方式进行测试，可以得到</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901100817210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901100817210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试"></p>            </div><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901101048178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901101048178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="实际测试图"></p>            </div><p>而实际结果也是如此，但真的是这样么？<strong>当然不是！！！</strong>，主要原因在于  <code>三个子项的宽度是相等的</code>，然后误导将<code>shrink</code>的比例当做了缩减的比例。</p><p>我们<strong>再</strong>设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">3</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>去掉子项边框，让其为整数值，方便计算！</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时，三个子项的大小总共是 <strong>800</strong>，超过了 盒子<strong>600</strong>的大小 200，同时对三个子项设置了 <code>flex-shrink</code>，前两个盒子为<strong>1</strong>，第三个值为<strong>3</strong>。</p><p>按照刚刚测试的算法，<strong>1：1：3</strong> 对超出的 <strong>200</strong> 进行压缩可以得到<br>第一个宽度为 200 - 40 = 160，<br>第一个宽度为 200 - 40 = 160，<br>第三个宽度为 400 -120 = 280</p><p>但实际测试结果为<strong>175   175  250</strong>，<br><strong>如此便可以验证压缩的计算方式，并不是扩展的计算方式</strong></p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901102933940.gif#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901102933940.gif#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试2"></p>            </div><p>真实的计算方式则是所有子项的    真实<strong>（内容区）</strong>宽度  shrink值    相加，作为权值，为分母。</p><p>然后每个子项的真实宽度 shrink值/ 权值  再乘以多出来的部分，得到 压缩部分。再减去压缩部分得到实际宽度大小。</p><p>拿上述例子来计算。</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901105549195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901105549195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="计算方式"></p>            </div><p>这里就有一个值得注意的地方。在图片中  计算压缩大小的试子中，分子上是  <strong>真实宽度</strong>为啥呢？</p><p>我们<strong>接着</strong>设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;<span class="number">3</span>&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>这次加上子项边框</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以得到实际结果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901110414219.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901110414219.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="真实宽度测试"></p>            </div><p>惊奇的发现，宽度竟然变成了小数，而且，加上<code>padding</code>的值也不等于计算出来的结果，虽然差不多。</p><p>但是如果<strong>将 border 去掉</strong>，就会发现和原来的一样，不同的地方，就是<code>padding</code>的值没了。</p><p>细心的可以知道：这个真实宽度就是指<strong>内容区的真实宽度</strong>。</p><p>我们<strong>再接着</strong>设置一个容器，包裹三个子项盒子<br><strong>去掉子项内容区的内容</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>加上颜色</strong><br><strong>这次前两个盒子 不设置width，用padding代替宽度大小，去掉边框</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;  </span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#0ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以得到实际结果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901111906418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901111906418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="实际结果图"></p>            </div><p>惊奇的发现，它们宽度竟然一样。其实可以猜测，第一个和第二个都没有压缩，只有第三个压缩了。</p><p>相当于 第一个和第二个的 <code>shrink</code>值，都是 0 。</p><p>其权重 计算可以为  <code>0 * 1 + 0 * 1 + xxx * 3</code>。这样一来，只能在第三个上面压缩。</p><p>我们<strong>再再接着</strong>设置一个容器，包裹三个子项盒子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>同时给上样式， <strong>加上颜色</strong><br><strong>这次设置80的padding</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;  </span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#0ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推测结果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901114702456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901114702456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODc1OTQ1,size_1,color_FFFFFF,t_70#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="推测结果图"></p>            </div><p>真实效果如图</p><div class="gallery ">              <p><img src="https://img-blog.csdnimg.cn/20200901115054351.gif#pic_center" class="lazyload" data-srcset="https://img-blog.csdnimg.cn/20200901115054351.gif#pic_center" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="真实效果图"></p>            </div><p>当设置了 <code>flex-shrink</code>属性同时遇到 <code>box-sizing:border-box</code> ， <code>border</code>或者<code>padding</code>，加权值在计算的时候，不是真实盒子宽度，而是内容区的宽度。</p><h2 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h2><p>当子项同时设置了 <code>width</code>和<code>flex-basis</code>，basis的优先级更高。</p><p>不做测试，直接结论！</p><ol><li><p>就是子项的<code>width</code>。权重高于width。</p></li><li><p>添加内容，当是英语单词的时候，</p><ol><li>只写basis ，就代表width的最小值，即min-width</li><li>同时设置了basis和 width。<ol><li>basis &lt; width   basis是下限，width代表上限</li><li>basis &gt; width  则width无效了</li></ol></li></ol></li><li><p>当不换行内容撑开容器，设置了shrink，不参与压缩<code>flex-shrink</code></p><ol><li>可以设置中文</li><li><code>word-break:break-word</code>强制换行</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> flex布局 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>css中的基线</title>
      <link href="web/css-lineheight/"/>
      <url>web/css-lineheight/</url>
      
        <content type="html"><![CDATA[<h2 id="Line-height"><a href="#Line-height" class="headerlink" title="Line-height"></a>Line-height</h2><h3 id="行距、行间距"><a href="#行距、行间距" class="headerlink" title="行距、行间距"></a>行距、行间距</h3><p>行距： 相邻文本行间  <strong>上一个文本行基线</strong>  和  <strong>下一个文本行基线</strong> 之间的距离。</p><p>行间距： 相邻文本行间 <strong>上一个文本行下行线</strong> 和 <strong>下一个文本行上行线</strong> 之间的距离。</p><div class="note info"><p>行距 = 行间距 + 字体大小</p></div><p>在CSS中，CSS属性line-height则是用于设置真实的行距。从W3C Rec中看出，<strong>line-height就是行距</strong>, 而line-height的字面意思即为“行高”，推导结果CSS中行高即是行距。</p><p>了解了行高，行距，行间距。那么接下来介绍line-height的重要属性–垂直居中。</p><p>我们知道，<span class='p red'>行距(leading) = 行间距(line-space) + 字体大小(font-size)</span>。</p><p>行间距与字体大小都可以通过相应CSS属性设置，问题是行间距所占的空间是怎么分配的呢？</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="行间距分配"></p>            </div><p>CSS采用的是将行间距对半开，然后分配到上下两端，这里引用了<span class='p '>Half-leading</span>的概念， <strong>Half-leading = 行距/2</strong></p><p>由于行距可能为负值，可以知道行间距可能为负数，那么垂直居中还有效么？</p><p>答案是<strong>肯定的</strong>，行间距为负数时，Half-leading 自然也是负数，只是上下两端从增加等量空间变为减少等量空间而已。如下例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative;top:100px;font-size:90px;line-height:10px;background:yellow;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;border:solid 1px red;line-height:10px;&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="行间距分配"></p>            </div><h3 id="line-height属性"><a href="#line-height属性" class="headerlink" title="line-height属性"></a>line-height属性</h3><p><a href="https://www.runoob.com/cssref/pr-dim-line-height.html">CSS line-height 属性 | 菜鸟教程</a></p><p><a href="https://www.w3school.com.cn/cssref/pr_dim_line-height.asp">CSS line-height 属性 | W3school</a></p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>可能值</td><td>normal  | &lt;number&gt; | &lt;lenght&gt; | &lt;percentage&gt; | &lt;inherit&gt;</td></tr><tr><td>默认值</td><td>normal</td></tr><tr><td>继承性</td><td>yes</td></tr></tbody></table><h4 id="normal"><a href="#normal" class="headerlink" title="normal"></a>normal</h4><p>对于normal，其实就是一个值，但是由浏览器决定，实际值一般在<strong>1.0~1.2之间（闭区间）</strong></p><p>不同浏览器下，<code>normal</code>  不同；<br>同一浏览器下，<code>font-size</code> 不同，<code>normal</code> 也不同；<br>同一浏览器下，<code>font-size</code> 相同，<code>font-family</code> 不同，<code>normal</code> 也会变化。</p><p>normal 的平均值确实是 1.0~1.2(闭区间)，但是具体到特定浏览器、font-family 和 font-size时，normal值可能会大于1.2。</p><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>指定长度用于计算线盒高度，负值非法。</p><p>设置固定值，单位可以是 px 、pt 。</p><p>好处就是简单，设置是什么，<code>line-height</code>的实际高度就是什么。</p><p>坏处是子元素默认 <strong>继承</strong> 父容器的line-height，若子元素的font-size <strong>大于</strong> 父容器的font-size，那么子元素的文本行会什么密集。</p><p>解决方案，一般是采用 相对 font-size 实际大小 来设置 line-height 值的方式，如默认 <code>normal</code> 方法。</p><h4 id="percentage"><a href="#percentage" class="headerlink" title="percentage(%)"></a>percentage(%)</h4><p>计算值是百分比乘以元素计算字体大小，负值非法。</p><p>值的注意的是，<strong>参考系的确是font-size</strong>，但子元素继承的是父容器的实际 line-height 值，也就是说父容器设置为 <code>font-size:20px;line-height:200%;</code>，子元素继承的line-height值为 <strong>40px</strong>，而不是 200% ，因此又回到了 <em>方式</em>   的问题了。</p><h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><p>属性的使用值是 这个数字 乘以 元素的字体大小，负值非法，计算值与指定值相同。</p><p>和方式一样，<strong>以 font-size 为参考系</strong>，以相对值方式设置 line-height。</p><p>唯一不同的是，<strong>子元素继承的是父容器的值，参考系自动变为子元素的 font-size</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2em</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">line-height</span>: 1<span class="selector-class">.2</span>;</span><br></pre></td></tr></table></figure><p>上门的两句其实是等价的，若想将参考系 <strong>改</strong> 为根元素的 font-size ， 需要CSS3的新增<code>line-height:1.2rem;</code>。</p><h2 id="深入理解"><a href="#深入理解" class="headerlink" title="深入理解"></a>深入理解</h2><p>根据WCAG2.0(万维网内容可存取性指南)规定 “段落中的行距至少要1.5倍 ”，那么是否在body设置一下，就一劳永逸了呢？</p><div class="tabs" id="页面内不重复的id"><ul class="nav-tabs"><li class="tab active"><a href="#页面内不重复的id-1">CSS代码</a></li><li class="tab"><a href="#页面内不重复的id-2">HTML代码</a></li></ul><div class="tab-content"><div class="tab-pane active" id="页面内不重复的id-1"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"> <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line"> <span class="attribute">font-size</span>:<span class="number">12px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="页面内不重复的id-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>深入理解 line-height 和 vertical-align<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>In my dual profession as an educator and health care provider, I have worked with numerous children infected with the virus that causes AIDS. The relationships that I have had with these special kids have been gifts in my life. They have taught me so many things, but I have especially learned that great courage can be found in the smallest of packages. Let me tell you about Tyler. <span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>bed and whispered, “I might die soon. I’m not scared. When I die, please dress me in red. Mom promised she’s coming to heaven, too. I’ll be playing when she gets there, and I want to make sure she can find me.”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="效果图"/></div><span class="image-caption">效果图</span></div><p>代码效果呈现如图，不难发现，对于 <code>h1</code> 标题来说，行距有点多，于是可以有如下配置：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line"> line-height:1.5;</span><br><span class="line">&#125;</span><br><span class="line">h1,h2,h3,h4,h5,h6&#123;</span><br><span class="line"> line-height:1.2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/04.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="右边为上图，对比可以发现左图行距确实减少了！"></p>            </div><h3 id="vertical-align如何对齐"><a href="#vertical-align如何对齐" class="headerlink" title="vertical-align如何对齐"></a>vertical-align如何对齐</h3><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><p><a href="https://www.w3school.com.cn/css/pr_pos_vertical-align.asp">CSS vertical-align 属性 | W3school</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align">CSS vertical-align 属性 | MDN web docs</a></p><p>它的属性规则还是比较多的，但是也不能都记，或者用的时候挨个查。归纳一下不难发现</p><ol><li>对齐操作必定涉及操作元素和参考系元素，而<code>vertical-align</code>的值全是指的是<strong>参考系</strong>元素的位置，操作元素则以<code>baseline</code>或者<code>linebox</code>上中下作对齐；</li><li>默认对齐方式为<code>baseline</code>，数量值均是相对于<code>baseline</code>而言。</li></ol><div class="note warning"><p>vertical-align 仅对 inline-level 和 table-cell 元素有效。</p></div><h5 id="默认baseline"><a href="#默认baseline" class="headerlink" title="默认baseline"></a>默认baseline</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"></p>            </div><p>这里的<strong>x for reference frame</strong>作为参考系，它的 <code>baseline</code> 就是 <strong>line-height x vertical-align</strong> 要对齐的。</p><p>在此 <code>baseline</code> 的基础上做出如下设置</p><div class="note success"><p>在<code>span</code>中设置 <code>vertical-align: 10px;</code></p></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:10px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/06.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vertical-align:10px;"></p>            </div><div class="note success"><p>在<code>span</code>中设置 <code>vertical-align: -10px;</code></p></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:-10px;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/07.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="vertical-align: -10px;"></p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>在<code>div</code>中设置<code>line-height:1;</code>， 同时在<code>span</code>中设置 <code>vertical-align:50%;</code></p>            </div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;line-height:1;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align:50%;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/08.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"></p>            </div><div class="note success"><p>在<code>div</code>中设置<code>line-height:1;</code>， 同时在<code>span</code>中设置 <code>vertical-align: -50%;</code></p></div><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;line-height:1;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:40px;vertical-align: -50%;&quot;</span>&gt;</span>line-height x vertical-align<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> x for reference frame</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/09.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/css/css-lineheight/09.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="baseline对齐"></p>            </div><h5 id="top"><a href="#top" class="headerlink" title="top"></a>top</h5><p>把元素 line box 上边框对齐父元素的 line box 上边框</p><h5 id="text-top"><a href="#text-top" class="headerlink" title="text-top"></a>text-top</h5><p>把元素的 line box 上边框对齐父元素的 ascent(即 content top edge)</p><h5 id="middle"><a href="#middle" class="headerlink" title="middle"></a>middle</h5><p>把元素 line box 中垂点与父元素基线 + x-height/2 的高度对齐</p><h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><p>刚刚换了新的markdown标签，用起来比较费劲，码字效率比较低，还在熟悉中。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js的console</title>
      <link href="web/js-console/"/>
      <url>web/js-console/</url>
      
        <content type="html"><![CDATA[<h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><p>第一印象便是<code>console.log</code>，通过它在浏览器控制台进行调试输出。但除此之外还有许多方法。<br>比如在访问百度首页时候的控制台，会有以下的内容。但是仔细一看，你会发现，<strong>它有颜色</strong>。怎么做到的呢？</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="百度首页控制台"></p>            </div><p>其实不难发现，输入<code>console</code>，可知它是一个对象，里面有着高达14个方法，而我们最常用只有一个<code>log()</code>，可怕。</p><div class="tag link"><a class="link-card" title="Console - Web API 接口参考 | MDN" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Console - Web API 接口参考 | MDN</p><p class="url">https://developer.mozilla.org/zh-CN/docs/Web/API/Console</p></div></a></div><div class="tag link"><a class="link-card" title="JavaScript Console对象 | 菜鸟教程" href="https://www.runoob.com/w3cnote/javascript-console-object.html"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">JavaScript Console对象 | 菜鸟教程</p><p class="url">https://www.runoob.com/w3cnote/javascript-console-object.html</p></div></a></div><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="console方法"></p>            </div><p>通过文档我们清晰的知道各个方法的作用，以及使用方法。</p><p>通过占位符，可以改变输出的内容和样式。其中 <code>%c</code> 被称为 CSS占位符。</p><h2 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h2><h3 id="console-log"><a href="#console-log" class="headerlink" title="console.log()"></a>console.log()</h3><p>首先，除了<code>console.log(object)</code>这种语法，还有 <code>console.log(object, otherObject, string)</code> 将所有东西都整齐的打印出来。另外，还有 <code>console.log(msg, value)</code>，通过占位符来输出，执行方式与 <strong>C 语言</strong>的输出类似。</p><p>对于 <code>%c</code>，输出样式。</p><p>一个 <code>%c</code> 是将此后所有内容都进行渲染</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton&#x27;</span>, <span class="string">&#x27;color: white; background-color: orange; padding:2px 5px; border-radius: 2px&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="一个%c"></p>            </div><p><strong>两个</strong> <code>%c</code> 则是对其中间内容渲染。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton%c not a div&#x27;</span>, <span class="string">&#x27;color: white; background-color:orange; padding: 2px 5px; border-radius: 2px&#x27;</span>,<span class="string">&#x27;color: &quot;auto&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/04.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="两个%c"></p>            </div><p>当然渲染的只是样式，没有实质性的功能（按钮，点击事件等）</p><p>如果想 <code>%c</code> <strong>展示</strong>出来呢? 与 <code>\</code> 类似，写两个即可，比如将上述的语句展示出来。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton%%c not a div&#x27;</span>, <span class="string">&#x27;color: white; background-color:orange; padding: 2px 5px; border-radius: 2px&#x27;</span>,<span class="string">&#x27;color: &quot;auto&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/05.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="显示%c"></p>            </div><h3 id="console-dir"><a href="#console-dir" class="headerlink" title="console.dir()"></a>console.dir()</h3><p>通常看，它与 <code>log()</code> 的功能非常类似，但也有略微不同，主要在对文档结构的输出方面。</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/06.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="log()与dir()"></p>            </div><p>展开来看，<code>log</code> 只是输出了文档结构的内容，怎么写的怎么输出。清晰展示DOM节点，当我们选中时候，还可以跳转子DOM节点。</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/07.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="dir()指向dom节点"></p>            </div><p>而 <code>dir()</code> 却是一种更对象化的输出方式观察元素节点，在监测元素节点方面，这种结果无疑是最好的。</p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/08.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="dir()输出"></p>            </div><h3 id="console-warn"><a href="#console-warn" class="headerlink" title="console.warn()"></a>console.warn()</h3><p>它可能是 <code>log()</code> 最直接明显的替换产生的方法，它的级别是<strong>warn级别</strong>而不是一个info级别，你可以将所有的 <code>console.log()</code> 过滤掉只留下  <code>console.warn()</code>。</p><p>在Vue的部分源码中也是使用 <code>console.warn()</code> 来操作的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;vue.js</span><br><span class="line">tip &#x3D; function (msg, vm) &#123;</span><br><span class="line"> if (hasConsole &amp;&amp; (!config.silent)) &#123;</span><br><span class="line">  console.warn(&quot;[Vue tip]: &quot; + msg + (vm ? generateComponentTrace(vm) : &#39;&#39;));</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="console-table"><a href="#console-table" class="headerlink" title="console.table()"></a>console.table()</h3><p>这个，就是将对象数组展示为列表的数据方法，变得更加简洁可观。例如对一个对象数组使用此方法。</p><p>对于 <code>log()</code> 输出结果是一个小箭头的省略形式，展开来看，可以清晰的查看对象。</p><p>而 <code>table()</code> 的输出更加简洁，更直观展示。并且值得一提的是，可以通过第一行的右上角箭头可以进行排序。<code>table()</code> 最多只处理1000行的数据能力，不适用所有数据集合。</p><p>当然如果只想要某一列展示，可以通过第二个参数进行传递。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.table(transactions,[<span class="string">&quot;id&quot;</span>,<span class="string">&quot;price&quot;</span>])</span><br></pre></td></tr></table></figure><div class="tabs" id="log与table"><ul class="nav-tabs"><li class="tab active"><a href="#log与table-1">log()输出</a></li><li class="tab"><a href="#log与table-2">table()输出</a></li></ul><div class="tab-content"><div class="tab-pane active" id="log与table-1"><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/09.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/09.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="log()输出"></p>            </div></div><div class="tab-pane" id="log与table-2"><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/10.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/10.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="table输出结果"></p>            </div></div></div></div><h3 id="console-assert"><a href="#console-assert" class="headerlink" title="console.assert()"></a>console.assert()</h3><p>它的第一个参数是 <code>falsey</code> 时，与 <code>log()</code> 函数无异。当第一个参数是真值的时候什么都不做。</p><div class="note warning"><p>牢记，它的作用是判断，而不是过滤。</p></div><p>它的使用场景与 循环时候要显示特殊的 数据相似。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(obj.num === <span class="number">3</span>)&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设我们上面的值在时间戳里有一个 <code>null</code> 或者 <code>0</code>，这会破坏代码日期格式。</p><p>当和任何有效的事物对象一起使用时会跳过。但是有一个触发了我们的日志记录，因为时间戳在 <code>0</code> 和 <code>null</code> 时为假值。</p><p>有时候，想实现更加复杂的场景，举例，对于上述表格中看到了关于用户<em>WAL2025</em>的数据，并想展示来自它们的事务。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(transactions.buyer === <span class="string">&#x27;WAL2025&#x27;</span>, transactions);</span><br></pre></td></tr></table></figure><p>看起来没毛病，但是并没有用，<strong>牢记，场景必须是否定态，它的作用是判断，而不是过滤。</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.assert(transactions.buyer !== <span class="string">&#x27;WAL2025&#x27;</span>, transactions);</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>剩下的方法，演示过于困难或者简单，还是看文档理解比较好。</p><div class="tag link"><a class="link-card" title="Console - Web API 接口参考 | MDN" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Console - Web API 接口参考 | MDN</p><p class="url">https://developer.mozilla.org/zh-CN/docs/Web/API/Console</p></div></a></div><div class="tag link"><a class="link-card" title="JavaScript Console 对象 | 菜鸟教程" href="https://www.runoob.com/w3cnote/javascript-console-object.html"><div class="left"><img src="https://wbig.gitee.io/cdn/img/assets/link.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/assets/link.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">JavaScript Console 对象 | 菜鸟教程</p><p class="url">https://www.runoob.com/w3cnote/javascript-console-object.html</p></div></a></div><p>其他方法的存在，让我们可以得到比 <code>log()</code> 的信息更多一些，并且不需要调试器的情况下，这些工具还是很有用的。</p><h2 id="附图"><a href="#附图" class="headerlink" title="附图"></a>附图</h2><p>简洁直观的理解使用 <code>console</code></p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/11.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-console/11.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="console cheatsheet,图片来源：B站Zhangyaing"></p>            </div>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>try-catch监听多线程</title>
      <link href="web/js-trycatch/"/>
      <url>web/js-trycatch/</url>
      
        <content type="html"><![CDATA[<h2 id="try-catch-函数"><a href="#try-catch-函数" class="headerlink" title="try-catch 函数"></a>try-catch 函数</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p><strong>当 JavaScript 引擎执行 JavaScript 代码时，可能会发生各种错误</strong>，可能是语法错误，通常是程序员造成的编码错误或错别字。可能是拼写错误或语言中缺少的功能（可能由于浏览器差异）。可能是由于来自服务器或用户的错误输出而导致的错误。当然，也可能是由于许多其他不可预知的因素。当错误发生时，<strong>当事情出问题时，JavaScript 引擎通常会停止，并生成一个错误消息。这种情况被称为：JavaScript 抛出异常</strong>。对于可能出现的问题的代码我们需要预判，这就涉及到异常的测试与捕获。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">//在这里运行代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (err) &#123;</span><br><span class="line"> <span class="comment">//在这里处理错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>try 语句允许我们定义在执行时进行错误测试的代码块。<br>catch 语句允许我们定义当 try 代码块发生错误时，所执行的代码块。<br>JavaScript 语句 try 和 catch 是成对出现的。</p><p>有一个运行代码的函数 <code>runCode</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runCode</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">eval</span>(code);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我们执行 runCode(‘1+1’) 可以得到 2，这里利用 <strong>eval 函数特性</strong>，可以执行字符串。eval 并不是我们这篇文章的主要内容。对于 code 是用户输入，当用户输入的内容是一段错误代码，我们的函数，就会报错，进而影响之后的逻辑执行。这是我们需要利用 try-catch 进行捕获。代码改写如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runCode</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="comment">// 接下来执行的 eval(code)可能会出错</span></span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">eval</span>(code);</span><br><span class="line"> &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="comment">// 上面的部分报错，会对外输出错误信息，并不会终止程序</span></span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;代码存在错误&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当我执行 runCode(‘aaaaa’), 会给我们提示信息： 代码存在错误，这样我们的错误就成功捕获，并不影响后面的逻辑执行。</p><h3 id="使用-try-catch-的建议"><a href="#使用-try-catch-的建议" class="headerlink" title="使用 try-catch 的建议"></a>使用 try-catch 的建议</h3><p>try catch 的使用，<strong>永远应该放在你的控制范围之内，而不应该防范未知的错误</strong>。也就是说你很清楚知道这里是有可能”出错“的，而且你很清楚知道什么前提下会出错，你就是要故意利用报错信息来区分错误，后续的程序会解决所有的出错，让程序继续执行。如果让用户先发现你根本没预料到的错误，而不是你先发现错误，你是失职的。</p><h2 id="try-catch-与多线程"><a href="#try-catch-与多线程" class="headerlink" title="try-catch 与多线程"></a>try-catch 与多线程</h2><h3 id="JS-中的“多线程”"><a href="#JS-中的“多线程”" class="headerlink" title="JS 中的“多线程”"></a>JS 中的“多线程”</h3><p>浏览器中的 JavaScript 确实是以单线程的方式执行的，也就是说 JavaScript 执行使用一个主线程，但是 JavaScript 提供了异步操作，比如定时器(setTimeout、setInterval)事件、Ajax 请求、Promise, I/O 等。它们将会被放入浏览器的事件任务队列（event loop）中去，等到 JavaScript 运行时执行线程空闲时候，事件队列才会按照先进先出的原则被一一执行。但是对于以上的异步操作过程中，能进行的计时，发送请求，I/O 操作都是其他的线程在做的事情，所以说是“多线程”。</p><h3 id="多线程不等于异步"><a href="#多线程不等于异步" class="headerlink" title="多线程不等于异步"></a>多线程不等于异步</h3><p>异步和多线程并不是一个同等关系,<strong>异步是最终目的,多线程只是我们实现异步的一种手段</strong>。异步是当一个调用请求发送给被调用者,而调用者不用等待其结果的返回而可以做其它的事情。实现异步可以采用多线程技术或则交给另外的进程来处理。</p><h4 id="setTimeout-函数"><a href="#setTimeout-函数" class="headerlink" title="setTimeout 函数"></a>setTimeout 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a.b)</span><br><span class="line"> &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制台报错： <code>a is not defined.</code>，并没有被捕获。得出结论， try-catch 无法监听 setTime 函数中的错误。</p><h4 id="Promise-函数"><a href="#Promise-函数" class="headerlink" title="Promise 函数"></a>Promise 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">   a.b</span><br><span class="line"> &#125;)</span><br><span class="line">&#125;<span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制台报错： <code>a is not defined.</code>，并没有被捕获。得出结论， try-catch 无法监听 Promise 函数中的错误。</p><h4 id="Ajax-函数"><a href="#Ajax-函数" class="headerlink" title="Ajax 函数"></a>Ajax 函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> xhr = <span class="built_in">window</span>.XMLHttpRequest ? <span class="keyword">new</span> XMLHttpRequest() :</span><br><span class="line"> ActiveXObject(<span class="string">&quot;microsoft.XMLHttp&quot;</span>)</span><br><span class="line"> xhr.open(<span class="string">&quot;get&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line"> xhr.send();</span><br><span class="line"> xhr.onreadystatechange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (xhr.readystate == <span class="number">4</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">     <span class="keyword">var</span> data = xhr.responseTEXT;</span><br><span class="line">     <span class="keyword">return</span> data;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> ajax(<span class="string">&#x27;someurl&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">&#x27;有错误&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ajax 中的请求出错，并未被捕获。得出结论 try-catch 无法监听 Ajax 函数中的错误。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于以上几种异步操作，我们看的出来 try-catch 并未帮我们监听的到里面的错误。原因是：<strong>javaScript 擎对异步方法进行 try/catch 操作只能捕获当次事件循环内的异常，对 call back 执行时抛出的异常将无能为力</strong>。但是对于异步操作，只要是代码逻辑没有问题，我们在适当的问题出口把问题暴露出去就可以了，比如 Promise 的 then，Ajax 的状态判断等等。</p>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP相关知识</title>
      <link href="web/http/"/>
      <url>web/http/</url>
      
        <content type="html"><![CDATA[<h2 id="http-与-https"><a href="#http-与-https" class="headerlink" title="http 与 https"></a>http 与 https</h2><ol><li>http是超文本传输协议，是目前世界上使用最多的协议。</li><li>它是用于从www服务器传输超文本到本地浏览器的传输协议。</li><li>https是安全的http通道，在http下加入了 SSL层。</li><li>https协议需要CA证书，费用高。</li><li>另外，使用不同的链接方式，端口也不一样，一般来说，http协议是80端口，https是443端口</li></ol><h2 id="https的工作原理"><a href="#https的工作原理" class="headerlink" title="https的工作原理"></a>https的工作原理</h2><ol><li>客户使用https url访问，要求web服务器建立ssl链接</li><li>web服务器收到后，会将网站的证书（证书中含公钥）返回给客户端</li><li>客户端与服务器端开始协商ssl链接的安全等级，也就是加密等级。</li><li>协商一致，建立会话秘钥，然后网站加密，web服务器解密，开始通信。</li></ol><h2 id="http请求的方式"><a href="#http请求的方式" class="headerlink" title="http请求的方式"></a>http请求的方式</h2><ol><li><p>http1.0 三种请求：get,post head</p></li><li><p>http1.1 新增6种: options,put,patch,delete,trace,connect</p></li><li><p>get:： 请求页面信息，返回实体主体。</p></li><li><p>head： 类似于get请求，只不过返回的响应中没有具体内容，用户获取报头。</p></li><li><p>post 向指定资源提交数据进行处理请求，数据包含在请求体中</p></li></ol><h2 id="get与post"><a href="#get与post" class="headerlink" title="get与post"></a>get与post</h2><ol><li>get用于获取数据，post用于提交数据</li><li>get参数在url后，post可以在http body中提交</li><li>get在url长度有限制，post数据可以很大</li><li>get提交可以在浏览器缓存，post不会被浏览器缓存</li><li>get不安全，因为参数暴露在url中</li></ol><h2 id="输入URL到页面加载显示完成发生了什么"><a href="#输入URL到页面加载显示完成发生了什么" class="headerlink" title="输入URL到页面加载显示完成发生了什么"></a>输入URL到页面加载显示完成发生了什么</h2><ol><li>DNS解析</li><li>TCP连接</li><li>发送HTTP请求</li><li>服务器处理并返回HTTP报文</li><li>浏览器解析渲染</li><li>连接结束</li></ol><h2 id="一个图片url访问后直接下载怎样实现"><a href="#一个图片url访问后直接下载怎样实现" class="headerlink" title="一个图片url访问后直接下载怎样实现"></a>一个图片url访问后直接下载怎样实现</h2><p>请求的返回头里，用于浏览器解析的重要参数就是OSS的API文档的返回http头，决定用户下载行为的参数。</p><h2 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h2><ol><li>400： 请求无效：前端提交数据与后台实体不一致。</li><li>401： 需要用户验证。</li><li>403： 服务器得到请求，拒绝执行。</li><li>304： 未修改   如果客户端发送带条件的get请求且被允许，而文档的内容并没有改变</li></ol><h2 id="fetch发送2次请求的原因"><a href="#fetch发送2次请求的原因" class="headerlink" title="fetch发送2次请求的原因"></a>fetch发送2次请求的原因</h2><p>第一次发送Options请求，询问服务器是否支持修改的请求头，如果支持再发送。</p><h2 id="cookie-sessionStorage和localStorage"><a href="#cookie-sessionStorage和localStorage" class="headerlink" title="cookie,  sessionStorage和localStorage"></a>cookie,  sessionStorage和localStorage</h2><p>共同点： 都是保存在浏览器端，并且同源</p><p>不同点：</p><table><thead><tr><th align="center">比较内容</th><th align="center">cookie</th><th align="center">sessionStorage</th><th align="center">localStorage</th></tr></thead><tbody><tr><td align="center">数据</td><td align="center">始终在同源的http请求中携带（即使不需要）</td><td align="center">仅在本地保存</td><td align="center">仅在本地保存</td></tr><tr><td align="center">传递性</td><td align="center">在浏览器与服务器之间来回传递</td><td align="center">不会自动发送数据给服务器</td><td align="center">不会自动发送数据给服务器</td></tr><tr><td align="center">有效期</td><td align="center">在设置的时间内一直有效，即使浏览器或者窗口关闭</td><td align="center">仅在当前浏览器窗口关闭前有效</td><td align="center">始终有效，窗口或浏览器关闭也一直保存</td></tr><tr><td align="center">共享性</td><td align="center">所有同源窗口共享</td><td align="center"></td><td align="center">在所有同源窗口中都是共享</td></tr></tbody></table><h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h2><table><thead><tr><th align="left">URL</th><th align="left">说明</th><th align="left">是否允许通信</th></tr></thead><tbody><tr><td align="left">&lt;<a href="http://www.a.com/a.js">http://www.a.com/a.js</a><br><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">同一域名下</td><td align="left">允许</td></tr><tr><td align="left"><a href="http://www.a.com/lab/a.js">http://www.a.com/lab/a.js</a><br> <a href="http://www.a.com/script/b.js">http://www.a.com/script/b.js</a></td><td align="left">同一域名下不同文件夹</td><td align="left">允许</td></tr><tr><td align="left"><a href="http://www.a.com:8000/a.js">http://www.a.com:8000/a.js</a> <br><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">同一域名，不同端口</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br><a href="https://www.a.com/b.js">https://www.a.com/b.js</a></td><td align="left">同一域名，不同协议</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a><br> <a href="http://70.32.92.74/b.js">http://70.32.92.74/b.js</a></td><td align="left">域名和域名对应ip</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br><a href="http://script.a.com/b.js">http://script.a.com/b.js</a></td><td align="left">主域相同，子域不同</td><td align="left">不允许</td></tr><tr><td align="left"><a href="http://www.a.com/a.js">http://www.a.com/a.js</a> <br><a href="http://a.com/b.js">http://a.com/b.js</a></td><td align="left">同一域名，不同二级域名（同上）</td><td align="left">不允许（cookie这种情况下也不允许访问）</td></tr><tr><td align="left"><a href="http://www.cnblogs.com/a.js">http://www.cnblogs.com/a.js</a> <br><a href="http://www.a.com/b.js">http://www.a.com/b.js</a></td><td align="left">不同域名</td><td align="left">不允许</td></tr></tbody></table><blockquote><p>如果是协议与端口问题，前台是无能为力的</p></blockquote><ol><li>document.domain + iframe(主域相同)</li><li>动态创建script，script标签不受同源策略的限制</li><li>location.hash + iframe:  利用location.hash进行传值</li><li>window.name + iframe:  name值在不同页面加载后依旧存在，最大2M</li><li>postMessage (html5 中XMLHttpRequest level 2中的API)</li><li>CORS（IE中是xdr）: 使用自定义的http头 让浏览器与服务器进行沟通</li><li>JSNP:  回调函数与数据 ，回调函数是当响应到来时要放在当前页面被调用的函数，数据是传入回调函数中的json数据，也就是回调函数的参数。支持get请求，不知道post。</li><li>web sockets： 一种浏览器API，目标是在一个单独的持久连接上提供全双工，双向通信，只有在支持web socket协议的服务器上才能正常工作。</li></ol><h2 id="doctype-作用"><a href="#doctype-作用" class="headerlink" title="doctype 作用"></a>doctype 作用</h2><p>告诉浏览器以何种方式渲染页面，严格模式与混杂模式。</p><h2 id="cookie如何防范XSS攻击"><a href="#cookie如何防范XSS攻击" class="headerlink" title="cookie如何防范XSS攻击"></a>cookie如何防范XSS攻击</h2><p>XSS:  跨站脚本攻击</p><p>httponly- 这个属性可以防止，它可以禁止JavaScript脚本访问cookie。</p><p>secure- 这个属性告诉浏览器仅在请求为https的时候发送cookie。</p><h2 id="一句话概括RESTFUL"><a href="#一句话概括RESTFUL" class="headerlink" title="一句话概括RESTFUL"></a>一句话概括RESTFUL</h2><p>就是用URL定位资源，用HTTP描述操作。</p><h2 id="click在ios上有300ms延迟，原因及如何解决？"><a href="#click在ios上有300ms延迟，原因及如何解决？" class="headerlink" title="click在ios上有300ms延迟，原因及如何解决？"></a>click在ios上有300ms延迟，原因及如何解决？</h2><ol><li>粗暴型，禁用缩放。</li><li>使用fastclick，原理是监测到touchend事件后，立即模拟click事件，并且把浏览器30ms后真正的事件给阻断掉。</li></ol><h2 id="强缓存、协商缓存什么时候用哪个"><a href="#强缓存、协商缓存什么时候用哪个" class="headerlink" title="强缓存、协商缓存什么时候用哪个"></a>强缓存、协商缓存什么时候用哪个</h2><p>因为服务器上的资源不是一直固定不变的，大多数情况下它会更新，这个时候如果我们还访问本地缓存，那么对用户来说，那就相当于资源没有更新，用户看到的还是旧的资源；所以我们希望服务器上的资源更新了浏览器就请求新的资源，没有更新就使用本地的缓存，以最大程度的减少因网络请求而产生的资源浪费。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://uploadfiles.nowcoder.com/images/20190312/311436_1552361773903_9DC69E327B4B3691E94CD9D52D10E2C1" class="lazyload" data-srcset="https://uploadfiles.nowcoder.com/images/20190312/311436_1552361773903_9DC69E327B4B3691E94CD9D52D10E2C1" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="强缓存、协商缓存"/></div><span class="image-caption">强缓存、协商缓存</span></div><p>强缓存是利用http头中的<code>Expires</code>和<code>Cache-Control</code>两个字段来控制的，用来表示资源的缓存时间。</p><p>协商缓存就是由服务器来确定缓存资源是否可用，所以客户端与服务器端要通过某种标识来进行通信，从而让服务器判断请求资源是否可以缓存访问。协商缓存相关字段有Last-Modified/If-Modified-Since，Etag/If-None-Match</p><div class="tag link"><a class="link-card" title="参考链接，'https://segmentfault.com/a/1190000008956069'" href="https://wbig.gitee.io/cdn/img/assets/link.png"><div class="left"><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/logo/256/safari.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">参考链接，'https://segmentfault.com/a/1190000008956069'</p><p class="url">https://wbig.gitee.io/cdn/img/assets/link.png</p></div></a></div><h2 id="前端优化"><a href="#前端优化" class="headerlink" title="前端优化"></a>前端优化</h2><ol><li>降低请求量： 合并资源，减少http请求数，minify/gzip压缩，webP，lazyLoad</li><li>加快请求速度： 预解析DNS， 减少域名数，并行加载，CDN并发</li><li>缓存： http协议缓存请求，离线缓存，离线数据缓存</li><li>渲染：js/css优化，加载顺序，服务端渲染，pipeline</li></ol><h2 id="csrf和xss的网络攻击及防范"><a href="#csrf和xss的网络攻击及防范" class="headerlink" title="csrf和xss的网络攻击及防范"></a>csrf和xss的网络攻击及防范</h2><p>CSRF：跨站请求伪造，可以理解为攻击者盗用了用户的身份，以用户的名义发送了恶意请求</p><p>XSS：跨站脚本攻击，是说攻击者通过注入恶意的脚本，在用户浏览网页的时候进行攻击，比如获取cookie</p><h2 id="查看网站性能"><a href="#查看网站性能" class="headerlink" title="查看网站性能"></a>查看网站性能</h2><ol><li>插入探针或者脚本</li><li>搭建环境，模拟用户访问请求，采集数据</li><li>第三方工具</li></ol>]]></content>
      
      
      <categories>
          
          <category> Web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web前端 </tag>
            
            <tag> http协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS 异步操作</title>
      <link href="wx-mini/wx-mini-cloud-js-promise/"/>
      <url>wx-mini/wx-mini-cloud-js-promise/</url>
      
        <content type="html"><![CDATA[<h2 id="JS-异步操作"><a href="#JS-异步操作" class="headerlink" title="JS 异步操作"></a>JS 异步操作</h2><p>js是单线程的，对于下面代码，执行顺序：当主线程输出  2 之后，空闲再执行输出 1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>假设如下代码，层层回调。不仅不能加解决问题，反而性能很差，影响用户体验。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// callback hell 回调深渊</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Es6-解决办法"><a href="#Es6-解决办法" class="headerlink" title="Es6 解决办法"></a>Es6 解决办法</h3><p>promise状态不可逆！！！！状态也不可相互转换！！！</p><table><thead><tr><th>状态</th><th align="right">说明</th></tr></thead><tbody><tr><td>pending</td><td align="right">既不成功也不失败</td></tr><tr><td>fulfilled</td><td align="right">成功</td></tr><tr><td>rejected</td><td align="right">失败</td></tr></tbody></table><p>上面的回调语句用Promise 实现异步如下：</p><p>避免了层层回调的循环。将第一个事件的成功状态作为第二个事件的条件。</p><div class="note success"><p>resolve( … ) … 为成功的返回值,可以为字符串</p></div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Promise-all-方法"><a href="#Promise-all-方法" class="headerlink" title="Promise.all() 方法"></a>Promise.all() 方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(...)</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(...)</span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(...)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1,p2,p3]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;全部完成&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;).catch(..)</span><br></pre></td></tr></table></figure><p>如果是说，p1中 reject() 。则promise.all将整体执行失败，但不影响里面p2 ,p3的进程继续执行</p><h4 id="Promise-race-方法"><a href="#Promise-race-方法" class="headerlink" title="Promise.race() 方法"></a>Promise.race() 方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.race([p1,p2,p3]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;完成&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;).catch(..)</span><br></pre></td></tr></table></figure><p>race  顾名思义，竞赛的意思。</p><p>即有一个任务完成就表示完成。主要用于判断请求是否超时。</p><h3 id="ES7-解决办法"><a href="#ES7-解决办法" class="headerlink" title="ES7 解决办法"></a>ES7 解决办法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// async await</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>在云函数中使用，默认支持，小程序端不支持！</p></div><p>保存一个<code>runtime.js</code>文件，在要用的js页引用。然后调用使用。</p><details ><summary> import regeneratorRuntime from 路径/runtime.js </summary>              <div class='content'>              <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Copyright (c) 2014-present, Facebook, Inc.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This source code is licensed under the MIT license found in the</span></span><br><span class="line"><span class="comment"> * LICENSE file in the root directory of this source tree.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">!(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// &quot;use strict&quot;;</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> Op = <span class="built_in">Object</span>.prototype;</span><br><span class="line">    <span class="keyword">var</span> hasOwn = Op.hasOwnProperty;</span><br><span class="line">    <span class="keyword">var</span> <span class="literal">undefined</span>; <span class="comment">// More compressible than void 0.</span></span><br><span class="line">    <span class="keyword">var</span> $Symbol = <span class="keyword">typeof</span> <span class="built_in">Symbol</span> === <span class="string">&quot;function&quot;</span> ? <span class="built_in">Symbol</span> : &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> iteratorSymbol = $Symbol.iterator || <span class="string">&quot;@@iterator&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> asyncIteratorSymbol = $Symbol.asyncIterator || <span class="string">&quot;@@asyncIterator&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> toStringTagSymbol = $Symbol.toStringTag || <span class="string">&quot;@@toStringTag&quot;</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> inModule = <span class="keyword">typeof</span> <span class="built_in">module</span> === <span class="string">&quot;object&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> runtime = <span class="built_in">global</span>.regeneratorRuntime;</span><br><span class="line">    <span class="keyword">if</span> (runtime) &#123;</span><br><span class="line">      <span class="keyword">if</span> (inModule) &#123;</span><br><span class="line">        <span class="comment">// If regeneratorRuntime is defined globally and we&#x27;re in a module,</span></span><br><span class="line">        <span class="comment">// make the exports object identical to regeneratorRuntime.</span></span><br><span class="line">        <span class="built_in">module</span>.exports = runtime;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// Don&#x27;t bother evaluating the rest of this file if the runtime was</span></span><br><span class="line">      <span class="comment">// already defined globally.</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Define the runtime globally (as expected by generated code) as either</span></span><br><span class="line">    <span class="comment">// module.exports (if we&#x27;re in a module) or a new, empty object.</span></span><br><span class="line">    runtime = <span class="built_in">global</span>.regeneratorRuntime = inModule ? <span class="built_in">module</span>.exports : &#123;&#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">wrap</span>(<span class="params">innerFn, outerFn, self, tryLocsList</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.</span></span><br><span class="line">      <span class="keyword">var</span> protoGenerator = outerFn &amp;&amp; outerFn.prototype <span class="keyword">instanceof</span> Generator ? outerFn : Generator;</span><br><span class="line">      <span class="keyword">var</span> generator = <span class="built_in">Object</span>.create(protoGenerator.prototype);</span><br><span class="line">      <span class="keyword">var</span> context = <span class="keyword">new</span> Context(tryLocsList || []);</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// The ._invoke method unifies the implementations of the .next,</span></span><br><span class="line">      <span class="comment">// .throw, and .return methods.</span></span><br><span class="line">      generator._invoke = makeInvokeMethod(innerFn, self, context);</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> generator;</span><br><span class="line">    &#125;</span><br><span class="line">    runtime.wrap = wrap;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Try/catch helper to minimize deoptimizations. Returns a completion</span></span><br><span class="line">    <span class="comment">// record like context.tryEntries[i].completion. This interface could</span></span><br><span class="line">    <span class="comment">// have been (and was previously) designed to take a closure to be</span></span><br><span class="line">    <span class="comment">// invoked without arguments, but in all the cases we care about we</span></span><br><span class="line">    <span class="comment">// already have an existing method we want to call, so there&#x27;s no need</span></span><br><span class="line">    <span class="comment">// to create a new function object. We can even get away with assuming</span></span><br><span class="line">    <span class="comment">// the method takes exactly one argument, since that happens to be true</span></span><br><span class="line">    <span class="comment">// in every case, so we don&#x27;t have to touch the arguments object. The</span></span><br><span class="line">    <span class="comment">// only additional allocation required is the completion record, which</span></span><br><span class="line">    <span class="comment">// has a stable shape and so hopefully should be cheap to allocate.</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">tryCatch</span>(<span class="params">fn, obj, arg</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">type</span>: <span class="string">&quot;normal&quot;</span>, <span class="attr">arg</span>: fn.call(obj, arg) &#125;;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">type</span>: <span class="string">&quot;throw&quot;</span>, <span class="attr">arg</span>: err &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> GenStateSuspendedStart = <span class="string">&quot;suspendedStart&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> GenStateSuspendedYield = <span class="string">&quot;suspendedYield&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> GenStateExecuting = <span class="string">&quot;executing&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> GenStateCompleted = <span class="string">&quot;completed&quot;</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Returning this object from the innerFn has the same effect as</span></span><br><span class="line">    <span class="comment">// breaking out of the dispatch switch statement.</span></span><br><span class="line">    <span class="keyword">var</span> ContinueSentinel = &#123;&#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Dummy constructor functions that we use as the .constructor and</span></span><br><span class="line">    <span class="comment">// .constructor.prototype properties for functions that return Generator</span></span><br><span class="line">    <span class="comment">// objects. For full spec compliance, you may wish to configure your</span></span><br><span class="line">    <span class="comment">// minifier not to mangle the names of these two functions.</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Generator</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">GeneratorFunction</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">GeneratorFunctionPrototype</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// This is a polyfill for %IteratorPrototype% for environments that</span></span><br><span class="line">    <span class="comment">// don&#x27;t natively support it.</span></span><br><span class="line">    <span class="keyword">var</span> IteratorPrototype = &#123;&#125;;</span><br><span class="line">    IteratorPrototype[iteratorSymbol] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> getProto = <span class="built_in">Object</span>.getPrototypeOf;</span><br><span class="line">    <span class="keyword">var</span> NativeIteratorPrototype = getProto &amp;&amp; getProto(getProto(values([])));</span><br><span class="line">    <span class="keyword">if</span> (NativeIteratorPrototype &amp;&amp;</span><br><span class="line">        NativeIteratorPrototype !== Op &amp;&amp;</span><br><span class="line">        hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) &#123;</span><br><span class="line">      <span class="comment">// This environment has a native %IteratorPrototype%; use it instead</span></span><br><span class="line">      <span class="comment">// of the polyfill.</span></span><br><span class="line">      IteratorPrototype = NativeIteratorPrototype;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> Gp = GeneratorFunctionPrototype.prototype =</span><br><span class="line">      Generator.prototype = <span class="built_in">Object</span>.create(IteratorPrototype);</span><br><span class="line">    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;</span><br><span class="line">    GeneratorFunctionPrototype.constructor = GeneratorFunction;</span><br><span class="line">    GeneratorFunctionPrototype[toStringTagSymbol] =</span><br><span class="line">      GeneratorFunction.displayName = <span class="string">&quot;GeneratorFunction&quot;</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Helper for defining the .next, .throw, and .return methods of the</span></span><br><span class="line">    <span class="comment">// Iterator interface in terms of a single ._invoke method.</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">defineIteratorMethods</span>(<span class="params">prototype</span>) </span>&#123;</span><br><span class="line">      [<span class="string">&quot;next&quot;</span>, <span class="string">&quot;throw&quot;</span>, <span class="string">&quot;return&quot;</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">method</span>) </span>&#123;</span><br><span class="line">        prototype[method] = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>._invoke(method, arg);</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    runtime.isGeneratorFunction = <span class="function"><span class="keyword">function</span>(<span class="params">genFun</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> ctor = <span class="keyword">typeof</span> genFun === <span class="string">&quot;function&quot;</span> &amp;&amp; genFun.constructor;</span><br><span class="line">      <span class="keyword">return</span> ctor</span><br><span class="line">        ? ctor === GeneratorFunction ||</span><br><span class="line">          <span class="comment">// For the native GeneratorFunction constructor, the best we can</span></span><br><span class="line">          <span class="comment">// do is to check its .name property.</span></span><br><span class="line">          (ctor.displayName || ctor.name) === <span class="string">&quot;GeneratorFunction&quot;</span></span><br><span class="line">        : <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    runtime.mark = <span class="function"><span class="keyword">function</span>(<span class="params">genFun</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">Object</span>.setPrototypeOf) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.setPrototypeOf(genFun, GeneratorFunctionPrototype);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        genFun.__proto__ = GeneratorFunctionPrototype;</span><br><span class="line">        <span class="keyword">if</span> (!(toStringTagSymbol <span class="keyword">in</span> genFun)) &#123;</span><br><span class="line">          genFun[toStringTagSymbol] = <span class="string">&quot;GeneratorFunction&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      genFun.prototype = <span class="built_in">Object</span>.create(Gp);</span><br><span class="line">      <span class="keyword">return</span> genFun;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Within the body of any async function, `await x` is transformed to</span></span><br><span class="line">    <span class="comment">// `yield regeneratorRuntime.awrap(x)`, so that the runtime can test</span></span><br><span class="line">    <span class="comment">// `hasOwn.call(value, &quot;__await&quot;)` to determine if the yielded value is</span></span><br><span class="line">    <span class="comment">// meant to be awaited.</span></span><br><span class="line">    runtime.awrap = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">__await</span>: arg &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">AsyncIterator</span>(<span class="params">generator</span>) </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">invoke</span>(<span class="params">method, arg, resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> record = tryCatch(generator[method], generator, arg);</span><br><span class="line">        <span class="keyword">if</span> (record.type === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">          reject(record.arg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> result = record.arg;</span><br><span class="line">          <span class="keyword">var</span> value = result.value;</span><br><span class="line">          <span class="keyword">if</span> (value &amp;&amp;</span><br><span class="line">              <span class="keyword">typeof</span> value === <span class="string">&quot;object&quot;</span> &amp;&amp;</span><br><span class="line">              hasOwn.call(value, <span class="string">&quot;__await&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(value.__await).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">              invoke(<span class="string">&quot;next&quot;</span>, value, resolve, reject);</span><br><span class="line">            &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">              invoke(<span class="string">&quot;throw&quot;</span>, err, resolve, reject);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(value).then(<span class="function"><span class="keyword">function</span>(<span class="params">unwrapped</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// When a yielded Promise is resolved, its final value becomes</span></span><br><span class="line">            <span class="comment">// the .value of the Promise&lt;&#123;value,done&#125;&gt; result for the</span></span><br><span class="line">            <span class="comment">// current iteration.</span></span><br><span class="line">            result.value = unwrapped;</span><br><span class="line">            resolve(result);</span><br><span class="line">          &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// If a rejected Promise was yielded, throw the rejection back</span></span><br><span class="line">            <span class="comment">// into the async generator function so it can be handled there.</span></span><br><span class="line">            <span class="keyword">return</span> invoke(<span class="string">&quot;throw&quot;</span>, error, resolve, reject);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">var</span> previousPromise;</span><br><span class="line">  </span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">enqueue</span>(<span class="params">method, arg</span>) </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">callInvokeWithMethodAndArg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">            invoke(method, arg, resolve, reject);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> previousPromise =</span><br><span class="line">          <span class="comment">// If enqueue has been called before, then we want to wait until</span></span><br><span class="line">          <span class="comment">// all previous Promises have been resolved before calling invoke,</span></span><br><span class="line">          <span class="comment">// so that results are always delivered in the correct order. If</span></span><br><span class="line">          <span class="comment">// enqueue has not been called before, then it is important to</span></span><br><span class="line">          <span class="comment">// call invoke immediately, without waiting on a callback to fire,</span></span><br><span class="line">          <span class="comment">// so that the async generator function has the opportunity to do</span></span><br><span class="line">          <span class="comment">// any necessary setup in a predictable way. This predictability</span></span><br><span class="line">          <span class="comment">// is why the Promise constructor synchronously invokes its</span></span><br><span class="line">          <span class="comment">// executor callback, and why async functions synchronously</span></span><br><span class="line">          <span class="comment">// execute code before the first await. Since we implement simple</span></span><br><span class="line">          <span class="comment">// async functions in terms of async generators, it is especially</span></span><br><span class="line">          <span class="comment">// important to get this right, even though it requires care.</span></span><br><span class="line">          previousPromise ? previousPromise.then(</span><br><span class="line">            callInvokeWithMethodAndArg,</span><br><span class="line">            <span class="comment">// Avoid propagating failures to Promises returned by later</span></span><br><span class="line">            <span class="comment">// invocations of the iterator.</span></span><br><span class="line">            callInvokeWithMethodAndArg</span><br><span class="line">          ) : callInvokeWithMethodAndArg();</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// Define the unified helper method that is used to implement .next,</span></span><br><span class="line">      <span class="comment">// .throw, and .return (see defineIteratorMethods).</span></span><br><span class="line">      <span class="built_in">this</span>._invoke = enqueue;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    defineIteratorMethods(AsyncIterator.prototype);</span><br><span class="line">    AsyncIterator.prototype[asyncIteratorSymbol] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    runtime.AsyncIterator = AsyncIterator;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Note that simple async functions are implemented on top of</span></span><br><span class="line">    <span class="comment">// AsyncIterator objects; they just return a Promise for the value of</span></span><br><span class="line">    <span class="comment">// the final result produced by the iterator.</span></span><br><span class="line">    runtime.async = <span class="function"><span class="keyword">function</span>(<span class="params">innerFn, outerFn, self, tryLocsList</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> iter = <span class="keyword">new</span> AsyncIterator(</span><br><span class="line">        wrap(innerFn, outerFn, self, tryLocsList)</span><br><span class="line">      );</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> runtime.isGeneratorFunction(outerFn)</span><br><span class="line">        ? iter <span class="comment">// If outerFn is a generator, return the full iterator.</span></span><br><span class="line">        : iter.next().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> result.done ? result.value : iter.next();</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">makeInvokeMethod</span>(<span class="params">innerFn, self, context</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> state = GenStateSuspendedStart;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">invoke</span>(<span class="params">method, arg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (state === GenStateExecuting) &#123;</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Generator is already running&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (state === GenStateCompleted) &#123;</span><br><span class="line">          <span class="keyword">if</span> (method === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> arg;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          <span class="comment">// Be forgiving, per 25.3.3.3.3 of the spec:</span></span><br><span class="line">          <span class="comment">// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume</span></span><br><span class="line">          <span class="keyword">return</span> doneResult();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        context.method = method;</span><br><span class="line">        context.arg = arg;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> delegate = context.delegate;</span><br><span class="line">          <span class="keyword">if</span> (delegate) &#123;</span><br><span class="line">            <span class="keyword">var</span> delegateResult = maybeInvokeDelegate(delegate, context);</span><br><span class="line">            <span class="keyword">if</span> (delegateResult) &#123;</span><br><span class="line">              <span class="keyword">if</span> (delegateResult === ContinueSentinel) <span class="keyword">continue</span>;</span><br><span class="line">              <span class="keyword">return</span> delegateResult;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">if</span> (context.method === <span class="string">&quot;next&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// Setting context._sent for legacy support of Babel&#x27;s</span></span><br><span class="line">            <span class="comment">// function.sent implementation.</span></span><br><span class="line">            context.sent = context._sent = context.arg;</span><br><span class="line">  </span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (context.method === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (state === GenStateSuspendedStart) &#123;</span><br><span class="line">              state = GenStateCompleted;</span><br><span class="line">              <span class="keyword">throw</span> context.arg;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            context.dispatchException(context.arg);</span><br><span class="line">  </span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (context.method === <span class="string">&quot;return&quot;</span>) &#123;</span><br><span class="line">            context.abrupt(<span class="string">&quot;return&quot;</span>, context.arg);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          state = GenStateExecuting;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">var</span> record = tryCatch(innerFn, self, context);</span><br><span class="line">          <span class="keyword">if</span> (record.type === <span class="string">&quot;normal&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// If an exception is thrown from innerFn, we leave state ===</span></span><br><span class="line">            <span class="comment">// GenStateExecuting and loop back for another invocation.</span></span><br><span class="line">            state = context.done</span><br><span class="line">              ? GenStateCompleted</span><br><span class="line">              : GenStateSuspendedYield;</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (record.arg === ContinueSentinel) &#123;</span><br><span class="line">              <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">              value: record.arg,</span><br><span class="line">              done: context.done</span><br><span class="line">            &#125;;</span><br><span class="line">  </span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (record.type === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">            state = GenStateCompleted;</span><br><span class="line">            <span class="comment">// Dispatch the exception by looping back around to the</span></span><br><span class="line">            <span class="comment">// context.dispatchException(context.arg) call above.</span></span><br><span class="line">            context.method = <span class="string">&quot;throw&quot;</span>;</span><br><span class="line">            context.arg = record.arg;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Call delegate.iterator[context.method](context.arg) and handle the</span></span><br><span class="line">    <span class="comment">// result, either by returning a &#123; value, done &#125; result from the</span></span><br><span class="line">    <span class="comment">// delegate iterator, or by modifying context.method and context.arg,</span></span><br><span class="line">    <span class="comment">// setting context.delegate to null, and returning the ContinueSentinel.</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">maybeInvokeDelegate</span>(<span class="params">delegate, context</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> method = delegate.iterator[context.method];</span><br><span class="line">      <span class="keyword">if</span> (method === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="comment">// A .throw or .return when the delegate iterator has no .throw</span></span><br><span class="line">        <span class="comment">// method always terminates the yield* loop.</span></span><br><span class="line">        context.delegate = <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (context.method === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (delegate.iterator.return) &#123;</span><br><span class="line">            <span class="comment">// If the delegate iterator has a return method, give it a</span></span><br><span class="line">            <span class="comment">// chance to clean up.</span></span><br><span class="line">            context.method = <span class="string">&quot;return&quot;</span>;</span><br><span class="line">            context.arg = <span class="literal">undefined</span>;</span><br><span class="line">            maybeInvokeDelegate(delegate, context);</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (context.method === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">              <span class="comment">// If maybeInvokeDelegate(context) changed context.method from</span></span><br><span class="line">              <span class="comment">// &quot;return&quot; to &quot;throw&quot;, let that override the TypeError below.</span></span><br><span class="line">              <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          context.method = <span class="string">&quot;throw&quot;</span>;</span><br><span class="line">          context.arg = <span class="keyword">new</span> <span class="built_in">TypeError</span>(</span><br><span class="line">            <span class="string">&quot;The iterator does not provide a &#x27;throw&#x27; method&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">var</span> record = tryCatch(method, delegate.iterator, context.arg);</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">if</span> (record.type === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">        context.method = <span class="string">&quot;throw&quot;</span>;</span><br><span class="line">        context.arg = record.arg;</span><br><span class="line">        context.delegate = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">var</span> info = record.arg;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">if</span> (! info) &#123;</span><br><span class="line">        context.method = <span class="string">&quot;throw&quot;</span>;</span><br><span class="line">        context.arg = <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;iterator result is not an object&quot;</span>);</span><br><span class="line">        context.delegate = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">if</span> (info.done) &#123;</span><br><span class="line">        <span class="comment">// Assign the result of the finished delegate to the temporary</span></span><br><span class="line">        <span class="comment">// variable specified by delegate.resultName (see delegateYield).</span></span><br><span class="line">        context[delegate.resultName] = info.value;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// Resume execution at the desired location (see delegateYield).</span></span><br><span class="line">        context.next = delegate.nextLoc;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// If context.method was &quot;throw&quot; but the delegate handled the</span></span><br><span class="line">        <span class="comment">// exception, let the outer generator proceed normally. If</span></span><br><span class="line">        <span class="comment">// context.method was &quot;next&quot;, forget context.arg since it has been</span></span><br><span class="line">        <span class="comment">// &quot;consumed&quot; by the delegate iterator. If context.method was</span></span><br><span class="line">        <span class="comment">// &quot;return&quot;, allow the original .return call to continue in the</span></span><br><span class="line">        <span class="comment">// outer generator.</span></span><br><span class="line">        <span class="keyword">if</span> (context.method !== <span class="string">&quot;return&quot;</span>) &#123;</span><br><span class="line">          context.method = <span class="string">&quot;next&quot;</span>;</span><br><span class="line">          context.arg = <span class="literal">undefined</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Re-yield the result returned by the delegate method.</span></span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// The delegate iterator is finished, so forget it and continue with</span></span><br><span class="line">      <span class="comment">// the outer generator.</span></span><br><span class="line">      context.delegate = <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Define Generator.prototype.&#123;next,throw,return&#125; in terms of the</span></span><br><span class="line">    <span class="comment">// unified ._invoke helper method.</span></span><br><span class="line">    defineIteratorMethods(Gp);</span><br><span class="line">  </span><br><span class="line">    Gp[toStringTagSymbol] = <span class="string">&quot;Generator&quot;</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// A Generator should always return itself as the iterator object when the</span></span><br><span class="line">    <span class="comment">// @@iterator function is called on it. Some browsers&#x27; implementations of the</span></span><br><span class="line">    <span class="comment">// iterator prototype chain incorrectly implement this, causing the Generator</span></span><br><span class="line">    <span class="comment">// object to not be returned from this call. This ensures that doesn&#x27;t happen.</span></span><br><span class="line">    <span class="comment">// See https://github.com/facebook/regenerator/issues/274 for more details.</span></span><br><span class="line">    Gp[iteratorSymbol] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    Gp.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;[object Generator]&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">pushTryEntry</span>(<span class="params">locs</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> entry = &#123; <span class="attr">tryLoc</span>: locs[<span class="number">0</span>] &#125;;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">if</span> (<span class="number">1</span> <span class="keyword">in</span> locs) &#123;</span><br><span class="line">        entry.catchLoc = locs[<span class="number">1</span>];</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">if</span> (<span class="number">2</span> <span class="keyword">in</span> locs) &#123;</span><br><span class="line">        entry.finallyLoc = locs[<span class="number">2</span>];</span><br><span class="line">        entry.afterLoc = locs[<span class="number">3</span>];</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="built_in">this</span>.tryEntries.push(entry);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">resetTryEntry</span>(<span class="params">entry</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> record = entry.completion || &#123;&#125;;</span><br><span class="line">      record.type = <span class="string">&quot;normal&quot;</span>;</span><br><span class="line">      <span class="keyword">delete</span> record.arg;</span><br><span class="line">      entry.completion = record;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Context</span>(<span class="params">tryLocsList</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// The root entry object (effectively a try statement without a catch</span></span><br><span class="line">      <span class="comment">// or a finally block) gives us a place to store values thrown from</span></span><br><span class="line">      <span class="comment">// locations where there is no enclosing try statement.</span></span><br><span class="line">      <span class="built_in">this</span>.tryEntries = [&#123; <span class="attr">tryLoc</span>: <span class="string">&quot;root&quot;</span> &#125;];</span><br><span class="line">      tryLocsList.forEach(pushTryEntry, <span class="built_in">this</span>);</span><br><span class="line">      <span class="built_in">this</span>.reset(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    runtime.keys = <span class="function"><span class="keyword">function</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> keys = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> object) &#123;</span><br><span class="line">        keys.push(key);</span><br><span class="line">      &#125;</span><br><span class="line">      keys.reverse();</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// Rather than returning an object with a next method, we keep</span></span><br><span class="line">      <span class="comment">// things simple and return the next function itself.</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (keys.length) &#123;</span><br><span class="line">          <span class="keyword">var</span> key = keys.pop();</span><br><span class="line">          <span class="keyword">if</span> (key <span class="keyword">in</span> object) &#123;</span><br><span class="line">            next.value = key;</span><br><span class="line">            next.done = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> next;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// To avoid creating an additional object, we just hang the .value</span></span><br><span class="line">        <span class="comment">// and .done properties off the next function object itself. This</span></span><br><span class="line">        <span class="comment">// also ensures that the minifier will not anonymize the function.</span></span><br><span class="line">        next.done = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> next;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">values</span>(<span class="params">iterable</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (iterable) &#123;</span><br><span class="line">        <span class="keyword">var</span> iteratorMethod = iterable[iteratorSymbol];</span><br><span class="line">        <span class="keyword">if</span> (iteratorMethod) &#123;</span><br><span class="line">          <span class="keyword">return</span> iteratorMethod.call(iterable);</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> iterable.next === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> iterable;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(iterable.length)) &#123;</span><br><span class="line">          <span class="keyword">var</span> i = <span class="number">-1</span>, next = <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">while</span> (++i &lt; iterable.length) &#123;</span><br><span class="line">              <span class="keyword">if</span> (hasOwn.call(iterable, i)) &#123;</span><br><span class="line">                next.value = iterable[i];</span><br><span class="line">                next.done = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">return</span> next;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">  </span><br><span class="line">            next.value = <span class="literal">undefined</span>;</span><br><span class="line">            next.done = <span class="literal">true</span>;</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">return</span> next;</span><br><span class="line">          &#125;;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">return</span> next.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">// Return an iterator with no values.</span></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">next</span>: doneResult &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    runtime.values = values;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doneResult</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    Context.prototype = &#123;</span><br><span class="line">      <span class="keyword">constructor</span>: Context,</span><br><span class="line">  </span><br><span class="line">      reset: function(skipTempReset) &#123;</span><br><span class="line">        <span class="built_in">this</span>.prev = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.next = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// Resetting context._sent for legacy support of Babel&#x27;s</span></span><br><span class="line">        <span class="comment">// function.sent implementation.</span></span><br><span class="line">        <span class="built_in">this</span>.sent = <span class="built_in">this</span>._sent = <span class="literal">undefined</span>;</span><br><span class="line">        <span class="built_in">this</span>.done = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">this</span>.delegate = <span class="literal">null</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="built_in">this</span>.method = <span class="string">&quot;next&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.arg = <span class="literal">undefined</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="built_in">this</span>.tryEntries.forEach(resetTryEntry);</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (!skipTempReset) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> <span class="built_in">this</span>) &#123;</span><br><span class="line">            <span class="comment">// Not sure about the optimal order of these conditions:</span></span><br><span class="line">            <span class="keyword">if</span> (name.charAt(<span class="number">0</span>) === <span class="string">&quot;t&quot;</span> &amp;&amp;</span><br><span class="line">                hasOwn.call(<span class="built_in">this</span>, name) &amp;&amp;</span><br><span class="line">                !<span class="built_in">isNaN</span>(+name.slice(<span class="number">1</span>))) &#123;</span><br><span class="line">              <span class="built_in">this</span>[name] = <span class="literal">undefined</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      stop: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.done = <span class="literal">true</span>;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">var</span> rootEntry = <span class="built_in">this</span>.tryEntries[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">var</span> rootRecord = rootEntry.completion;</span><br><span class="line">        <span class="keyword">if</span> (rootRecord.type === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">throw</span> rootRecord.arg;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.rval;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      dispatchException: <span class="function"><span class="keyword">function</span>(<span class="params">exception</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.done) &#123;</span><br><span class="line">          <span class="keyword">throw</span> exception;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">var</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">loc, caught</span>) </span>&#123;</span><br><span class="line">          record.type = <span class="string">&quot;throw&quot;</span>;</span><br><span class="line">          record.arg = exception;</span><br><span class="line">          context.next = loc;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">if</span> (caught) &#123;</span><br><span class="line">            <span class="comment">// If the dispatched exception was caught by a catch block,</span></span><br><span class="line">            <span class="comment">// then let that catch block handle the exception normally.</span></span><br><span class="line">            context.method = <span class="string">&quot;next&quot;</span>;</span><br><span class="line">            context.arg = <span class="literal">undefined</span>;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">return</span> !! caught;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="built_in">this</span>.tryEntries.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">          <span class="keyword">var</span> entry = <span class="built_in">this</span>.tryEntries[i];</span><br><span class="line">          <span class="keyword">var</span> record = entry.completion;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">if</span> (entry.tryLoc === <span class="string">&quot;root&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// Exception thrown outside of any try block that could handle</span></span><br><span class="line">            <span class="comment">// it, so set the completion value of the entire function to</span></span><br><span class="line">            <span class="comment">// throw the exception.</span></span><br><span class="line">            <span class="keyword">return</span> handle(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">if</span> (entry.tryLoc &lt;= <span class="built_in">this</span>.prev) &#123;</span><br><span class="line">            <span class="keyword">var</span> hasCatch = hasOwn.call(entry, <span class="string">&quot;catchLoc&quot;</span>);</span><br><span class="line">            <span class="keyword">var</span> hasFinally = hasOwn.call(entry, <span class="string">&quot;finallyLoc&quot;</span>);</span><br><span class="line">  </span><br><span class="line">            <span class="keyword">if</span> (hasCatch &amp;&amp; hasFinally) &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.prev &lt; entry.catchLoc) &#123;</span><br><span class="line">                <span class="keyword">return</span> handle(entry.catchLoc, <span class="literal">true</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.prev &lt; entry.finallyLoc) &#123;</span><br><span class="line">                <span class="keyword">return</span> handle(entry.finallyLoc);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hasCatch) &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.prev &lt; entry.catchLoc) &#123;</span><br><span class="line">                <span class="keyword">return</span> handle(entry.catchLoc, <span class="literal">true</span>);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hasFinally) &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.prev &lt; entry.finallyLoc) &#123;</span><br><span class="line">                <span class="keyword">return</span> handle(entry.finallyLoc);</span><br><span class="line">              &#125;</span><br><span class="line">  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;try statement without catch or finally&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      abrupt: <span class="function"><span class="keyword">function</span>(<span class="params">type, arg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="built_in">this</span>.tryEntries.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">          <span class="keyword">var</span> entry = <span class="built_in">this</span>.tryEntries[i];</span><br><span class="line">          <span class="keyword">if</span> (entry.tryLoc &lt;= <span class="built_in">this</span>.prev &amp;&amp;</span><br><span class="line">              hasOwn.call(entry, <span class="string">&quot;finallyLoc&quot;</span>) &amp;&amp;</span><br><span class="line">              <span class="built_in">this</span>.prev &lt; entry.finallyLoc) &#123;</span><br><span class="line">            <span class="keyword">var</span> finallyEntry = entry;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (finallyEntry &amp;&amp;</span><br><span class="line">            (type === <span class="string">&quot;break&quot;</span> ||</span><br><span class="line">             type === <span class="string">&quot;continue&quot;</span>) &amp;&amp;</span><br><span class="line">            finallyEntry.tryLoc &lt;= arg &amp;&amp;</span><br><span class="line">            arg &lt;= finallyEntry.finallyLoc) &#123;</span><br><span class="line">          <span class="comment">// Ignore the finally entry if control is not jumping to a</span></span><br><span class="line">          <span class="comment">// location outside the try/catch block.</span></span><br><span class="line">          finallyEntry = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">var</span> record = finallyEntry ? finallyEntry.completion : &#123;&#125;;</span><br><span class="line">        record.type = type;</span><br><span class="line">        record.arg = arg;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (finallyEntry) &#123;</span><br><span class="line">          <span class="built_in">this</span>.method = <span class="string">&quot;next&quot;</span>;</span><br><span class="line">          <span class="built_in">this</span>.next = finallyEntry.finallyLoc;</span><br><span class="line">          <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.complete(record);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      complete: <span class="function"><span class="keyword">function</span>(<span class="params">record, afterLoc</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (record.type === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">          <span class="keyword">throw</span> record.arg;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (record.type === <span class="string">&quot;break&quot;</span> ||</span><br><span class="line">            record.type === <span class="string">&quot;continue&quot;</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.next = record.arg;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (record.type === <span class="string">&quot;return&quot;</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.rval = <span class="built_in">this</span>.arg = record.arg;</span><br><span class="line">          <span class="built_in">this</span>.method = <span class="string">&quot;return&quot;</span>;</span><br><span class="line">          <span class="built_in">this</span>.next = <span class="string">&quot;end&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (record.type === <span class="string">&quot;normal&quot;</span> &amp;&amp; afterLoc) &#123;</span><br><span class="line">          <span class="built_in">this</span>.next = afterLoc;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      finish: <span class="function"><span class="keyword">function</span>(<span class="params">finallyLoc</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="built_in">this</span>.tryEntries.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">          <span class="keyword">var</span> entry = <span class="built_in">this</span>.tryEntries[i];</span><br><span class="line">          <span class="keyword">if</span> (entry.finallyLoc === finallyLoc) &#123;</span><br><span class="line">            <span class="built_in">this</span>.complete(entry.completion, entry.afterLoc);</span><br><span class="line">            resetTryEntry(entry);</span><br><span class="line">            <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      <span class="string">&quot;catch&quot;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">tryLoc</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="built_in">this</span>.tryEntries.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">          <span class="keyword">var</span> entry = <span class="built_in">this</span>.tryEntries[i];</span><br><span class="line">          <span class="keyword">if</span> (entry.tryLoc === tryLoc) &#123;</span><br><span class="line">            <span class="keyword">var</span> record = entry.completion;</span><br><span class="line">            <span class="keyword">if</span> (record.type === <span class="string">&quot;throw&quot;</span>) &#123;</span><br><span class="line">              <span class="keyword">var</span> thrown = record.arg;</span><br><span class="line">              resetTryEntry(entry);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> thrown;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// The context.catch method must only be called with a location</span></span><br><span class="line">        <span class="comment">// argument that corresponds to a known catch block.</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;illegal catch attempt&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">  </span><br><span class="line">      delegateYield: <span class="function"><span class="keyword">function</span>(<span class="params">iterable, resultName, nextLoc</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.delegate = &#123;</span><br><span class="line">          iterator: values(iterable),</span><br><span class="line">          resultName: resultName,</span><br><span class="line">          nextLoc: nextLoc</span><br><span class="line">        &#125;;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.method === <span class="string">&quot;next&quot;</span>) &#123;</span><br><span class="line">          <span class="comment">// Deliberately forget the last sent value so that we don&#x27;t</span></span><br><span class="line">          <span class="comment">// accidentally pass it on to the delegate.</span></span><br><span class="line">          <span class="built_in">this</span>.arg = <span class="literal">undefined</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> ContinueSentinel;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(</span><br><span class="line">    <span class="comment">// In sloppy mode, unbound `this` refers to the global object, fallback to</span></span><br><span class="line">    <span class="comment">// Function constructor if we&#x27;re in global strict mode. That is sadly a form</span></span><br><span class="line">    <span class="comment">// of indirect eval which violates Content Security Policy.</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">this</span> &#125;)() || <span class="built_in">Function</span>(<span class="string">&quot;return this&quot;</span>)()</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>              </div>            </details><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/01.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试代码"></p>            </div><div class="note bug red"><p>awiat 必须在async中使用。否则无效</p></div><h2 id="request-promise"><a href="#request-promise" class="headerlink" title="request-promise"></a>request-promise</h2><p>在小程序中使用 <code>request-promise</code> 可以快捷处理js异步问题，但是，云数据库只支持插入<span class='p red'>单条数据</span></p><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/02.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试代码"></p>            </div><h2 id="突破云函数限制"><a href="#突破云函数限制" class="headerlink" title="突破云函数限制"></a>突破云函数限制</h2><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>云函数 限制最多读取100条数据</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>小程序端 限制最多读取20条数据</p>            </div><p>如何突破这种限制</p><details ><summary> 测试代码 </summary>              <div class='content'>              <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//假设数据有210条数据</span></span><br><span class="line"><span class="comment">//计算总数也是一个异步的过程。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="keyword">await</span> playlistCollection.count()</span><br><span class="line"><span class="comment">//此时count是一个对象, 获取当前总的数据</span></span><br><span class="line"><span class="keyword">let</span> total = countResult.total</span><br><span class="line"></span><br><span class="line"><span class="comment">//一次最多读100条</span></span><br><span class="line">MAX_LIMIT = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//那分三次读出    向上取整</span></span><br><span class="line"><span class="keyword">let</span> batchTimes = <span class="built_in">Math</span>.ceil((total / MAX_LIMIT))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 每次取数据的时候都是异步操作，</span></span><br><span class="line"><span class="comment">// 每次的异步任务完成后，再拼接</span></span><br><span class="line"><span class="keyword">let</span> tasks = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; batchTimes; i++)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//每次取的数据开始地址不一样</span></span><br><span class="line">   <span class="keyword">let</span> promiseId = playlistCollection.skip(i * MAX_LIMIT).limit(MAX_LIMIT).get()</span><br><span class="line">   tasks.push(promiseId)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list = &#123;</span><br><span class="line">    data: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(tasks.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">// acc 之前的值</span></span><br><span class="line"><span class="comment">// cur 当前循环遍历的值</span></span><br><span class="line">    list = (<span class="keyword">await</span> <span class="built_in">Promise</span>.all(tasks)).reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            data: acc.data.concat(cur.data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试代码"></p>            </div><h2 id="定时触发器-触发云函数"><a href="#定时触发器-触发云函数" class="headerlink" title="定时触发器 触发云函数"></a>定时触发器 触发云函数</h2><ol><li><p>在云函数右键创建  <code>config.json</code></p></li><li><p>填写内容</p></li><li><p>上传触发器</p></li></ol><div class="note warning"><p>上传前确认，json文件没有注释</p></div><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><a href="#-1">上传触发器代码</a></li><li class="tab"><a href="#-2">触发器代码理解</a></li></ul><div class="tab-content"><div class="tab-pane active" id="-1"><details ><summary> 触发器代码理解 </summary>              <div class='content'>              <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;triggers&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;myTrigger&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;timer&quot;</span>,</span><br><span class="line">      <span class="string">&quot;config&quot;</span>: <span class="string">&quot;0 0 10,14,16,23 * * * *&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details></div><div class="tab-pane" id="-2"><details ><summary> 触发器代码 </summary>              <div class='content'>              <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// triggers 字段是触发器数组，目前仅支持一个触发器，即数组只能填写一个，不可添加多个</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//   JSON 文件不能添加注释，此处是为了截图  好理解</span></span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;triggers&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// name: 触发器的名字，规则见下方说明</span></span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;myTrigger&quot;</span>,</span><br><span class="line">      <span class="comment">// type: 触发器类型，目前仅支持 timer (即 定时触发器)</span></span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;timer&quot;</span>,</span><br><span class="line">      <span class="comment">// config: 触发器配置，在定时触发器下，config 格式为 cron 表达式，规则见下方说明</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//0 0 2 1 * * * 表示在每月的1日的凌晨2点触发</span></span><br><span class="line"><span class="comment">//0 15 10 * * MON-FRI * 表示在周一到周五每天上午10: 15触发</span></span><br><span class="line"><span class="comment">//0 0 10,14,16 * * * * 表示在每天上午10点，下午2点，4点触发</span></span><br><span class="line"><span class="comment">//0 */30 9-17 * * * * 表示在每天上午9点到下午5点内每半小时触发</span></span><br><span class="line"><span class="comment">//0 0 12 * * WED * 表示在每个星期三中午12点触发</span></span><br><span class="line"></span><br><span class="line">      <span class="string">&quot;config&quot;</span>: <span class="string">&quot;0 0 10,14,16,23 * * * *&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details></div></div></div><div class="gallery ">              <p><img src="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/03.png" class="lazyload" data-srcset="https://wbig.gitee.io/cdn/img/blog/javaScript/js-promise/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="测试代码"></p>            </div>]]></content>
      
      
      <categories>
          
          <category> 微信小程序 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
            <tag> js异步操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello My Website</title>
      <link href="Hello-My-Website/"/>
      <url>Hello-My-Website/</url>
      
        <content type="html"><![CDATA[<h2 id="关于网站"><a href="#关于网站" class="headerlink" title="关于网站"></a>关于网站</h2><p>这是我的第一个线上网站，历经6天，才像个样子！</p><p>此网站部署在 <strong>Github</strong> ，我曾经尝试过本地服务器，但内网穿透比较难，知识有限，便放弃了！</p><p>使用Hexo和volantis主题配置。</p><p>然后把自己想说的，不想说的，该说的，不该说的，我应该都会在这里写下来。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://7.dusays.com/2020/10/12/9cec64fc316f0.jpg" class="lazyload" data-srcset="https://7.dusays.com/2020/10/12/9cec64fc316f0.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div><p>网站暂未提交到百度检索收录！等真正稳定了，文章有内容干货的时候再提交！</p><p>如果您对网站有任何问题以及见解，欢迎斧正！</p><h2 id="鲸落"><a href="#鲸落" class="headerlink" title="鲸落"></a>鲸落</h2><p><strong>鲸落</strong>是我的QQ昵称，也伴随了我大学生活以及现在。一开始只是觉得该换用了很久很久不知道多久的昵称，后面渐渐了解它的含义。</p><p>行吧，就它了！懒得换，就是字数少了点！</p><p>有时回想起某一段时间，还真是五味杂陈。</p><p class='p center code large'>鲸落</p><p class='p center logo small'>A whale falls，all things are born</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Volantis </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
